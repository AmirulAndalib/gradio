import{SvelteComponentDev as Ve,init as Ge,safe_not_equal as Ce,dispatch_dev as O,validate_store as Er,component_subscribe as Sr,validate_slots as qe,createEventDispatcher as Se,onMount as Xe,globals as Bi,element as ee,space as ne,attr_dev as I,toggle_class as q,add_location as te,insert_dev as A,append_dev as Re,transition_in as D,group_outros as _e,transition_out as M,check_outros as be,detach_dev as B,binding_callbacks as Q,listen_dev as oe,is_function as Dr,create_component as X,mount_component as Y,noop as Oe,destroy_component as U,empty as Fe,flush as K,src_url_equal as de,ensure_array_like_dev as Vi,tick as Ie,onDestroy as Gi,add_render_callback as Ni,add_iframe_resize_listener as vn,destroy_each as Mr,bubble as yn,create_bidirectional_transition as qi,set_style as Fi,stop_propagation as Ir,run_all as kn,to_number as Rr,set_input_value as Bt,bind as me,add_flush_callback as ge,create_slot as Or,update_slot_base as Cr,get_all_dirty_from_scope as Tr,get_slot_changes as Pr,assign as Ar,get_spread_update as Br,get_spread_object as Nr}from"../../../node/dev/svelte-internal.js";import{X as Pt,S as En}from"./index-0c627992.js";import{f as Jt,n as Ki,B as Sn}from"./Button-9bfe2272.js";import{B as Dn}from"./BlockLabel-f45b05bb.js";import{I as xt}from"./Image-68e8a471.js";import{C as Mn,a as In,S as Rn,E as On,B as Cn,b as Tn,c as $t}from"./Square-918cc650.js";import{g as Qi}from"./utils-4c2bc385.js";import{I as Ye}from"./IconButton-559a7ff4.js";import{C as Pn,M as It}from"./ModifyUpload-33dea6b2.js";import{U as An}from"./Undo-842db9b1.js";import{U as Bn}from"./Upload-29fdce3c.js";import{U as Nn}from"./UploadText-6d1bc184.js";const{console:Kt}=Bi,ft="Users/peterallen/Projects/gradio/js/image/interactive/Webcam.svelte";function ei(i){let e,t,n,s,r,o;const a=[Ln,zn],c=[];function l(h,f){return h[1]==="video"?0:1}t=l(i),n=c[t]=a[t](i);const u={c:function(){e=ee("button"),n.c(),I(e,"class","svelte-1cyu66t"),te(e,ft,131,2,3198)},m:function(f,b){A(f,e,b),c[t].m(e,null),s=!0,r||(o=oe(e,"click",function(){Dr(i[1]==="image"?i[5]:i[6])&&(i[1]==="image"?i[5]:i[6]).apply(this,arguments)},!1,!1,!1,!1),r=!0)},p:function(f,b){i=f;let _=t;t=l(i),t===_?c[t].p(i,b):(_e(),M(c[_],1,1,()=>{c[_]=null}),be(),n=c[t],n?n.p(i,b):(n=c[t]=a[t](i),n.c()),D(n,1),n.m(e,null))},i:function(f){s||(D(n),s=!0)},o:function(f){M(n),s=!1},d:function(f){f&&B(e),c[t].d(),r=!1,o()}};return O("SvelteRegisterBlock",{block:u,id:ei.name,type:"if",source:"(102:1) {#if !streaming}",ctx:i}),u}function zn(i){let e,t,n;t=new Mn({$$inline:!0});const s={c:function(){e=ee("div"),X(t.$$.fragment),I(e,"class","icon svelte-1cyu66t"),te(e,ft,143,4,3456)},m:function(o,a){A(o,e,a),Y(t,e,null),n=!0},p:Oe,i:function(o){n||(D(t.$$.fragment,o),n=!0)},o:function(o){M(t.$$.fragment,o),n=!1},d:function(o){o&&B(e),U(t)}};return O("SvelteRegisterBlock",{block:s,id:zn.name,type:"else",source:"(114:3) {:else}",ctx:i}),s}function Ln(i){let e,t,n,s;const r=[jn,Wn],o=[];function a(l,u){return l[4]?0:1}e=a(i),t=o[e]=r[e](i);const c={c:function(){t.c(),n=Fe()},m:function(u,h){o[e].m(u,h),A(u,n,h),s=!0},p:function(u,h){let f=e;e=a(u),e!==f&&(_e(),M(o[f],1,1,()=>{o[f]=null}),be(),t=o[e],t||(t=o[e]=r[e](u),t.c()),D(t,1),t.m(n.parentNode,n))},i:function(u){s||(D(t),s=!0)},o:function(u){M(t),s=!1},d:function(u){u&&B(n),o[e].d(u)}};return O("SvelteRegisterBlock",{block:c,id:Ln.name,type:"if",source:'(104:3) {#if mode === \\"video\\"}',ctx:i}),c}function Wn(i){let e,t,n;t=new In({$$inline:!0});const s={c:function(){e=ee("div"),X(t.$$.fragment),I(e,"class","icon svelte-1cyu66t"),te(e,ft,138,5,3383)},m:function(o,a){A(o,e,a),Y(t,e,null),n=!0},i:function(o){n||(D(t.$$.fragment,o),n=!0)},o:function(o){M(t.$$.fragment,o),n=!1},d:function(o){o&&B(e),U(t)}};return O("SvelteRegisterBlock",{block:s,id:Wn.name,type:"else",source:"(109:4) {:else}",ctx:i}),s}function jn(i){let e,t,n;t=new Rn({$$inline:!0});const s={c:function(){e=ee("div"),X(t.$$.fragment),I(e,"class","icon svelte-1cyu66t"),te(e,ft,134,5,3318)},m:function(o,a){A(o,e,a),Y(t,e,null),n=!0},i:function(o){n||(D(t.$$.fragment,o),n=!0)},o:function(o){M(t.$$.fragment,o),n=!1},d:function(o){o&&B(e),U(t)}};return O("SvelteRegisterBlock",{block:s,id:jn.name,type:"if",source:"(105:4) {#if recording}",ctx:i}),s}function ti(i){let e,t,n,s,r=!i[0]&&ei(i);const o={c:function(){e=ee("div"),t=ee("video"),n=ne(),r&&r.c(),I(t,"class","svelte-1cyu66t"),q(t,"flip",i[2]),te(t,ft,129,1,3116),I(e,"class","wrap svelte-1cyu66t"),te(e,ft,127,0,3049)},l:function(c){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(c,l){A(c,e,l),Re(e,t),i[9](t),Re(e,n),r&&r.m(e,null),s=!0},p:function(c,[l]){(!s||l&4)&&q(t,"flip",c[2]),c[0]?r&&(_e(),M(r,1,1,()=>{r=null}),be()):r?(r.p(c,l),l&1&&D(r,1)):(r=ei(c),r.c(),D(r,1),r.m(e,null))},i:function(c){s||(D(r),s=!0)},o:function(c){M(r),s=!1},d:function(c){c&&B(e),i[9](null),r&&r.d()}};return O("SvelteRegisterBlock",{block:o,id:ti.name,type:"component",source:"",ctx:i}),o}function zr(i,e,t){let n;Er(Pt,"_"),Sr(i,Pt,v=>t(15,n=v));let{$$slots:s={},$$scope:r}=e;qe("Webcam",s,[]);let o,a,{streaming:c=!1}=e,{pending:l=!1}=e,{mode:u="image"}=e,{mirror_webcam:h}=e,{include_audio:f}=e;const b=Se();Xe(()=>a=document.createElement("canvas"));async function _(){try{R=await navigator.mediaDevices.getUserMedia({video:!0,audio:f}),t(3,o.srcObject=R,o),t(3,o.muted=!0,o),o.play()}catch(v){if(v instanceof DOMException&&v.name=="NotAllowedError")b("error",n("image.allow_webcam_access"));else throw v}}function m(){var v=a.getContext("2d");if(o.videoWidth&&o.videoHeight){a.width=o.videoWidth,a.height=o.videoHeight,v.drawImage(o,0,0,o.videoWidth,o.videoHeight);var S=a.toDataURL("image/png");b(c?"stream":"capture",S)}}let w=!1,E=[],R,k,P;function L(){if(w){P.stop();let v=new Blob(E,{type:k}),S=new FileReader;S.onload=function(N){N.target&&(b("capture",{data:N.target.result,name:"sample."+k.substring(6),is_example:!1,is_file:!1}),b("stop_recording"))},S.readAsDataURL(v)}else{b("start_recording"),E=[];let v=["video/webm","video/mp4"];for(let S of v)if(MediaRecorder.isTypeSupported(S)){k=S;break}if(k===null){console.error("No supported MediaRecorder mimeType");return}P=new MediaRecorder(R,{mimeType:k}),P.addEventListener("dataavailable",function(S){E.push(S.data)}),P.start(200)}t(4,w=!w)}_(),c&&u==="image"&&window.setInterval(()=>{o&&!l&&m()},500),i.$$.on_mount.push(function(){h===void 0&&!("mirror_webcam"in e||i.$$.bound[i.$$.props.mirror_webcam])&&Kt.warn("<Webcam> was created without expected prop 'mirror_webcam'"),f===void 0&&!("include_audio"in e||i.$$.bound[i.$$.props.include_audio])&&Kt.warn("<Webcam> was created without expected prop 'include_audio'")});const y=["streaming","pending","mode","mirror_webcam","include_audio"];Object.keys(e).forEach(v=>{!~y.indexOf(v)&&v.slice(0,2)!=="$$"&&v!=="slot"&&Kt.warn(`<Webcam> was created with unknown prop '${v}'`)});function C(v){Q[v?"unshift":"push"](()=>{o=v,t(3,o)})}return i.$$set=v=>{"streaming"in v&&t(0,c=v.streaming),"pending"in v&&t(7,l=v.pending),"mode"in v&&t(1,u=v.mode),"mirror_webcam"in v&&t(2,h=v.mirror_webcam),"include_audio"in v&&t(8,f=v.include_audio)},i.$capture_state=()=>({createEventDispatcher:Se,onMount:Xe,Camera:Mn,Circle:In,Square:Rn,_:Pt,video_source:o,canvas:a,streaming:c,pending:l,mode:u,mirror_webcam:h,include_audio:f,dispatch:b,access_webcam:_,take_picture:m,recording:w,recorded_blobs:E,stream:R,mimeType:k,media_recorder:P,take_recording:L,$_:n}),i.$inject_state=v=>{"video_source"in v&&t(3,o=v.video_source),"canvas"in v&&(a=v.canvas),"streaming"in v&&t(0,c=v.streaming),"pending"in v&&t(7,l=v.pending),"mode"in v&&t(1,u=v.mode),"mirror_webcam"in v&&t(2,h=v.mirror_webcam),"include_audio"in v&&t(8,f=v.include_audio),"recording"in v&&t(4,w=v.recording),"recorded_blobs"in v&&(E=v.recorded_blobs),"stream"in v&&(R=v.stream),"mimeType"in v&&(k=v.mimeType),"media_recorder"in v&&(P=v.media_recorder)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),[c,u,h,o,w,m,L,l,f,C]}class Lr extends Ve{constructor(e){super(e),Ge(this,e,zr,ti,Ce,{streaming:0,pending:7,mode:1,mirror_webcam:2,include_audio:8}),O("SvelteRegisterComponent",{component:this,tagName:"Webcam",options:e,id:ti.name})}get streaming(){throw new Error("<Webcam>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set streaming(e){throw new Error("<Webcam>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pending(){throw new Error("<Webcam>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pending(e){throw new Error("<Webcam>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mode(){throw new Error("<Webcam>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(e){throw new Error("<Webcam>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mirror_webcam(){throw new Error("<Webcam>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mirror_webcam(e){throw new Error("<Webcam>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get include_audio(){throw new Error("<Webcam>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set include_audio(e){throw new Error("<Webcam>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Hn=Lr;/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */function Zi(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function Xn(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Zi(Object(t),!0).forEach(function(n){Hr(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Zi(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function At(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?At=function(e){return typeof e}:At=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},At(i)}function Wr(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Ji(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function jr(i,e,t){return e&&Ji(i.prototype,e),t&&Ji(i,t),i}function Hr(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Yn(i){return Xr(i)||Yr(i)||Ur(i)||Vr()}function Xr(i){if(Array.isArray(i))return ii(i)}function Yr(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Ur(i,e){if(i){if(typeof i=="string")return ii(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ii(i,e)}}function ii(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function Vr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Wt=typeof window<"u"&&typeof window.document<"u",De=Wt?window:{},zi=Wt&&De.document.documentElement?"ontouchstart"in De.document.documentElement:!1,Li=Wt?"PointerEvent"in De:!1,J="cropper",Wi="all",Un="crop",Vn="move",Gn="zoom",je="e",He="w",at="s",Ae="n",wt="ne",vt="nw",yt="se",kt="sw",ni="".concat(J,"-crop"),xi="".concat(J,"-disabled"),fe="".concat(J,"-hidden"),$i="".concat(J,"-hide"),Gr="".concat(J,"-invisible"),Nt="".concat(J,"-modal"),ri="".concat(J,"-move"),St="".concat(J,"Action"),Ct="".concat(J,"Preview"),ji="crop",qn="move",Fn="none",oi="crop",si="cropend",ai="cropmove",ci="cropstart",en="dblclick",qr=zi?"touchstart":"mousedown",Fr=zi?"touchmove":"mousemove",Kr=zi?"touchend touchcancel":"mouseup",tn=Li?"pointerdown":qr,nn=Li?"pointermove":Fr,rn=Li?"pointerup pointercancel":Kr,on="ready",sn="resize",an="wheel",li="zoom",cn="image/jpeg",Qr=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Zr=/^data:/,Jr=/^data:image\/jpeg;base64,/,xr=/^img|canvas$/i,Kn=200,Qn=100,ln={viewMode:0,dragMode:ji,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Kn,minContainerHeight:Qn,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},$r='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',eo=Number.isNaN||De.isNaN;function z(i){return typeof i=="number"&&!eo(i)}var un=function(e){return e>0&&e<1/0};function Qt(i){return typeof i>"u"}function Ue(i){return At(i)==="object"&&i!==null}var to=Object.prototype.hasOwnProperty;function ct(i){if(!Ue(i))return!1;try{var e=i.constructor,t=e.prototype;return e&&t&&to.call(t,"isPrototypeOf")}catch{return!1}}function he(i){return typeof i=="function"}var io=Array.prototype.slice;function Zn(i){return Array.from?Array.from(i):io.call(i)}function se(i,e){return i&&he(e)&&(Array.isArray(i)||z(i.length)?Zn(i).forEach(function(t,n){e.call(i,t,n,i)}):Ue(i)&&Object.keys(i).forEach(function(t){e.call(i,i[t],t,i)})),i}var x=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return Ue(e)&&n.length>0&&n.forEach(function(r){Ue(r)&&Object.keys(r).forEach(function(o){e[o]=r[o]})}),e},no=/\.\d*(?:0|9){12}\d*$/;function ut(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return no.test(i)?Math.round(i*e)/e:i}var ro=/^width|height|left|top|marginLeft|marginTop$/;function Ne(i,e){var t=i.style;se(e,function(n,s){ro.test(s)&&z(n)&&(n="".concat(n,"px")),t[s]=n})}function oo(i,e){return i.classList?i.classList.contains(e):i.className.indexOf(e)>-1}function ce(i,e){if(e){if(z(i.length)){se(i,function(n){ce(n,e)});return}if(i.classList){i.classList.add(e);return}var t=i.className.trim();t?t.indexOf(e)<0&&(i.className="".concat(t," ").concat(e)):i.className=e}}function Ee(i,e){if(e){if(z(i.length)){se(i,function(t){Ee(t,e)});return}if(i.classList){i.classList.remove(e);return}i.className.indexOf(e)>=0&&(i.className=i.className.replace(e,""))}}function lt(i,e,t){if(e){if(z(i.length)){se(i,function(n){lt(n,e,t)});return}t?ce(i,e):Ee(i,e)}}var so=/([a-z\d])([A-Z])/g;function Hi(i){return i.replace(so,"$1-$2").toLowerCase()}function ui(i,e){return Ue(i[e])?i[e]:i.dataset?i.dataset[e]:i.getAttribute("data-".concat(Hi(e)))}function Dt(i,e,t){Ue(t)?i[e]=t:i.dataset?i.dataset[e]=t:i.setAttribute("data-".concat(Hi(e)),t)}function ao(i,e){if(Ue(i[e]))try{delete i[e]}catch{i[e]=void 0}else if(i.dataset)try{delete i.dataset[e]}catch{i.dataset[e]=void 0}else i.removeAttribute("data-".concat(Hi(e)))}var Jn=/\s\s*/,xn=function(){var i=!1;if(Wt){var e=!1,t=function(){},n=Object.defineProperty({},"once",{get:function(){return i=!0,e},set:function(r){e=r}});De.addEventListener("test",t,n),De.removeEventListener("test",t,n)}return i}();function ke(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=t;e.trim().split(Jn).forEach(function(r){if(!xn){var o=i.listeners;o&&o[r]&&o[r][t]&&(s=o[r][t],delete o[r][t],Object.keys(o[r]).length===0&&delete o[r],Object.keys(o).length===0&&delete i.listeners)}i.removeEventListener(r,s,n)})}function we(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=t;e.trim().split(Jn).forEach(function(r){if(n.once&&!xn){var o=i.listeners,a=o===void 0?{}:o;s=function(){delete a[r][t],i.removeEventListener(r,s,n);for(var l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];t.apply(i,u)},a[r]||(a[r]={}),a[r][t]&&i.removeEventListener(r,a[r][t],n),a[r][t]=s,i.listeners=a}i.addEventListener(r,s,n)})}function ht(i,e,t){var n;return he(Event)&&he(CustomEvent)?n=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!0,!0,t)),i.dispatchEvent(n)}function $n(i){var e=i.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Zt=De.location,co=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function hn(i){var e=i.match(co);return e!==null&&(e[1]!==Zt.protocol||e[2]!==Zt.hostname||e[3]!==Zt.port)}function fn(i){var e="timestamp=".concat(new Date().getTime());return i+(i.indexOf("?")===-1?"?":"&")+e}function Et(i){var e=i.rotate,t=i.scaleX,n=i.scaleY,s=i.translateX,r=i.translateY,o=[];z(s)&&s!==0&&o.push("translateX(".concat(s,"px)")),z(r)&&r!==0&&o.push("translateY(".concat(r,"px)")),z(e)&&e!==0&&o.push("rotate(".concat(e,"deg)")),z(t)&&t!==1&&o.push("scaleX(".concat(t,")")),z(n)&&n!==1&&o.push("scaleY(".concat(n,")"));var a=o.length?o.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function lo(i){var e=Xn({},i),t=0;return se(i,function(n,s){delete e[s],se(e,function(r){var o=Math.abs(n.startX-r.startX),a=Math.abs(n.startY-r.startY),c=Math.abs(n.endX-r.endX),l=Math.abs(n.endY-r.endY),u=Math.sqrt(o*o+a*a),h=Math.sqrt(c*c+l*l),f=(h-u)/u;Math.abs(f)>Math.abs(t)&&(t=f)})}),t}function Tt(i,e){var t=i.pageX,n=i.pageY,s={endX:t,endY:n};return e?s:Xn({startX:t,startY:n},s)}function uo(i){var e=0,t=0,n=0;return se(i,function(s){var r=s.startX,o=s.startY;e+=r,t+=o,n+=1}),e/=n,t/=n,{pageX:e,pageY:t}}function ze(i){var e=i.aspectRatio,t=i.height,n=i.width,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",r=un(n),o=un(t);if(r&&o){var a=t*e;s==="contain"&&a>n||s==="cover"&&a<n?t=n/e:n=t*e}else r?t=n/e:o&&(n=t*e);return{width:n,height:t}}function ho(i){var e=i.width,t=i.height,n=i.degree;if(n=Math.abs(n)%180,n===90)return{width:t,height:e};var s=n%90*Math.PI/180,r=Math.sin(s),o=Math.cos(s),a=e*o+t*r,c=e*r+t*o;return n>90?{width:c,height:a}:{width:a,height:c}}function fo(i,e,t,n){var s=e.aspectRatio,r=e.naturalWidth,o=e.naturalHeight,a=e.rotate,c=a===void 0?0:a,l=e.scaleX,u=l===void 0?1:l,h=e.scaleY,f=h===void 0?1:h,b=t.aspectRatio,_=t.naturalWidth,m=t.naturalHeight,w=n.fillColor,E=w===void 0?"transparent":w,R=n.imageSmoothingEnabled,k=R===void 0?!0:R,P=n.imageSmoothingQuality,L=P===void 0?"low":P,y=n.maxWidth,C=y===void 0?1/0:y,v=n.maxHeight,S=v===void 0?1/0:v,N=n.minWidth,W=N===void 0?0:N,j=n.minHeight,$=j===void 0?0:j,Z=document.createElement("canvas"),V=Z.getContext("2d"),H=ze({aspectRatio:b,width:C,height:S}),F=ze({aspectRatio:b,width:W,height:$},"cover"),re=Math.min(H.width,Math.max(F.width,_)),ae=Math.min(H.height,Math.max(F.height,m)),ue=ze({aspectRatio:s,width:C,height:S}),le=ze({aspectRatio:s,width:W,height:$},"cover"),ve=Math.min(ue.width,Math.max(le.width,r)),Me=Math.min(ue.height,Math.max(le.height,o)),p=[-ve/2,-Me/2,ve,Me];return Z.width=ut(re),Z.height=ut(ae),V.fillStyle=E,V.fillRect(0,0,re,ae),V.save(),V.translate(re/2,ae/2),V.rotate(c*Math.PI/180),V.scale(u,f),V.imageSmoothingEnabled=k,V.imageSmoothingQuality=L,V.drawImage.apply(V,[i].concat(Yn(p.map(function(Qe){return Math.floor(ut(Qe))})))),V.restore(),Z}var er=String.fromCharCode;function mo(i,e,t){var n="";t+=e;for(var s=e;s<t;s+=1)n+=er(i.getUint8(s));return n}var go=/^data:.*,/;function _o(i){var e=i.replace(go,""),t=atob(e),n=new ArrayBuffer(t.length),s=new Uint8Array(n);return se(s,function(r,o){s[o]=t.charCodeAt(o)}),n}function bo(i,e){for(var t=[],n=8192,s=new Uint8Array(i);s.length>0;)t.push(er.apply(null,Zn(s.subarray(0,n)))),s=s.subarray(n);return"data:".concat(e,";base64,").concat(btoa(t.join("")))}function po(i){var e=new DataView(i),t;try{var n,s,r;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var o=e.byteLength,a=2;a+1<o;){if(e.getUint8(a)===255&&e.getUint8(a+1)===225){s=a;break}a+=1}if(s){var c=s+4,l=s+10;if(mo(e,c,4)==="Exif"){var u=e.getUint16(l);if(n=u===18761,(n||u===19789)&&e.getUint16(l+2,n)===42){var h=e.getUint32(l+4,n);h>=8&&(r=l+h)}}}if(r){var f=e.getUint16(r,n),b,_;for(_=0;_<f;_+=1)if(b=r+_*12+2,e.getUint16(b,n)===274){b+=8,t=e.getUint16(b,n),e.setUint16(b,1,n);break}}}catch{t=1}return t}function wo(i){var e=0,t=1,n=1;switch(i){case 2:t=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,t=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:t,scaleY:n}}var vo={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,n=this.container,s=this.cropper,r=Number(t.minContainerWidth),o=Number(t.minContainerHeight);ce(s,fe),Ee(e,fe);var a={width:Math.max(n.offsetWidth,r>=0?r:Kn),height:Math.max(n.offsetHeight,o>=0?o:Qn)};this.containerData=a,Ne(s,{width:a.width,height:a.height}),ce(e,fe),Ee(s,fe)},initCanvas:function(){var e=this.containerData,t=this.imageData,n=this.options.viewMode,s=Math.abs(t.rotate)%180===90,r=s?t.naturalHeight:t.naturalWidth,o=s?t.naturalWidth:t.naturalHeight,a=r/o,c=e.width,l=e.height;e.height*a>e.width?n===3?c=e.height*a:l=e.width/a:n===3?l=e.width/a:c=e.height*a;var u={aspectRatio:a,naturalWidth:r,naturalHeight:o,width:c,height:l};this.canvasData=u,this.limited=n===1||n===2,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(e.width-u.width)/2,u.top=(e.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=x({},u)},limitCanvas:function(e,t){var n=this.options,s=this.containerData,r=this.canvasData,o=this.cropBoxData,a=n.viewMode,c=r.aspectRatio,l=this.cropped&&o;if(e){var u=Number(n.minCanvasWidth)||0,h=Number(n.minCanvasHeight)||0;a>1?(u=Math.max(u,s.width),h=Math.max(h,s.height),a===3&&(h*c>u?u=h*c:h=u/c)):a>0&&(u?u=Math.max(u,l?o.width:0):h?h=Math.max(h,l?o.height:0):l&&(u=o.width,h=o.height,h*c>u?u=h*c:h=u/c));var f=ze({aspectRatio:c,width:u,height:h});u=f.width,h=f.height,r.minWidth=u,r.minHeight=h,r.maxWidth=1/0,r.maxHeight=1/0}if(t)if(a>(l?0:1)){var b=s.width-r.width,_=s.height-r.height;r.minLeft=Math.min(0,b),r.minTop=Math.min(0,_),r.maxLeft=Math.max(0,b),r.maxTop=Math.max(0,_),l&&this.limited&&(r.minLeft=Math.min(o.left,o.left+(o.width-r.width)),r.minTop=Math.min(o.top,o.top+(o.height-r.height)),r.maxLeft=o.left,r.maxTop=o.top,a===2&&(r.width>=s.width&&(r.minLeft=Math.min(0,b),r.maxLeft=Math.max(0,b)),r.height>=s.height&&(r.minTop=Math.min(0,_),r.maxTop=Math.max(0,_))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=s.width,r.maxTop=s.height},renderCanvas:function(e,t){var n=this.canvasData,s=this.imageData;if(t){var r=ho({width:s.naturalWidth*Math.abs(s.scaleX||1),height:s.naturalHeight*Math.abs(s.scaleY||1),degree:s.rotate||0}),o=r.width,a=r.height,c=n.width*(o/n.naturalWidth),l=n.height*(a/n.naturalHeight);n.left-=(c-n.width)/2,n.top-=(l-n.height)/2,n.width=c,n.height=l,n.aspectRatio=o/a,n.naturalWidth=o,n.naturalHeight=a,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,Ne(this.canvas,x({width:n.width,height:n.height},Et({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,n=this.imageData,s=n.naturalWidth*(t.width/t.naturalWidth),r=n.naturalHeight*(t.height/t.naturalHeight);x(n,{width:s,height:r,left:(t.width-s)/2,top:(t.height-r)/2}),Ne(this.image,x({width:n.width,height:n.height},Et(x({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,s=Number(e.autoCropArea)||.8,r={width:t.width,height:t.height};n&&(t.height*n>t.width?r.height=r.width/n:r.width=r.height*n),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*s),r.height=Math.max(r.minHeight,r.height*s),r.left=t.left+(t.width-r.width)/2,r.top=t.top+(t.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=x({},r)},limitCropBox:function(e,t){var n=this.options,s=this.containerData,r=this.canvasData,o=this.cropBoxData,a=this.limited,c=n.aspectRatio;if(e){var l=Number(n.minCropBoxWidth)||0,u=Number(n.minCropBoxHeight)||0,h=a?Math.min(s.width,r.width,r.width+r.left,s.width-r.left):s.width,f=a?Math.min(s.height,r.height,r.height+r.top,s.height-r.top):s.height;l=Math.min(l,s.width),u=Math.min(u,s.height),c&&(l&&u?u*c>l?u=l/c:l=u*c:l?u=l/c:u&&(l=u*c),f*c>h?f=h/c:h=f*c),o.minWidth=Math.min(l,h),o.minHeight=Math.min(u,f),o.maxWidth=h,o.maxHeight=f}t&&(a?(o.minLeft=Math.max(0,r.left),o.minTop=Math.max(0,r.top),o.maxLeft=Math.min(s.width,r.left+r.width)-o.width,o.maxTop=Math.min(s.height,r.top+r.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=s.width-o.width,o.maxTop=s.height-o.height))},renderCropBox:function(){var e=this.options,t=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&Dt(this.face,St,n.width>=t.width&&n.height>=t.height?Vn:Wi),Ne(this.cropBox,x({width:n.width,height:n.height},Et({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ht(this.element,oi,this.getData())}},yo={initPreview:function(){var e=this.element,t=this.crossOrigin,n=this.options.preview,s=t?this.crossOriginUrl:this.url,r=e.alt||"The image to preview",o=document.createElement("img");if(t&&(o.crossOrigin=t),o.src=s,o.alt=r,this.viewBox.appendChild(o),this.viewBoxImage=o,!!n){var a=n;typeof n=="string"?a=e.ownerDocument.querySelectorAll(n):n.querySelector&&(a=[n]),this.previews=a,se(a,function(c){var l=document.createElement("img");Dt(c,Ct,{width:c.offsetWidth,height:c.offsetHeight,html:c.innerHTML}),t&&(l.crossOrigin=t),l.src=s,l.alt=r,l.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',c.innerHTML="",c.appendChild(l)})}},resetPreview:function(){se(this.previews,function(e){var t=ui(e,Ct);Ne(e,{width:t.width,height:t.height}),e.innerHTML=t.html,ao(e,Ct)})},preview:function(){var e=this.imageData,t=this.canvasData,n=this.cropBoxData,s=n.width,r=n.height,o=e.width,a=e.height,c=n.left-t.left-e.left,l=n.top-t.top-e.top;!this.cropped||this.disabled||(Ne(this.viewBoxImage,x({width:o,height:a},Et(x({translateX:-c,translateY:-l},e)))),se(this.previews,function(u){var h=ui(u,Ct),f=h.width,b=h.height,_=f,m=b,w=1;s&&(w=f/s,m=r*w),r&&m>b&&(w=b/r,_=s*w,m=b),Ne(u,{width:_,height:m}),Ne(u.getElementsByTagName("img")[0],x({width:o*w,height:a*w},Et(x({translateX:-c*w,translateY:-l*w},e))))}))}},ko={bind:function(){var e=this.element,t=this.options,n=this.cropper;he(t.cropstart)&&we(e,ci,t.cropstart),he(t.cropmove)&&we(e,ai,t.cropmove),he(t.cropend)&&we(e,si,t.cropend),he(t.crop)&&we(e,oi,t.crop),he(t.zoom)&&we(e,li,t.zoom),we(n,tn,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&we(n,an,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&we(n,en,this.onDblclick=this.dblclick.bind(this)),we(e.ownerDocument,nn,this.onCropMove=this.cropMove.bind(this)),we(e.ownerDocument,rn,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&we(window,sn,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,n=this.cropper;he(t.cropstart)&&ke(e,ci,t.cropstart),he(t.cropmove)&&ke(e,ai,t.cropmove),he(t.cropend)&&ke(e,si,t.cropend),he(t.crop)&&ke(e,oi,t.crop),he(t.zoom)&&ke(e,li,t.zoom),ke(n,tn,this.onCropStart),t.zoomable&&t.zoomOnWheel&&ke(n,an,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&ke(n,en,this.onDblclick),ke(e.ownerDocument,nn,this.onCropMove),ke(e.ownerDocument,rn,this.onCropEnd),t.responsive&&ke(window,sn,this.onResize)}},Eo={resize:function(){if(!this.disabled){var e=this.options,t=this.container,n=this.containerData,s=t.offsetWidth/n.width,r=t.offsetHeight/n.height,o=Math.abs(s-1)>Math.abs(r-1)?s:r;if(o!==1){var a,c;e.restore&&(a=this.getCanvasData(),c=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(se(a,function(l,u){a[u]=l*o})),this.setCropBoxData(se(c,function(l,u){c[u]=l*o})))}}},dblclick:function(){this.disabled||this.options.dragMode===Fn||this.setDragMode(oo(this.dragBox,ni)?qn:ji)},wheel:function(e){var t=this,n=Number(this.options.wheelZoomRatio)||.1,s=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),e.deltaY?s=e.deltaY>0?1:-1:e.wheelDelta?s=-e.wheelDelta/120:e.detail&&(s=e.detail>0?1:-1),this.zoom(-s*n,e)))},cropStart:function(e){var t=e.buttons,n=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(z(t)&&t!==1||z(n)&&n!==0||e.ctrlKey))){var s=this.options,r=this.pointers,o;e.changedTouches?se(e.changedTouches,function(a){r[a.identifier]=Tt(a)}):r[e.pointerId||0]=Tt(e),Object.keys(r).length>1&&s.zoomable&&s.zoomOnTouch?o=Gn:o=ui(e.target,St),Qr.test(o)&&ht(this.element,ci,{originalEvent:e,action:o})!==!1&&(e.preventDefault(),this.action=o,this.cropping=!1,o===Un&&(this.cropping=!0,ce(this.dragBox,Nt)))}},cropMove:function(e){var t=this.action;if(!(this.disabled||!t)){var n=this.pointers;e.preventDefault(),ht(this.element,ai,{originalEvent:e,action:t})!==!1&&(e.changedTouches?se(e.changedTouches,function(s){x(n[s.identifier]||{},Tt(s,!0))}):x(n[e.pointerId||0]||{},Tt(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,n=this.pointers;e.changedTouches?se(e.changedTouches,function(s){delete n[s.identifier]}):delete n[e.pointerId||0],t&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,lt(this.dragBox,Nt,this.cropped&&this.options.modal)),ht(this.element,si,{originalEvent:e,action:t}))}}},So={change:function(e){var t=this.options,n=this.canvasData,s=this.containerData,r=this.cropBoxData,o=this.pointers,a=this.action,c=t.aspectRatio,l=r.left,u=r.top,h=r.width,f=r.height,b=l+h,_=u+f,m=0,w=0,E=s.width,R=s.height,k=!0,P;!c&&e.shiftKey&&(c=h&&f?h/f:1),this.limited&&(m=r.minLeft,w=r.minTop,E=m+Math.min(s.width,n.width,n.left+n.width),R=w+Math.min(s.height,n.height,n.top+n.height));var L=o[Object.keys(o)[0]],y={x:L.endX-L.startX,y:L.endY-L.startY},C=function(S){switch(S){case je:b+y.x>E&&(y.x=E-b);break;case He:l+y.x<m&&(y.x=m-l);break;case Ae:u+y.y<w&&(y.y=w-u);break;case at:_+y.y>R&&(y.y=R-_);break}};switch(a){case Wi:l+=y.x,u+=y.y;break;case je:if(y.x>=0&&(b>=E||c&&(u<=w||_>=R))){k=!1;break}C(je),h+=y.x,h<0&&(a=He,h=-h,l-=h),c&&(f=h/c,u+=(r.height-f)/2);break;case Ae:if(y.y<=0&&(u<=w||c&&(l<=m||b>=E))){k=!1;break}C(Ae),f-=y.y,u+=y.y,f<0&&(a=at,f=-f,u-=f),c&&(h=f*c,l+=(r.width-h)/2);break;case He:if(y.x<=0&&(l<=m||c&&(u<=w||_>=R))){k=!1;break}C(He),h-=y.x,l+=y.x,h<0&&(a=je,h=-h,l-=h),c&&(f=h/c,u+=(r.height-f)/2);break;case at:if(y.y>=0&&(_>=R||c&&(l<=m||b>=E))){k=!1;break}C(at),f+=y.y,f<0&&(a=Ae,f=-f,u-=f),c&&(h=f*c,l+=(r.width-h)/2);break;case wt:if(c){if(y.y<=0&&(u<=w||b>=E)){k=!1;break}C(Ae),f-=y.y,u+=y.y,h=f*c}else C(Ae),C(je),y.x>=0?b<E?h+=y.x:y.y<=0&&u<=w&&(k=!1):h+=y.x,y.y<=0?u>w&&(f-=y.y,u+=y.y):(f-=y.y,u+=y.y);h<0&&f<0?(a=kt,f=-f,h=-h,u-=f,l-=h):h<0?(a=vt,h=-h,l-=h):f<0&&(a=yt,f=-f,u-=f);break;case vt:if(c){if(y.y<=0&&(u<=w||l<=m)){k=!1;break}C(Ae),f-=y.y,u+=y.y,h=f*c,l+=r.width-h}else C(Ae),C(He),y.x<=0?l>m?(h-=y.x,l+=y.x):y.y<=0&&u<=w&&(k=!1):(h-=y.x,l+=y.x),y.y<=0?u>w&&(f-=y.y,u+=y.y):(f-=y.y,u+=y.y);h<0&&f<0?(a=yt,f=-f,h=-h,u-=f,l-=h):h<0?(a=wt,h=-h,l-=h):f<0&&(a=kt,f=-f,u-=f);break;case kt:if(c){if(y.x<=0&&(l<=m||_>=R)){k=!1;break}C(He),h-=y.x,l+=y.x,f=h/c}else C(at),C(He),y.x<=0?l>m?(h-=y.x,l+=y.x):y.y>=0&&_>=R&&(k=!1):(h-=y.x,l+=y.x),y.y>=0?_<R&&(f+=y.y):f+=y.y;h<0&&f<0?(a=wt,f=-f,h=-h,u-=f,l-=h):h<0?(a=yt,h=-h,l-=h):f<0&&(a=vt,f=-f,u-=f);break;case yt:if(c){if(y.x>=0&&(b>=E||_>=R)){k=!1;break}C(je),h+=y.x,f=h/c}else C(at),C(je),y.x>=0?b<E?h+=y.x:y.y>=0&&_>=R&&(k=!1):h+=y.x,y.y>=0?_<R&&(f+=y.y):f+=y.y;h<0&&f<0?(a=vt,f=-f,h=-h,u-=f,l-=h):h<0?(a=kt,h=-h,l-=h):f<0&&(a=wt,f=-f,u-=f);break;case Vn:this.move(y.x,y.y),k=!1;break;case Gn:this.zoom(lo(o),e),k=!1;break;case Un:if(!y.x||!y.y){k=!1;break}P=$n(this.cropper),l=L.startX-P.left,u=L.startY-P.top,h=r.minWidth,f=r.minHeight,y.x>0?a=y.y>0?yt:wt:y.x<0&&(l-=h,a=y.y>0?kt:vt),y.y<0&&(u-=f),this.cropped||(Ee(this.cropBox,fe),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}k&&(r.width=h,r.height=f,r.left=l,r.top=u,this.action=a,this.renderCropBox()),se(o,function(v){v.startX=v.endX,v.startY=v.endY})}},Do={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&ce(this.dragBox,Nt),Ee(this.cropBox,fe),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=x({},this.initialImageData),this.canvasData=x({},this.initialCanvasData),this.cropBoxData=x({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(x(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Ee(this.dragBox,Nt),ce(this.cropBox,fe)),this},replace:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,se(this.previews,function(n){n.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Ee(this.cropper,xi)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,ce(this.cropper,xi)),this},destroy:function(){var e=this.element;return e[J]?(e[J]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.canvasData,s=n.left,r=n.top;return this.moveTo(Qt(e)?e:s+Number(e),Qt(t)?t:r+Number(t))},moveTo:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.canvasData,s=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(z(e)&&(n.left=e,s=!0),z(t)&&(n.top=t,s=!0),s&&this.renderCanvas(!0)),this},zoom:function(e,t){var n=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(n.width*e/n.naturalWidth,null,t)},zoomTo:function(e,t,n){var s=this.options,r=this.canvasData,o=r.width,a=r.height,c=r.naturalWidth,l=r.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&s.zoomable){var u=c*e,h=l*e;if(ht(this.element,li,{ratio:e,oldRatio:o/c,originalEvent:n})===!1)return this;if(n){var f=this.pointers,b=$n(this.cropper),_=f&&Object.keys(f).length?uo(f):{pageX:n.pageX,pageY:n.pageY};r.left-=(u-o)*((_.pageX-b.left-r.left)/o),r.top-=(h-a)*((_.pageY-b.top-r.top)/a)}else ct(t)&&z(t.x)&&z(t.y)?(r.left-=(u-o)*((t.x-r.left)/o),r.top-=(h-a)*((t.y-r.top)/a)):(r.left-=(u-o)/2,r.top-=(h-a)/2);r.width=u,r.height=h,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),z(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,z(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(z(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.imageData,s=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(z(e)&&(n.scaleX=e,s=!0),z(t)&&(n.scaleY=t,s=!0),s&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.options,n=this.imageData,s=this.canvasData,r=this.cropBoxData,o;if(this.ready&&this.cropped){o={x:r.left-s.left,y:r.top-s.top,width:r.width,height:r.height};var a=n.width/n.naturalWidth;if(se(o,function(u,h){o[h]=u/a}),e){var c=Math.round(o.y+o.height),l=Math.round(o.x+o.width);o.x=Math.round(o.x),o.y=Math.round(o.y),o.width=l-o.x,o.height=c-o.y}}else o={x:0,y:0,width:0,height:0};return t.rotatable&&(o.rotate=n.rotate||0),t.scalable&&(o.scaleX=n.scaleX||1,o.scaleY=n.scaleY||1),o},setData:function(e){var t=this.options,n=this.imageData,s=this.canvasData,r={};if(this.ready&&!this.disabled&&ct(e)){var o=!1;t.rotatable&&z(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,o=!0),t.scalable&&(z(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,o=!0),z(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var a=n.width/n.naturalWidth;z(e.x)&&(r.left=e.x*a+s.left),z(e.y)&&(r.top=e.y*a+s.top),z(e.width)&&(r.width=e.width*a),z(e.height)&&(r.height=e.height*a),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?x({},this.containerData):{}},getImageData:function(){return this.sized?x({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&se(["left","top","width","height","naturalWidth","naturalHeight"],function(n){t[n]=e[n]}),t},setCanvasData:function(e){var t=this.canvasData,n=t.aspectRatio;return this.ready&&!this.disabled&&ct(e)&&(z(e.left)&&(t.left=e.left),z(e.top)&&(t.top=e.top),z(e.width)?(t.width=e.width,t.height=e.width/n):z(e.height)&&(t.height=e.height,t.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,t;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(e){var t=this.cropBoxData,n=this.options.aspectRatio,s,r;return this.ready&&this.cropped&&!this.disabled&&ct(e)&&(z(e.left)&&(t.left=e.left),z(e.top)&&(t.top=e.top),z(e.width)&&e.width!==t.width&&(s=!0,t.width=e.width),z(e.height)&&e.height!==t.height&&(r=!0,t.height=e.height),n&&(s?t.height=t.width/n:r&&(t.width=t.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,n=fo(this.image,this.imageData,t,e);if(!this.cropped)return n;var s=this.getData(),r=s.x,o=s.y,a=s.width,c=s.height,l=n.width/Math.floor(t.naturalWidth);l!==1&&(r*=l,o*=l,a*=l,c*=l);var u=a/c,h=ze({aspectRatio:u,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),f=ze({aspectRatio:u,width:e.minWidth||0,height:e.minHeight||0},"cover"),b=ze({aspectRatio:u,width:e.width||(l!==1?n.width:a),height:e.height||(l!==1?n.height:c)}),_=b.width,m=b.height;_=Math.min(h.width,Math.max(f.width,_)),m=Math.min(h.height,Math.max(f.height,m));var w=document.createElement("canvas"),E=w.getContext("2d");w.width=ut(_),w.height=ut(m),E.fillStyle=e.fillColor||"transparent",E.fillRect(0,0,_,m);var R=e.imageSmoothingEnabled,k=R===void 0?!0:R,P=e.imageSmoothingQuality;E.imageSmoothingEnabled=k,P&&(E.imageSmoothingQuality=P);var L=n.width,y=n.height,C=r,v=o,S,N,W,j,$,Z;C<=-a||C>L?(C=0,S=0,W=0,$=0):C<=0?(W=-C,C=0,S=Math.min(L,a+C),$=S):C<=L&&(W=0,S=Math.min(a,L-C),$=S),S<=0||v<=-c||v>y?(v=0,N=0,j=0,Z=0):v<=0?(j=-v,v=0,N=Math.min(y,c+v),Z=N):v<=y&&(j=0,N=Math.min(c,y-v),Z=N);var V=[C,v,S,N];if($>0&&Z>0){var H=_/a;V.push(W*H,j*H,$*H,Z*H)}return E.drawImage.apply(E,[n].concat(Yn(V.map(function(F){return Math.floor(ut(F))})))),w},setAspectRatio:function(e){var t=this.options;return!this.disabled&&!Qt(e)&&(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,n=this.dragBox,s=this.face;if(this.ready&&!this.disabled){var r=e===ji,o=t.movable&&e===qn;e=r||o?e:Fn,t.dragMode=e,Dt(n,St,e),lt(n,ni,r),lt(n,ri,o),t.cropBoxMovable||(Dt(s,St,e),lt(s,ni,r),lt(s,ri,o))}return this}},Mo=De.Cropper,hi=function(){function i(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Wr(this,i),!e||!xr.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=x({},ln,ct(t)&&t),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return jr(i,[{key:"init",value:function(){var t=this.element,n=t.tagName.toLowerCase(),s;if(!t[J]){if(t[J]=this,n==="img"){if(this.isImg=!0,s=t.getAttribute("src")||"",this.originalUrl=s,!s)return;s=t.src}else n==="canvas"&&window.HTMLCanvasElement&&(s=t.toDataURL());this.load(s)}}},{key:"load",value:function(t){var n=this;if(t){this.url=t,this.imageData={};var s=this.element,r=this.options;if(!r.rotatable&&!r.scalable&&(r.checkOrientation=!1),!r.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Zr.test(t)){Jr.test(t)?this.read(_o(t)):this.clone();return}var o=new XMLHttpRequest,a=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=a,o.onerror=a,o.ontimeout=a,o.onprogress=function(){o.getResponseHeader("content-type")!==cn&&o.abort()},o.onload=function(){n.read(o.response)},o.onloadend=function(){n.reloading=!1,n.xhr=null},r.checkCrossOrigin&&hn(t)&&s.crossOrigin&&(t=fn(t)),o.open("GET",t,!0),o.responseType="arraybuffer",o.withCredentials=s.crossOrigin==="use-credentials",o.send()}}},{key:"read",value:function(t){var n=this.options,s=this.imageData,r=po(t),o=0,a=1,c=1;if(r>1){this.url=bo(t,cn);var l=wo(r);o=l.rotate,a=l.scaleX,c=l.scaleY}n.rotatable&&(s.rotate=o),n.scalable&&(s.scaleX=a,s.scaleY=c),this.clone()}},{key:"clone",value:function(){var t=this.element,n=this.url,s=t.crossOrigin,r=n;this.options.checkCrossOrigin&&hn(n)&&(s||(s="anonymous"),r=fn(n)),this.crossOrigin=s,this.crossOriginUrl=r;var o=document.createElement("img");s&&(o.crossOrigin=s),o.src=r||n,o.alt=t.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),ce(o,$i),t.parentNode.insertBefore(o,t.nextSibling)}},{key:"start",value:function(){var t=this,n=this.image;n.onload=null,n.onerror=null,this.sizing=!0;var s=De.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(De.navigator.userAgent),r=function(l,u){x(t.imageData,{naturalWidth:l,naturalHeight:u,aspectRatio:l/u}),t.initialImageData=x({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(n.naturalWidth&&!s){r(n.naturalWidth,n.naturalHeight);return}var o=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){r(o.width,o.height),s||a.removeChild(o)},o.src=n.src,s||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(o))}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var t=this.element,n=this.options,s=this.image,r=t.parentNode,o=document.createElement("div");o.innerHTML=$r;var a=o.querySelector(".".concat(J,"-container")),c=a.querySelector(".".concat(J,"-canvas")),l=a.querySelector(".".concat(J,"-drag-box")),u=a.querySelector(".".concat(J,"-crop-box")),h=u.querySelector(".".concat(J,"-face"));this.container=r,this.cropper=a,this.canvas=c,this.dragBox=l,this.cropBox=u,this.viewBox=a.querySelector(".".concat(J,"-view-box")),this.face=h,c.appendChild(s),ce(t,fe),r.insertBefore(a,t.nextSibling),this.isImg||Ee(s,$i),this.initPreview(),this.bind(),n.initialAspectRatio=Math.max(0,n.initialAspectRatio)||NaN,n.aspectRatio=Math.max(0,n.aspectRatio)||NaN,n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0,ce(u,fe),n.guides||ce(u.getElementsByClassName("".concat(J,"-dashed")),fe),n.center||ce(u.getElementsByClassName("".concat(J,"-center")),fe),n.background&&ce(a,"".concat(J,"-bg")),n.highlight||ce(h,Gr),n.cropBoxMovable&&(ce(h,ri),Dt(h,St,Wi)),n.cropBoxResizable||(ce(u.getElementsByClassName("".concat(J,"-line")),fe),ce(u.getElementsByClassName("".concat(J,"-point")),fe)),this.render(),this.ready=!0,this.setDragMode(n.dragMode),n.autoCrop&&this.crop(),this.setData(n.data),he(n.ready)&&we(t,on,n.ready,{once:!0}),ht(t,on)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),Ee(this.element,fe))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Mo,i}},{key:"setDefaults",value:function(t){x(ln,ct(t)&&t)}}]),i}();x(hi.prototype,vo,yo,ko,Eo,So,Do);const Io="Users/peterallen/Projects/gradio/js/image/interactive/Cropper.svelte";function fi(i){let e,t;const n={c:function(){e=ee("img"),de(e.src,t=i[0])||I(e,"src",t),I(e,"alt",""),te(e,Io,32,0,600)},l:function(r){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(r,o){A(r,e,o),i[4](e)},p:function(r,[o]){o&1&&!de(e.src,t=r[0])&&I(e,"src",t)},i:Oe,o:Oe,d:function(r){r&&B(e),i[4](null)}};return O("SvelteRegisterBlock",{block:n,id:fi.name,type:"component",source:"",ctx:i}),n}function Ro(i,e,t){let{$$slots:n={},$$scope:s}=e;qe("Cropper",n,[]);let{image:r}=e,o;const a=Se();let c;function l(){c.destroy()}function u(){c&&l(),c=new hi(o,{autoCropArea:1,cropend(){const b=c.getCroppedCanvas().toDataURL();a("crop",b)}}),a("crop",r)}i.$$.on_mount.push(function(){r===void 0&&!("image"in e||i.$$.bound[i.$$.props.image])&&console.warn("<Cropper> was created without expected prop 'image'")});const h=["image"];Object.keys(e).forEach(b=>{!~h.indexOf(b)&&b.slice(0,2)!=="$$"&&b!=="slot"&&console.warn(`<Cropper> was created with unknown prop '${b}'`)});function f(b){Q[b?"unshift":"push"](()=>{o=b,t(1,o)})}return i.$$set=b=>{"image"in b&&t(0,r=b.image)},i.$capture_state=()=>({Cropper:hi,onMount:Xe,createEventDispatcher:Se,image:r,el:o,dispatch:a,cropper:c,destroy:l,create:u}),i.$inject_state=b=>{"image"in b&&t(0,r=b.image),"el"in b&&t(1,o=b.el),"cropper"in b&&(c=b.cropper)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),[r,o,l,u,f]}class Xi extends Ve{constructor(e){super(e),Ge(this,e,Ro,fi,Ce,{image:0,destroy:2,create:3}),O("SvelteRegisterComponent",{component:this,tagName:"Cropper_1",options:e,id:fi.name})}get image(){return this.$$.ctx[0]}set image(e){this.$$set({image:e}),K()}get destroy(){return this.$$.ctx[2]}set destroy(e){throw new Error("<Cropper>: Cannot set read-only property 'destroy'")}get create(){return this.$$.ctx[3]}set create(e){throw new Error("<Cropper>: Cannot set read-only property 'create'")}}class dn{constructor(e,t){this.x=e,this.y=t}}class mn extends dn{update(e){this.x=e.x,this.y=e.y}moveByAngle(e,t){const n=e+Math.PI/2;this.x=this.x+Math.sin(n)*t,this.y=this.y-Math.cos(n)*t}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new dn(this.x-e.x,this.y-e.y)}getDistanceTo(e){const t=this.getDifferenceTo(e);return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}getAngleTo(e){const t=this.getDifferenceTo(e);return Math.atan2(t.y,t.x)}toObject(){return{x:this.x,y:this.y}}}const Oo=30;class gn{constructor({radius:e=Oo,enabled:t=!0,initialPoint:n={x:0,y:0}}={}){this.radius=e,this._isEnabled=t,this.pointer=new mn(n.x,n.y),this.brush=new mn(n.x,n.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,{both:t=!1}={}){return this._hasMoved=!1,this.pointer.equalsTo(e)&&!t?!1:(this.pointer.update(e),t?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}var tr=function(){if(typeof Map<"u")return Map;function i(e,t){var n=-1;return e.some(function(s,r){return s[0]===t?(n=r,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var n=i(this.__entries__,t),s=this.__entries__[n];return s&&s[1]},e.prototype.set=function(t,n){var s=i(this.__entries__,t);~s?this.__entries__[s][1]=n:this.__entries__.push([t,n])},e.prototype.delete=function(t){var n=this.__entries__,s=i(n,t);~s&&n.splice(s,1)},e.prototype.has=function(t){return!!~i(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,n){n===void 0&&(n=null);for(var s=0,r=this.__entries__;s<r.length;s++){var o=r[s];t.call(n,o[1],o[0])}},e}()}(),di=typeof window<"u"&&typeof document<"u"&&window.document===document,zt=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Co=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(zt):function(i){return setTimeout(function(){return i(Date.now())},1e3/60)}}(),To=2;function Po(i,e){var t=!1,n=!1,s=0;function r(){t&&(t=!1,i()),n&&a()}function o(){Co(r)}function a(){var c=Date.now();if(t){if(c-s<To)return;n=!0}else t=!0,n=!1,setTimeout(o,e);s=c}return a}var Ao=20,Bo=["top","right","bottom","left","width","height","size","weight"],No=typeof MutationObserver<"u",zo=function(){function i(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Po(this.refresh.bind(this),Ao)}return i.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},i.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},i.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},i.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},i.prototype.connect_=function(){!di||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),No?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},i.prototype.disconnect_=function(){!di||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},i.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=t===void 0?"":t,s=Bo.some(function(r){return!!~n.indexOf(r)});s&&this.refresh()},i.getInstance=function(){return this.instance_||(this.instance_=new i),this.instance_},i.instance_=null,i}(),ir=function(i,e){for(var t=0,n=Object.keys(e);t<n.length;t++){var s=n[t];Object.defineProperty(i,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return i},dt=function(i){var e=i&&i.ownerDocument&&i.ownerDocument.defaultView;return e||zt},nr=jt(0,0,0,0);function Lt(i){return parseFloat(i)||0}function _n(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(n,s){var r=i["border-"+s+"-width"];return n+Lt(r)},0)}function Lo(i){for(var e=["top","right","bottom","left"],t={},n=0,s=e;n<s.length;n++){var r=s[n],o=i["padding-"+r];t[r]=Lt(o)}return t}function Wo(i){var e=i.getBBox();return jt(0,0,e.width,e.height)}function jo(i){var e=i.clientWidth,t=i.clientHeight;if(!e&&!t)return nr;var n=dt(i).getComputedStyle(i),s=Lo(n),r=s.left+s.right,o=s.top+s.bottom,a=Lt(n.width),c=Lt(n.height);if(n.boxSizing==="border-box"&&(Math.round(a+r)!==e&&(a-=_n(n,"left","right")+r),Math.round(c+o)!==t&&(c-=_n(n,"top","bottom")+o)),!Xo(i)){var l=Math.round(a+r)-e,u=Math.round(c+o)-t;Math.abs(l)!==1&&(a-=l),Math.abs(u)!==1&&(c-=u)}return jt(s.left,s.top,a,c)}var Ho=function(){return typeof SVGGraphicsElement<"u"?function(i){return i instanceof dt(i).SVGGraphicsElement}:function(i){return i instanceof dt(i).SVGElement&&typeof i.getBBox=="function"}}();function Xo(i){return i===dt(i).document.documentElement}function Yo(i){return di?Ho(i)?Wo(i):jo(i):nr}function Uo(i){var e=i.x,t=i.y,n=i.width,s=i.height,r=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(r.prototype);return ir(o,{x:e,y:t,width:n,height:s,top:t,right:e+n,bottom:s+t,left:e}),o}function jt(i,e,t,n){return{x:i,y:e,width:t,height:n}}var Vo=function(){function i(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=jt(0,0,0,0),this.target=e}return i.prototype.isActive=function(){var e=Yo(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},i.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},i}(),Go=function(){function i(e,t){var n=Uo(t);ir(this,{target:e,contentRect:n})}return i}(),qo=function(){function i(e,t,n){if(this.activeObservations_=[],this.observations_=new tr,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return i.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof dt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Vo(e)),this.controller_.addObserver(this),this.controller_.refresh())}},i.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof dt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},i.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},i.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},i.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(n){return new Go(n.target,n.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},i.prototype.clearActive=function(){this.activeObservations_.splice(0)},i.prototype.hasActive=function(){return this.activeObservations_.length>0},i}(),rr=typeof WeakMap<"u"?new WeakMap:new tr,or=function(){function i(e){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=zo.getInstance(),n=new qo(e,t,this);rr.set(this,n)}return i}();["observe","unobserve","disconnect"].forEach(function(i){or.prototype[i]=function(){var e;return(e=rr.get(this))[i].apply(e,arguments)}});var bn=function(){return typeof zt.ResizeObserver<"u"?zt.ResizeObserver:or}();const{Object:Fo}=Bi,Yi="Users/peterallen/Projects/gradio/js/image/interactive/Sketch.svelte";function pn(i,e,t){const n=i.slice();return n[62]=e[t].name,n[63]=e[t].zIndex,n[64]=e[t].opacity,n[65]=e,n[66]=t,n}function mi(i){let e,t,n;const s={c:function(){e=ee("div"),e.textContent="Start drawing",I(e,"class","start-prompt svelte-14l85k0"),te(e,Yi,551,2,11685)},m:function(o,a){A(o,e,a),n=!0},i:function(o){n||(o&&Ni(()=>{n&&(t||(t=qi(e,Jt,{duration:50},!0)),t.run(1))}),n=!0)},o:function(o){o&&(t||(t=qi(e,Jt,{duration:50},!1)),t.run(0)),n=!1},d:function(o){o&&B(e),o&&t&&t.end()}};return O("SvelteRegisterBlock",{block:s,id:mi.name,type:"if",source:"(551:1) {#if line_count === 0}",ctx:i}),s}function gi(i){let e,t=i[62],n,s;const r=()=>i[31](e,t),o=()=>i[31](null,t),a={c:function(){e=ee("canvas"),I(e,"key",i[62]),Fi(e,"z-index",i[63]),I(e,"class","svelte-14l85k0"),q(e,"lr",i[5]),q(e,"tb",!i[5]),Fi(e,"opacity",i[64]),te(e,Yi,556,2,11833)},m:function(l,u){A(l,e,u),r(),n||(s=[oe(e,"mousedown",i[62]==="interface"?i[7]:void 0,!1,!1,!1,!1),oe(e,"mousemove",i[62]==="interface"?i[8]:void 0,!1,!1,!1,!1),oe(e,"mouseup",i[62]==="interface"?i[9]:void 0,!1,!1,!1,!1),oe(e,"mouseout",i[62]==="interface"?i[9]:void 0,!1,!1,!1,!1),oe(e,"blur",i[62]==="interface"?i[9]:void 0,!1,!1,!1,!1),oe(e,"touchstart",i[62]==="interface"?i[7]:void 0,!1,!1,!1,!1),oe(e,"touchmove",i[62]==="interface"?i[8]:void 0,!1,!1,!1,!1),oe(e,"touchend",i[62]==="interface"?i[9]:void 0,!1,!1,!1,!1),oe(e,"touchcancel",i[62]==="interface"?i[9]:void 0,!1,!1,!1,!1),oe(e,"click",Ir(i[30]),!1,!1,!0,!1)],n=!0)},p:function(l,u){i=l,t!==i[62]&&(o(),t=i[62],r()),u[0]&32&&q(e,"lr",i[5]),u[0]&32&&q(e,"tb",!i[5])},d:function(l){l&&B(e),o(),n=!1,kn(s)}};return O("SvelteRegisterBlock",{block:a,id:gi.name,type:"each",source:"(556:1) {#each canvas_types as { name, zIndex, opacity }}",ctx:i}),a}function _i(i){let e,t,n,s=i[4]===0&&mi(i),r=Vi(i[6]),o=[];for(let c=0;c<r.length;c+=1)o[c]=gi(pn(i,r,c));const a={c:function(){e=ee("div"),s&&s.c(),t=ne();for(let l=0;l<o.length;l+=1)o[l].c();I(e,"class","wrap svelte-14l85k0"),Ni(()=>i[33].call(e)),te(e,Yi,544,0,11540)},l:function(l){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(l,u){A(l,e,u),s&&s.m(e,null),Re(e,t);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(e,null);i[32](e),n=vn(e,i[33].bind(e))},p:function(l,u){if(l[4]===0?s?u[0]&16&&D(s,1):(s=mi(l),s.c(),D(s,1),s.m(e,t)):s&&(_e(),M(s,1,1,()=>{s=null}),be()),u[0]&993){r=Vi(l[6]);let h;for(h=0;h<r.length;h+=1){const f=pn(l,r,h);o[h]?o[h].p(f,u):(o[h]=gi(f),o[h].c(),o[h].m(e,null))}for(;h<o.length;h+=1)o[h].d(1);o.length=r.length}},i:function(l){D(s)},o:function(l){M(s)},d:function(l){l&&B(e),s&&s.d(),Mr(o,l),i[32](null),n()}};return O("SvelteRegisterBlock",{block:a,id:_i.name,type:"component",source:"",ctx:i}),a}function wn(i,e){return{x:i.x+(e.x-i.x)/2,y:i.y+(e.y-i.y)/2}}function Ko(i,e,t){let n,{$$slots:s={},$$scope:r}=e;qe("Sketch",s,[]);const o=Se();let{value:a}=e,{value_img:c}=e,{mode:l="sketch"}=e,{brush_color:u="#0b0f19"}=e,{brush_radius:h}=e,{mask_opacity:f=.7}=e,{source:b}=e,{width:_=400}=e,{height:m=200}=e,{container_height:w=200}=e,{shape:E}=e,R,k="#aaa",P=_,L=m,y;const C=[{name:"interface",zIndex:15},{name:"mask",zIndex:13,opacity:f},{name:"drawing",zIndex:11},{name:"temp",zIndex:12}];let v={},S={},N=[],W=[],j=!0,$=!0,Z=!1,V=!1,H=null,F=null,re=null,ae=0;function ue(){if(!E){S.temp.drawImage(c,0,0,_,m);return}let d=c.naturalWidth,T=c.naturalHeight;const g=E[0]/E[1],G=d/T;let ie=0,pe=0;g<G?(d=E[1]*G,T=E[1],ie=(E[0]-d)/2):g>G?(d=E[0],T=E[0]/G,pe=(E[1]-T)/2):(ie=0,pe=0,d=E[0],T=E[1]),S.temp.drawImage(c,ie,pe,d,T)}Xe(async()=>{Object.keys(v).forEach(d=>{t(27,S[d]=v[d].getContext("2d"),S)}),await Ie(),c&&(c.addEventListener("load",d=>{b==="webcam"?(S.temp.save(),S.temp.translate(_,0),S.temp.scale(-1,1),S.temp.drawImage(c,0,0),S.temp.restore()):ue(),S.drawing.drawImage(v.temp,0,0,_,m),ye()}),setTimeout(()=>{b==="webcam"?(S.temp.save(),S.temp.translate(_,0),S.temp.scale(-1,1),S.temp.drawImage(c,0,0),S.temp.restore()):ue(),S.drawing.drawImage(v.temp,0,0,_,m),Le({lines:W.slice()}),ye()},100)),t(29,H=new gn({radius:h*.05,enabled:!0,initialPoint:{x:_/2,y:m/2}})),re=new bn((d,T,...g)=>{tt(d,T)}),re.observe(F),We(),t(25,R=!0),requestAnimationFrame(()=>{le(),requestAnimationFrame(()=>{Pe()})})});function le(){const d=_/2,T=m/2;H.update({x:d,y:T},{both:!0}),H.update({x:d,y:T},{both:!1}),j=!0,$=!0}Gi(()=>{t(25,R=!1),re.unobserve(F)});function ve(d){_t(),c&&(b==="webcam"?(S.temp.save(),S.temp.translate(_,0),S.temp.scale(-1,1),S.temp.drawImage(c,0,0),S.temp.restore()):ue(),(!W||!W.length)&&S.drawing.drawImage(v.temp,0,0,_,m)),Le({lines:d}),t(4,ae=d.length),t(28,W=d),S.drawing.drawImage(v.temp,0,0,_,m),W.length==0&&o("clear")}function Me(){ve([]),ye()}function p(){const d=W.slice(0,-1);ve(d),ye()}let Qe=()=>JSON.stringify({lines:W,width:P,height:L}),Le=({lines:d})=>{d.forEach(T=>{const{points:g,brush_color:G,brush_radius:ie}=T;rt({points:g,brush_color:G,brush_radius:ie,mask:l==="mask"})}),st({brush_color:u,brush_radius:h}),l==="mask"&&ot()},mt=d=>{d.preventDefault(),V=!0;const{x:T,y:g}=it(d);d.touches&&d.touches.length>0&&H.update({x:T,y:g},{both:!0}),nt(T,g),t(4,ae+=1)},Ze=d=>{d.preventDefault();const{x:T,y:g}=it(d);nt(T,g)},gt=d=>{d.preventDefault(),Ze(d),Z=!1,V=!1,st(),l==="mask"&&ot()},Je=0,xe=0,$e=0,et=!1,tt=async()=>{if(E&&F){const g=F?.getBoundingClientRect(),G=E[0]/E[1],ie=g.width/g.height;t(5,et=G<ie)}if(_===Je&&m===xe&&$e===w)return;const d={width:_,height:m},T={height:w,width:w*(d.width/d.height)};await Promise.all([Te(v.interface,d,T),Te(v.drawing,d,T),Te(v.temp,d,T),Te(v.mask,d,T,!1)]),h||t(10,h=20*(d.width/T.width)),We({once:!0}),setTimeout(()=>{xe=m,Je=_,$e=w},10),await Ie(),Pe()},Te=async(d,T,g,G=!0)=>{if(!R)return;await Ie();const ie=window.devicePixelRatio||1;d.width=T.width*(G?ie:1),d.height=T.height*(G?ie:1);const pe=d.getContext("2d");G&&pe.scale(ie,ie),d.style.width=`${g.width}px`,d.style.height=`${g.height}px`},it=d=>{const T=v.interface.getBoundingClientRect();let g=d.clientX,G=d.clientY;return d.changedTouches&&d.changedTouches.length>0&&(g=d.changedTouches[0].clientX,G=d.changedTouches[0].clientY),{x:(g-T.left)/T.width*_,y:(G-T.top)/T.height*m}},nt=(d,T)=>{H.update({x:d,y:T});const g=!H.isEnabled();(V&&!Z||g&&V)&&(Z=!0,N.push(H.brush.toObject())),Z&&(N.push(H.brush.toObject()),rt({points:N,brush_color:u,brush_radius:h,mask:l==="mask"})),j=!0},rt=({points:d,brush_color:T,brush_radius:g,mask:G})=>{if(!d||d.length<2)return;let ie=G?S.mask:S.temp;ie.lineJoin="round",ie.lineCap="round",ie.strokeStyle=T,ie.lineWidth=g;let pe=d[0],Rt=d[1];ie.moveTo(Rt.x,Rt.y),ie.beginPath();for(var Ot=1,kr=d.length;Ot<kr;Ot++){var Ui=wn(pe,Rt);ie.quadraticCurveTo(pe.x,pe.y,Ui.x,Ui.y),pe=d[Ot],Rt=d[Ot+1]}ie.lineTo(pe.x,pe.y),ie.stroke()},ot=()=>{N.length<1||(N.length=0,ye())},st=()=>{N.length<1||(W.push({points:N.slice(),brush_color:u,brush_radius:h}),l!=="mask"&&(N.length=0),S.drawing.drawImage(v.temp,0,0,_,m),ye())},ye=()=>{const d=pt();o("change",d)};function Pe(){return t(28,W=[]),_t(),t(4,ae=0),!0}function _t(){$=!0,S.temp.clearRect(0,0,_,m),t(27,S.temp.fillStyle=l==="mask"?"transparent":"#FFFFFF",S),S.temp.fillRect(0,0,_,m),l==="mask"&&S.mask.clearRect(0,0,v.mask.width,v.mask.height)}let We=({once:d=!1}={})=>{if(j||$){const T=H.getPointerCoordinates(),g=H.getBrushCoordinates();bt(S.interface,T,g),j=!1,$=!1}d||window.requestAnimationFrame(()=>{We()})},bt=(d,T,g)=>{d.clearRect(0,0,_,m),d.beginPath(),d.fillStyle=u,d.arc(g.x,g.y,h/2,0,Math.PI*2,!0),d.fill(),d.beginPath(),d.fillStyle=k,d.arc(g.x,g.y,n,0,Math.PI*2,!0),d.fill()};function pt(){return l==="mask"?v.mask.toDataURL("image/png"):v.drawing.toDataURL("image/jpg")}i.$$.on_mount.push(function(){a===void 0&&!("value"in e||i.$$.bound[i.$$.props.value])&&console.warn("<Sketch> was created without expected prop 'value'"),c===void 0&&!("value_img"in e||i.$$.bound[i.$$.props.value_img])&&console.warn("<Sketch> was created without expected prop 'value_img'"),h===void 0&&!("brush_radius"in e||i.$$.bound[i.$$.props.brush_radius])&&console.warn("<Sketch> was created without expected prop 'brush_radius'"),b===void 0&&!("source"in e||i.$$.bound[i.$$.props.source])&&console.warn("<Sketch> was created without expected prop 'source'"),E===void 0&&!("shape"in e||i.$$.bound[i.$$.props.shape])&&console.warn("<Sketch> was created without expected prop 'shape'")});const Ut=["value","value_img","mode","brush_color","brush_radius","mask_opacity","source","width","height","container_height","shape"];Fo.keys(e).forEach(d=>{!~Ut.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<Sketch> was created with unknown prop '${d}'`)});function Vt(d){yn.call(this,i,d)}function Gt(d,T){Q[d?"unshift":"push"](()=>{v[T]=d,t(0,v)})}function qt(d){Q[d?"unshift":"push"](()=>{F=d,t(3,F)})}function Ft(){P=this.offsetWidth,L=this.offsetHeight,t(1,P),t(2,L)}return i.$$set=d=>{"value"in d&&t(13,a=d.value),"value_img"in d&&t(14,c=d.value_img),"mode"in d&&t(15,l=d.mode),"brush_color"in d&&t(16,u=d.brush_color),"brush_radius"in d&&t(10,h=d.brush_radius),"mask_opacity"in d&&t(17,f=d.mask_opacity),"source"in d&&t(18,b=d.source),"width"in d&&t(11,_=d.width),"height"in d&&t(12,m=d.height),"container_height"in d&&t(19,w=d.container_height),"shape"in d&&t(20,E=d.shape)},i.$capture_state=()=>({onMount:Xe,onDestroy:Gi,createEventDispatcher:Se,tick:Ie,fade:Jt,LazyBrush:gn,ResizeObserver:bn,dispatch:o,value:a,value_img:c,mode:l,brush_color:u,brush_radius:h,mask_opacity:f,source:b,width:_,height:m,container_height:w,shape:E,mounted:R,catenary_color:k,canvas_width:P,canvas_height:L,last_value_img:y,mid_point:wn,canvas_types:C,canvas:v,ctx:S,points:N,lines:W,mouse_has_moved:j,values_changed:$,is_drawing:Z,is_pressing:V,lazy:H,canvas_container:F,canvas_observer:re,line_count:ae,draw_cropped_image:ue,init:le,redraw_image:ve,clear_mask:Me,undo:p,get_save_data:Qe,draw_lines:Le,handle_draw_start:mt,handle_draw_move:Ze,handle_draw_end:gt,old_width:Je,old_height:xe,old_container_height:$e,add_lr_border:et,handle_canvas_resize:tt,set_canvas_size:Te,get_pointer_pos:it,handle_pointer_move:nt,draw_points:rt,save_mask_line:ot,saveLine:st,trigger_on_change:ye,clear:Pe,clear_canvas:_t,loop:We,draw_interface:bt,get_image_data:pt,brush_dot:n}),i.$inject_state=d=>{"value"in d&&t(13,a=d.value),"value_img"in d&&t(14,c=d.value_img),"mode"in d&&t(15,l=d.mode),"brush_color"in d&&t(16,u=d.brush_color),"brush_radius"in d&&t(10,h=d.brush_radius),"mask_opacity"in d&&t(17,f=d.mask_opacity),"source"in d&&t(18,b=d.source),"width"in d&&t(11,_=d.width),"height"in d&&t(12,m=d.height),"container_height"in d&&t(19,w=d.container_height),"shape"in d&&t(20,E=d.shape),"mounted"in d&&t(25,R=d.mounted),"catenary_color"in d&&(k=d.catenary_color),"canvas_width"in d&&t(1,P=d.canvas_width),"canvas_height"in d&&t(2,L=d.canvas_height),"last_value_img"in d&&t(26,y=d.last_value_img),"canvas"in d&&t(0,v=d.canvas),"ctx"in d&&t(27,S=d.ctx),"points"in d&&(N=d.points),"lines"in d&&t(28,W=d.lines),"mouse_has_moved"in d&&(j=d.mouse_has_moved),"values_changed"in d&&($=d.values_changed),"is_drawing"in d&&(Z=d.is_drawing),"is_pressing"in d&&(V=d.is_pressing),"lazy"in d&&t(29,H=d.lazy),"canvas_container"in d&&t(3,F=d.canvas_container),"canvas_observer"in d&&(re=d.canvas_observer),"line_count"in d&&t(4,ae=d.line_count),"get_save_data"in d&&(Qe=d.get_save_data),"draw_lines"in d&&t(50,Le=d.draw_lines),"handle_draw_start"in d&&t(7,mt=d.handle_draw_start),"handle_draw_move"in d&&t(8,Ze=d.handle_draw_move),"handle_draw_end"in d&&t(9,gt=d.handle_draw_end),"old_width"in d&&(Je=d.old_width),"old_height"in d&&(xe=d.old_height),"old_container_height"in d&&($e=d.old_container_height),"add_lr_border"in d&&t(5,et=d.add_lr_border),"handle_canvas_resize"in d&&t(51,tt=d.handle_canvas_resize),"set_canvas_size"in d&&(Te=d.set_canvas_size),"get_pointer_pos"in d&&(it=d.get_pointer_pos),"handle_pointer_move"in d&&(nt=d.handle_pointer_move),"draw_points"in d&&(rt=d.draw_points),"save_mask_line"in d&&(ot=d.save_mask_line),"saveLine"in d&&(st=d.saveLine),"trigger_on_change"in d&&t(58,ye=d.trigger_on_change),"loop"in d&&(We=d.loop),"draw_interface"in d&&(bt=d.draw_interface),"brush_dot"in d&&(n=d.brush_dot)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),i.$$.update=()=>{i.$$.dirty[0]&1054720&&E&&(_||m)&&(t(11,_=E[0]),t(12,m=E[1])),i.$$.dirty[0]&33562624&&R&&!a&&Pe(),i.$$.dirty[0]&503601153&&R&&c!==y&&(t(26,y=c),Pe(),setTimeout(()=>{b==="webcam"?(S.temp.save(),S.temp.translate(_,0),S.temp.scale(-1,1),S.temp.drawImage(c,0,0),S.temp.restore()):ue(),S.drawing.drawImage(v.temp,0,0,_,m),Le({lines:W.slice()}),ye()},50)),i.$$.dirty[0]&536871936&&H&&(le(),H.setRadius(h*.05)),i.$$.dirty[0]&6144&&(_||m)&&tt(),i.$$.dirty[0]&1024&&(n=h*.075)},[v,P,L,F,ae,et,C,mt,Ze,gt,h,_,m,a,c,l,u,f,b,w,E,Me,p,Pe,pt,R,y,S,W,H,Vt,Gt,qt,Ft]}class Ht extends Ve{constructor(e){super(e),Ge(this,e,Ko,_i,Ce,{value:13,value_img:14,mode:15,brush_color:16,brush_radius:10,mask_opacity:17,source:18,width:11,height:12,container_height:19,shape:20,clear_mask:21,undo:22,clear:23,get_image_data:24},null,[-1,-1,-1]),O("SvelteRegisterComponent",{component:this,tagName:"Sketch",options:e,id:_i.name})}get value(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value_img(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value_img(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mode(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get brush_color(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set brush_color(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get brush_radius(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set brush_radius(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mask_opacity(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mask_opacity(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get source(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set source(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get width(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get container_height(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set container_height(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get shape(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set shape(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get clear_mask(){return this.$$.ctx[21]}set clear_mask(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get undo(){return this.$$.ctx[22]}set undo(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get clear(){return this.$$.ctx[23]}set clear(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get get_image_data(){return this.$$.ctx[24]}set get_image_data(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Qo="Users/peterallen/Projects/gradio/js/image/interactive/ModifySketch.svelte";function bi(i){let e,t;e=new Ye({props:{Icon:On,label:"Clear"},$$inline:!0}),e.$on("click",i[3]);const n={c:function(){X(e.$$.fragment)},m:function(r,o){Y(e,r,o),t=!0},p:Oe,i:function(r){t||(D(e.$$.fragment,r),t=!0)},o:function(r){M(e.$$.fragment,r),t=!1},d:function(r){U(e,r)}};return O("SvelteRegisterBlock",{block:n,id:bi.name,type:"if",source:"(11:1) {#if show_eraser}",ctx:i}),n}function pi(i){let e,t,n,s,r,o;t=new Ye({props:{Icon:An,label:"Undo"},$$inline:!0}),t.$on("click",i[2]);let a=i[0]&&bi(i);r=new Ye({props:{Icon:Pn,label:"Remove Image"},$$inline:!0}),r.$on("click",i[4]);const c={c:function(){e=ee("div"),X(t.$$.fragment),n=ne(),a&&a.c(),s=ne(),X(r.$$.fragment),I(e,"class","svelte-1g74h68"),te(e,Qo,10,0,247)},l:function(u){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(u,h){A(u,e,h),Y(t,e,null),Re(e,n),a&&a.m(e,null),Re(e,s),Y(r,e,null),o=!0},p:function(u,[h]){u[0]?a?(a.p(u,h),h&1&&D(a,1)):(a=bi(u),a.c(),D(a,1),a.m(e,s)):a&&(_e(),M(a,1,1,()=>{a=null}),be())},i:function(u){o||(D(t.$$.fragment,u),D(a),D(r.$$.fragment,u),o=!0)},o:function(u){M(t.$$.fragment,u),M(a),M(r.$$.fragment,u),o=!1},d:function(u){u&&B(e),U(t),a&&a.d(),U(r)}};return O("SvelteRegisterBlock",{block:c,id:pi.name,type:"component",source:"",ctx:i}),c}function Zo(i,e,t){let{$$slots:n={},$$scope:s}=e;qe("ModifySketch",n,[]);const r=Se();let{show_eraser:o=!1}=e;const a=["show_eraser"];Object.keys(e).forEach(h=>{!~a.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<ModifySketch> was created with unknown prop '${h}'`)});const c=()=>r("undo"),l=h=>{r("clear_mask"),h.stopPropagation()},u=h=>{r("remove_image"),h.stopPropagation()};return i.$$set=h=>{"show_eraser"in h&&t(0,o=h.show_eraser)},i.$capture_state=()=>({createEventDispatcher:Se,IconButton:Ye,Undo:An,Clear:Pn,Erase:On,dispatch:r,show_eraser:o}),i.$inject_state=h=>{"show_eraser"in h&&t(0,o=h.show_eraser)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),[o,r,c,l,u]}class Xt extends Ve{constructor(e){super(e),Ge(this,e,Zo,pi,Ce,{show_eraser:0}),O("SvelteRegisterComponent",{component:this,tagName:"ModifySketch",options:e,id:pi.name})}get show_eraser(){throw new Error("<ModifySketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set show_eraser(e){throw new Error("<ModifySketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Mt="Users/peterallen/Projects/gradio/js/image/interactive/SketchSettings.svelte";function wi(i){let e,t,n,s,r;const o={c:function(){e=ee("input"),I(e,"aria-label","Brush radius"),I(e,"type","range"),I(e,"min",t=.5*(i[2]/i[6])),I(e,"max",n=75*(i[2]/i[6])),I(e,"class","svelte-1hdlygn"),te(e,Mt,25,3,547)},m:function(c,l){A(c,e,l),Bt(e,i[0]),s||(r=[oe(e,"change",i[10]),oe(e,"input",i[10])],s=!0)},p:function(c,l){l&68&&t!==(t=.5*(c[2]/c[6]))&&I(e,"min",t),l&68&&n!==(n=75*(c[2]/c[6]))&&I(e,"max",n),l&1&&Bt(e,c[0])},d:function(c){c&&B(e),s=!1,kn(r)}};return O("SvelteRegisterBlock",{block:o,id:wi.name,type:"if",source:"(21:2) {#if show_size}",ctx:i}),o}function vi(i){let e,t,n,s;t=new Ye({props:{Icon:Tn,label:"Select brush color"},$$inline:!0}),t.$on("click",i[11]);let r=i[5]&&yi(i);const o={c:function(){e=ee("span"),X(t.$$.fragment),n=ne(),r&&r.c(),I(e,"class","col svelte-1hdlygn"),te(e,Mt,36,2,751)},m:function(c,l){A(c,e,l),Y(t,e,null),Re(e,n),r&&r.m(e,null),s=!0},p:function(c,l){c[5]?r?r.p(c,l):(r=yi(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:function(c){s||(D(t.$$.fragment,c),s=!0)},o:function(c){M(t.$$.fragment,c),s=!1},d:function(c){c&&B(e),U(t),r&&r.d()}};return O("SvelteRegisterBlock",{block:o,id:vi.name,type:"if",source:'(32:1) {#if mode !== \\"mask\\"}',ctx:i}),o}function yi(i){let e,t,n;const s={c:function(){e=ee("input"),I(e,"aria-label","Brush color"),I(e,"type","color"),I(e,"class","svelte-1hdlygn"),te(e,Mt,43,4,905)},m:function(o,a){A(o,e,a),Bt(e,i[1]),t||(n=oe(e,"input",i[12]),t=!0)},p:function(o,a){a&2&&Bt(e,o[1])},d:function(o){o&&B(e),t=!1,n()}};return O("SvelteRegisterBlock",{block:s,id:yi.name,type:"if",source:"(39:3) {#if show_col}",ctx:i}),s}function ki(i){let e,t,n,s,r,o;n=new Ye({props:{Icon:Cn,label:"Use brush"},$$inline:!0}),n.$on("click",i[9]);let a=i[4]&&wi(i),c=i[3]!=="mask"&&vi(i);const l={c:function(){e=ee("div"),t=ee("span"),X(n.$$.fragment),s=ne(),a&&a.c(),r=ne(),c&&c.c(),I(t,"class","brush svelte-1hdlygn"),te(t,Mt,18,1,404),I(e,"class","wrap svelte-1hdlygn"),te(e,Mt,17,0,384)},l:function(h){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(h,f){A(h,e,f),Re(e,t),Y(n,t,null),Re(t,s),a&&a.m(t,null),Re(e,r),c&&c.m(e,null),o=!0},p:function(h,[f]){h[4]?a?a.p(h,f):(a=wi(h),a.c(),a.m(t,null)):a&&(a.d(1),a=null),h[3]!=="mask"?c?(c.p(h,f),f&8&&D(c,1)):(c=vi(h),c.c(),D(c,1),c.m(e,null)):c&&(_e(),M(c,1,1,()=>{c=null}),be())},i:function(h){o||(D(n.$$.fragment,h),D(c),o=!0)},o:function(h){M(n.$$.fragment,h),M(c),o=!1},d:function(h){h&&B(e),U(n),a&&a.d(),c&&c.d()}};return O("SvelteRegisterBlock",{block:l,id:ki.name,type:"component",source:"",ctx:i}),l}function Jo(i,e,t){let n,{$$slots:s={},$$scope:r}=e;qe("SketchSettings",s,[]);let o=!1,a=!1,{brush_radius:c=20}=e,{brush_color:l="#000"}=e,{container_height:u}=e,{img_width:h}=e,{img_height:f}=e,{mode:b="other"}=e;i.$$.on_mount.push(function(){u===void 0&&!("container_height"in e||i.$$.bound[i.$$.props.container_height])&&console.warn("<SketchSettings> was created without expected prop 'container_height'"),h===void 0&&!("img_width"in e||i.$$.bound[i.$$.props.img_width])&&console.warn("<SketchSettings> was created without expected prop 'img_width'"),f===void 0&&!("img_height"in e||i.$$.bound[i.$$.props.img_height])&&console.warn("<SketchSettings> was created without expected prop 'img_height'")});const _=["brush_radius","brush_color","container_height","img_width","img_height","mode"];Object.keys(e).forEach(k=>{!~_.indexOf(k)&&k.slice(0,2)!=="$$"&&k!=="slot"&&console.warn(`<SketchSettings> was created with unknown prop '${k}'`)});const m=()=>t(4,o=!o);function w(){c=Rr(this.value),t(0,c)}const E=()=>t(5,a=!a);function R(){l=this.value,t(1,l)}return i.$$set=k=>{"brush_radius"in k&&t(0,c=k.brush_radius),"brush_color"in k&&t(1,l=k.brush_color),"container_height"in k&&t(7,u=k.container_height),"img_width"in k&&t(2,h=k.img_width),"img_height"in k&&t(8,f=k.img_height),"mode"in k&&t(3,b=k.mode)},i.$capture_state=()=>({IconButton:Ye,Brush:Cn,Color:Tn,show_size:o,show_col:a,brush_radius:c,brush_color:l,container_height:u,img_width:h,img_height:f,mode:b,width:n}),i.$inject_state=k=>{"show_size"in k&&t(4,o=k.show_size),"show_col"in k&&t(5,a=k.show_col),"brush_radius"in k&&t(0,c=k.brush_radius),"brush_color"in k&&t(1,l=k.brush_color),"container_height"in k&&t(7,u=k.container_height),"img_width"in k&&t(2,h=k.img_width),"img_height"in k&&t(8,f=k.img_height),"mode"in k&&t(3,b=k.mode),"width"in k&&t(6,n=k.width)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),i.$$.update=()=>{i.$$.dirty&388&&t(6,n=u*(h/f))},[c,l,h,b,o,a,n,u,f,m,w,E,R]}class Yt extends Ve{constructor(e){super(e),Ge(this,e,Jo,ki,Ce,{brush_radius:0,brush_color:1,container_height:7,img_width:2,img_height:8,mode:3}),O("SvelteRegisterComponent",{component:this,tagName:"SketchSettings",options:e,id:ki.name})}get brush_radius(){throw new Error("<SketchSettings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set brush_radius(e){throw new Error("<SketchSettings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get brush_color(){throw new Error("<SketchSettings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set brush_color(e){throw new Error("<SketchSettings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get container_height(){throw new Error("<SketchSettings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set container_height(e){throw new Error("<SketchSettings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get img_width(){throw new Error("<SketchSettings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set img_width(e){throw new Error("<SketchSettings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get img_height(){throw new Error("<SketchSettings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set img_height(e){throw new Error("<SketchSettings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mode(){throw new Error("<SketchSettings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(e){throw new Error("<SketchSettings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Be}=Bi,Ke="Users/peterallen/Projects/gradio/js/image/interactive/Image.svelte";function sr(i){let e,t,n,s;const r={c:function(){e=ee("img"),de(e.src,t=i[16].image||i[16].data)||I(e,"src",t),I(e,"alt",""),I(e,"class","svelte-14sn87y"),q(e,"webcam",i[6]==="webcam"&&i[10]),q(e,"selectable",i[12]),te(e,Ke,398,2,9535)},m:function(a,c){A(a,e,c),n||(s=oe(e,"click",i[32],!1,!1,!1,!1),n=!0)},p:function(a,c){c[0]&65536&&!de(e.src,t=a[16].image||a[16].data)&&I(e,"src",t),c[0]&1088&&q(e,"webcam",a[6]==="webcam"&&a[10]),c[0]&4096&&q(e,"selectable",a[12])},i:Oe,o:Oe,d:function(a){a&&B(e),n=!1,s()}};return O("SvelteRegisterBlock",{block:r,id:sr.name,type:"else",source:"(354:1) {:else}",ctx:i}),r}function ar(i){let e=i[25],t,n,s,r=Ei(i),o=i[19]>0&&Si(i);const a={c:function(){r.c(),t=ne(),o&&o.c(),n=Fe()},m:function(l,u){r.m(l,u),A(l,t,u),o&&o.m(l,u),A(l,n,u),s=!0},p:function(l,u){u[0]&33554432&&Ce(e,e=l[25])?(r.d(1),r=Ei(l),r.c(),r.m(t.parentNode,t)):r.p(l,u),l[19]>0?o?(o.p(l,u),u[0]&524288&&D(o,1)):(o=Si(l),o.c(),D(o,1),o.m(n.parentNode,n)):o&&(_e(),M(o,1,1,()=>{o=null}),be())},i:function(l){s||(D(o),s=!0)},o:function(l){M(o),s=!1},d:function(l){l&&(B(t),B(n)),r.d(l),o&&o.d(l)}};return O("SvelteRegisterBlock",{block:a,id:ar.name,type:"if",source:"(314:94) ",ctx:i}),a}function cr(i){let e,t,n,s,r,o,a;e=new It({props:{editable:!0},$$inline:!0}),e.$on("edit",i[55]),e.$on("clear",i[27]);const c={c:function(){X(e.$$.fragment),t=ne(),n=ee("img"),de(n.src,s=i[16])||I(n,"src",s),I(n,"alt",""),I(n,"class","svelte-14sn87y"),q(n,"selectable",i[12]),q(n,"webcam",i[6]==="webcam"&&i[10]),te(n,Ke,346,2,8210)},m:function(u,h){Y(e,u,h),A(u,t,h),A(u,n,h),r=!0,o||(a=oe(n,"click",i[32],!1,!1,!1,!1),o=!0)},p:function(u,h){(!r||h[0]&65536&&!de(n.src,s=u[16]))&&I(n,"src",s),(!r||h[0]&4096)&&q(n,"selectable",u[12]),(!r||h[0]&1088)&&q(n,"webcam",u[6]==="webcam"&&u[10])},i:function(u){r||(D(e.$$.fragment,u),r=!0)},o:function(u){M(e.$$.fragment,u),r=!1},d:function(u){u&&(B(t),B(n)),U(e,u),o=!1,a()}};return O("SvelteRegisterBlock",{block:c,id:cr.name,type:"if",source:"(297:29) ",ctx:i}),c}function lr(i){let e,t,n,s,r={image:i[0].data};e=new Xi({props:r,$$inline:!0}),i[53](e),e.$on("crop",i[28]),n=new It({$$inline:!0}),n.$on("clear",i[54]);const o={c:function(){X(e.$$.fragment),t=ne(),X(n.$$.fragment)},m:function(c,l){Y(e,c,l),A(c,t,l),Y(n,c,l),s=!0},p:function(c,l){const u={};l[0]&1&&(u.image=c[0].data),e.$set(u)},i:function(c){s||(D(e.$$.fragment,c),D(n.$$.fragment,c),s=!0)},o:function(c){M(e.$$.fragment,c),M(n.$$.fragment,c),s=!1},d:function(c){c&&B(t),i[53](null),U(e,c),U(n,c)}};return O("SvelteRegisterBlock",{block:o,id:lr.name,type:"if",source:"(294:29) ",ctx:i}),o}function ur(i){let e,t,n=i[6]==="webcam"&&!i[25]&&Mi(i);const s={c:function(){n&&n.c(),e=Fe()},m:function(o,a){n&&n.m(o,a),A(o,e,a),t=!0},p:function(o,a){o[6]==="webcam"&&!o[25]?n?(n.p(o,a),a[0]&33554496&&D(n,1)):(n=Mi(o),n.c(),D(n,1),n.m(e.parentNode,e)):n&&(_e(),M(n,1,1,()=>{n=null}),be())},i:function(o){t||(D(n),t=!0)},o:function(o){M(n),t=!1},d:function(o){o&&B(e),n&&n.d(o)}};return O("SvelteRegisterBlock",{block:s,id:ur.name,type:"if",source:"(282:58) ",ctx:i}),s}function hr(i){let e,t,n,s,r,o,a;e=new Xt({$$inline:!0}),e.$on("undo",i[45]),e.$on("remove_image",i[30]);let c=i[1]==="color-sketch"&&Ii(i);function l(b){i[48](b)}function u(b){i[49](b)}let h={value:i[0],mode:i[21],width:i[19]||i[24],height:i[18]||i[23],container_height:i[20]||i[23],shape:i[7]};i[2]!==void 0&&(h.brush_radius=i[2]),i[3]!==void 0&&(h.brush_color=i[3]),s=new Ht({props:h,$$inline:!0}),Q.push(()=>me(s,"brush_radius",l)),Q.push(()=>me(s,"brush_color",u)),i[50](s),s.$on("change",i[28]),s.$on("clear",i[30]);const f={c:function(){X(e.$$.fragment),t=ne(),c&&c.c(),n=ne(),X(s.$$.fragment)},m:function(_,m){Y(e,_,m),A(_,t,m),c&&c.m(_,m),A(_,n,m),Y(s,_,m),a=!0},p:function(_,m){_[1]==="color-sketch"?c?(c.p(_,m),m[0]&2&&D(c,1)):(c=Ii(_),c.c(),D(c,1),c.m(n.parentNode,n)):c&&(_e(),M(c,1,1,()=>{c=null}),be());const w={};m[0]&1&&(w.value=_[0]),m[0]&2097152&&(w.mode=_[21]),m[0]&17301504&&(w.width=_[19]||_[24]),m[0]&8650752&&(w.height=_[18]||_[23]),m[0]&9437184&&(w.container_height=_[20]||_[23]),m[0]&128&&(w.shape=_[7]),!r&&m[0]&4&&(r=!0,w.brush_radius=_[2],ge(()=>r=!1)),!o&&m[0]&8&&(o=!0,w.brush_color=_[3],ge(()=>o=!1)),s.$set(w)},i:function(_){a||(D(e.$$.fragment,_),D(c),D(s.$$.fragment,_),a=!0)},o:function(_){M(e.$$.fragment,_),M(c),M(s.$$.fragment,_),a=!1},d:function(_){_&&(B(t),B(n)),U(e,_),c&&c.d(_),i[50](null),U(s,_)}};return O("SvelteRegisterBlock",{block:f,id:hr.name,type:"if",source:"(255:31) ",ctx:i}),f}function fr(i){let e,t,n;function s(a){i[44](a)}let r={filetype:"image/*",include_file_metadata:!1,disable_click:!!i[0],root:i[13],$$slots:{default:[pr]},$$scope:{ctx:i}};i[15]!==void 0&&(r.dragging=i[15]),e=new Bn({props:r,$$inline:!0}),Q.push(()=>me(e,"dragging",s)),e.$on("load",i[26]);const o={c:function(){X(e.$$.fragment)},m:function(c,l){Y(e,c,l),n=!0},p:function(c,l){const u={};l[0]&1&&(u.disable_click=!!c[0]),l[0]&8192&&(u.root=c[13]),l[0]&67067343|l[2]&4&&(u.$$scope={dirty:l,ctx:c}),!t&&l[0]&32768&&(t=!0,u.dragging=c[15],ge(()=>t=!1)),e.$set(u)},i:function(c){n||(D(e.$$.fragment,c),n=!0)},o:function(c){M(e.$$.fragment,c),n=!1},d:function(c){U(e,c)}};return O("SvelteRegisterBlock",{block:o,id:fr.name,type:"if",source:'(167:1) {#if source === \\"upload\\"}',ctx:i}),o}function Ei(i){let e,t,n,s;const r={c:function(){e=ee("img"),I(e,"class","absolute-img svelte-14sn87y"),de(e.src,t=i[25]||i[16])||I(e,"src",t),I(e,"alt",""),q(e,"webcam",i[6]==="webcam"&&i[10]),te(e,Ke,355,3,8468)},m:function(a,c){A(a,e,c),i[56](e),n||(s=oe(e,"load",i[29],!1,!1,!1,!1),n=!0)},p:function(a,c){c[0]&33619968&&!de(e.src,t=a[25]||a[16])&&I(e,"src",t),c[0]&1088&&q(e,"webcam",a[6]==="webcam"&&a[10])},d:function(a){a&&B(e),i[56](null),n=!1,s()}};return O("SvelteRegisterBlock",{block:r,id:Ei.name,type:"key",source:"(315:2) {#key static_image}",ctx:i}),r}function Si(i){let e,t,n,s,r,o,a,c;function l(_){i[58](_)}function u(_){i[59](_)}let h={value:i[0],mode:i[21],width:i[19]||i[24],height:i[18]||i[23],container_height:i[20]||i[23],value_img:i[22],source:i[6]};i[2]!==void 0&&(h.brush_radius=i[2]),i[3]!==void 0&&(h.brush_color=i[3]),e=new Ht({props:h,$$inline:!0}),i[57](e),Q.push(()=>me(e,"brush_radius",l)),Q.push(()=>me(e,"brush_color",u)),e.$on("change",i[28]),r=new Xt({$$inline:!0}),r.$on("undo",i[60]),r.$on("remove_image",i[30]);let f=(i[1]==="color-sketch"||i[1]==="sketch")&&Di(i);const b={c:function(){X(e.$$.fragment),s=ne(),X(r.$$.fragment),o=ne(),f&&f.c(),a=Fe()},m:function(m,w){Y(e,m,w),A(m,s,w),Y(r,m,w),A(m,o,w),f&&f.m(m,w),A(m,a,w),c=!0},p:function(m,w){const E={};w[0]&1&&(E.value=m[0]),w[0]&2097152&&(E.mode=m[21]),w[0]&17301504&&(E.width=m[19]||m[24]),w[0]&8650752&&(E.height=m[18]||m[23]),w[0]&9437184&&(E.container_height=m[20]||m[23]),w[0]&4194304&&(E.value_img=m[22]),w[0]&64&&(E.source=m[6]),!t&&w[0]&4&&(t=!0,E.brush_radius=m[2],ge(()=>t=!1)),!n&&w[0]&8&&(n=!0,E.brush_color=m[3],ge(()=>n=!1)),e.$set(E),m[1]==="color-sketch"||m[1]==="sketch"?f?(f.p(m,w),w[0]&2&&D(f,1)):(f=Di(m),f.c(),D(f,1),f.m(a.parentNode,a)):f&&(_e(),M(f,1,1,()=>{f=null}),be())},i:function(m){c||(D(e.$$.fragment,m),D(r.$$.fragment,m),D(f),c=!0)},o:function(m){M(e.$$.fragment,m),M(r.$$.fragment,m),M(f),c=!1},d:function(m){m&&(B(s),B(o),B(a)),i[57](null),U(e,m),U(r,m),f&&f.d(m)}};return O("SvelteRegisterBlock",{block:b,id:Si.name,type:"if",source:"(325:2) {#if img_width > 0}",ctx:i}),b}function Di(i){let e,t,n,s;function r(l){i[61](l)}function o(l){i[62](l)}let a={container_height:i[20]||i[23],img_width:i[19]||i[24],img_height:i[18]||i[23],mode:i[21]};i[2]!==void 0&&(a.brush_radius=i[2]),i[3]!==void 0&&(a.brush_color=i[3]),e=new Yt({props:a,$$inline:!0}),Q.push(()=>me(e,"brush_radius",r)),Q.push(()=>me(e,"brush_color",o));const c={c:function(){X(e.$$.fragment)},m:function(u,h){Y(e,u,h),s=!0},p:function(u,h){const f={};h[0]&9437184&&(f.container_height=u[20]||u[23]),h[0]&17301504&&(f.img_width=u[19]||u[24]),h[0]&8650752&&(f.img_height=u[18]||u[23]),h[0]&2097152&&(f.mode=u[21]),!t&&h[0]&4&&(t=!0,f.brush_radius=u[2],ge(()=>t=!1)),!n&&h[0]&8&&(n=!0,f.brush_color=u[3],ge(()=>n=!1)),e.$set(f)},i:function(u){s||(D(e.$$.fragment,u),s=!0)},o:function(u){M(e.$$.fragment,u),s=!1},d:function(u){U(e,u)}};return O("SvelteRegisterBlock",{block:c,id:Di.name,type:"if",source:'(343:3) {#if tool === \\"color-sketch\\" || tool === \\"sketch\\"}',ctx:i}),c}function Mi(i){let e,t;e=new Hn({props:{streaming:i[8],pending:i[9],mirror_webcam:i[10]},$$inline:!0}),e.$on("capture",i[51]),e.$on("stream",i[28]),e.$on("error",i[52]);const n={c:function(){X(e.$$.fragment)},m:function(r,o){Y(e,r,o),t=!0},p:function(r,o){const a={};o[0]&256&&(a.streaming=r[8]),o[0]&512&&(a.pending=r[9]),o[0]&1024&&(a.mirror_webcam=r[10]),e.$set(a)},i:function(r){t||(D(e.$$.fragment,r),t=!0)},o:function(r){M(e.$$.fragment,r),t=!1},d:function(r){U(e,r)}};return O("SvelteRegisterBlock",{block:n,id:Mi.name,type:"if",source:'(283:2) {#if source === \\"webcam\\" && !static_image}',ctx:i}),n}function Ii(i){let e,t,n,s;function r(l){i[46](l)}function o(l){i[47](l)}let a={container_height:i[20]||i[23],img_width:i[19]||i[24],img_height:i[18]||i[23]};i[2]!==void 0&&(a.brush_radius=i[2]),i[3]!==void 0&&(a.brush_color=i[3]),e=new Yt({props:a,$$inline:!0}),Q.push(()=>me(e,"brush_radius",r)),Q.push(()=>me(e,"brush_color",o));const c={c:function(){X(e.$$.fragment)},m:function(u,h){Y(e,u,h),s=!0},p:function(u,h){const f={};h[0]&9437184&&(f.container_height=u[20]||u[23]),h[0]&17301504&&(f.img_width=u[19]||u[24]),h[0]&8650752&&(f.img_height=u[18]||u[23]),!t&&h[0]&4&&(t=!0,f.brush_radius=u[2],ge(()=>t=!1)),!n&&h[0]&8&&(n=!0,f.brush_color=u[3],ge(()=>n=!1)),e.$set(f)},i:function(u){s||(D(e.$$.fragment,u),s=!0)},o:function(u){M(e.$$.fragment,u),s=!1},d:function(u){U(e,u)}};return O("SvelteRegisterBlock",{block:c,id:Ii.name,type:"if",source:'(260:2) {#if tool === \\"color-sketch\\"}',ctx:i}),c}function dr(i){let e,t,n,s;const r={c:function(){e=ee("img"),de(e.src,t=i[0].image||i[0].data)||I(e,"src",t),I(e,"alt","hello"),I(e,"class","svelte-14sn87y"),q(e,"webcam",i[6]==="webcam"&&i[10]),q(e,"selectable",i[12]),te(e,Ke,285,4,6578)},m:function(a,c){A(a,e,c),n||(s=oe(e,"click",i[32],!1,!1,!1,!1),n=!0)},p:function(a,c){c[0]&1&&!de(e.src,t=a[0].image||a[0].data)&&I(e,"src",t),c[0]&1088&&q(e,"webcam",a[6]==="webcam"&&a[10]),c[0]&4096&&q(e,"selectable",a[12])},i:Oe,o:Oe,d:function(a){a&&B(e),n=!1,s()}};return O("SvelteRegisterBlock",{block:r,id:dr.name,type:"else",source:"(242:3) {:else}",ctx:i}),r}function mr(i){let e=i[25],t,n,s,r=Ri(i),o=i[19]>0&&Oi(i);const a={c:function(){r.c(),t=ne(),o&&o.c(),n=Fe()},m:function(l,u){r.m(l,u),A(l,t,u),o&&o.m(l,u),A(l,n,u),s=!0},p:function(l,u){u[0]&33554432&&Ce(e,e=l[25])?(r.d(1),r=Ri(l),r.c(),r.m(t.parentNode,t)):r.p(l,u),l[19]>0?o?(o.p(l,u),u[0]&524288&&D(o,1)):(o=Oi(l),o.c(),D(o,1),o.m(n.parentNode,n)):o&&(_e(),M(o,1,1,()=>{o=null}),be())},i:function(l){s||(D(o),s=!0)},o:function(l){M(o),s=!1},d:function(l){l&&(B(t),B(n)),r.d(l),o&&o.d(l)}};return O("SvelteRegisterBlock",{block:a,id:mr.name,type:"if",source:"(198:96) ",ctx:i}),a}function gr(i){let e,t,n,s,r,o,a;e=new It({props:{editable:!0},$$inline:!0}),e.$on("edit",i[36]),e.$on("clear",i[27]);const c={c:function(){X(e.$$.fragment),t=ne(),n=ee("img"),de(n.src,s=i[16].data)||I(n,"src",s),I(n,"alt",""),I(n,"class","svelte-14sn87y"),q(n,"scale-x-[-1]",i[6]==="webcam"&&i[10]),q(n,"selectable",i[12]),te(n,Ke,230,4,5022)},m:function(u,h){Y(e,u,h),A(u,t,h),A(u,n,h),r=!0,o||(a=oe(n,"click",i[32],!1,!1,!1,!1),o=!0)},p:function(u,h){(!r||h[0]&65536&&!de(n.src,s=u[16].data))&&I(n,"src",s),(!r||h[0]&1088)&&q(n,"scale-x-[-1]",u[6]==="webcam"&&u[10]),(!r||h[0]&4096)&&q(n,"selectable",u[12])},i:function(u){r||(D(e.$$.fragment,u),r=!0)},o:function(u){M(e.$$.fragment,u),r=!1},d:function(u){u&&(B(t),B(n)),U(e,u),o=!1,a()}};return O("SvelteRegisterBlock",{block:c,id:gr.name,type:"if",source:"(181:31) ",ctx:i}),c}function _r(i){let e,t,n,s,r={image:i[16].data};e=new Xi({props:r,$$inline:!0}),i[34](e),e.$on("crop",i[28]),n=new It({$$inline:!0}),n.$on("clear",i[35]);const o={c:function(){X(e.$$.fragment),t=ne(),X(n.$$.fragment)},m:function(c,l){Y(e,c,l),A(c,t,l),Y(n,c,l),s=!0},p:function(c,l){const u={};l[0]&65536&&(u.image=c[16].data),e.$set(u)},i:function(c){s||(D(e.$$.fragment,c),D(n.$$.fragment,c),s=!0)},o:function(c){M(e.$$.fragment,c),M(n.$$.fragment,c),s=!1},d:function(c){c&&B(t),i[34](null),U(e,c),U(n,c)}};return O("SvelteRegisterBlock",{block:o,id:_r.name,type:"if",source:"(178:31) ",ctx:i}),o}function br(i){let e;const t=i[33].default,n=Or(t,i,i[64],null),s={c:function(){n&&n.c()},m:function(o,a){n&&n.m(o,a),e=!0},p:function(o,a){n&&n.p&&(!e||a[2]&4)&&Cr(n,t,o,o[64],e?Pr(t,o[64],a,null):Tr(o[64]),null)},i:function(o){e||(D(n,o),e=!0)},o:function(o){M(n,o),e=!1},d:function(o){n&&n.d(o)}};return O("SvelteRegisterBlock",{block:s,id:br.name,type:"if",source:"(176:3) {#if (value === null && !static_image) || streaming}",ctx:i}),s}function Ri(i){let e,t,n,s;const r={c:function(){e=ee("img"),I(e,"class","absolute-img svelte-14sn87y"),de(e.src,t=i[25]||i[0]?.image||i[0])||I(e,"src",t),I(e,"alt",""),q(e,"webcam",i[6]==="webcam"&&i[10]),te(e,Ke,239,5,5309)},m:function(a,c){A(a,e,c),i[37](e),n||(s=oe(e,"load",i[29],!1,!1,!1,!1),n=!0)},p:function(a,c){c[0]&33554433&&!de(e.src,t=a[25]||a[0]?.image||a[0])&&I(e,"src",t),c[0]&1088&&q(e,"webcam",a[6]==="webcam"&&a[10])},d:function(a){a&&B(e),i[37](null),n=!1,s()}};return O("SvelteRegisterBlock",{block:r,id:Ri.name,type:"key",source:"(199:4) {#key static_image}",ctx:i}),r}function Oi(i){let e,t,n,s,r,o,a,c;function l(_){i[39](_)}function u(_){i[40](_)}let h={value:i[0],mask_opacity:i[11],mode:i[21],width:i[19]||i[24],height:i[18]||i[23],container_height:i[20]||i[23],value_img:i[22],source:i[6],shape:i[7]};i[2]!==void 0&&(h.brush_radius=i[2]),i[3]!==void 0&&(h.brush_color=i[3]),e=new Ht({props:h,$$inline:!0}),i[38](e),Q.push(()=>me(e,"brush_radius",l)),Q.push(()=>me(e,"brush_color",u)),e.$on("change",i[28]),r=new Xt({props:{show_eraser:i[22]},$$inline:!0}),r.$on("undo",i[41]),r.$on("clear_mask",i[31]),r.$on("remove_image",i[30]);let f=(i[1]==="color-sketch"||i[1]==="sketch")&&Ci(i);const b={c:function(){X(e.$$.fragment),s=ne(),X(r.$$.fragment),o=ne(),f&&f.c(),a=Fe()},m:function(m,w){Y(e,m,w),A(m,s,w),Y(r,m,w),A(m,o,w),f&&f.m(m,w),A(m,a,w),c=!0},p:function(m,w){const E={};w[0]&1&&(E.value=m[0]),w[0]&2048&&(E.mask_opacity=m[11]),w[0]&2097152&&(E.mode=m[21]),w[0]&17301504&&(E.width=m[19]||m[24]),w[0]&8650752&&(E.height=m[18]||m[23]),w[0]&9437184&&(E.container_height=m[20]||m[23]),w[0]&4194304&&(E.value_img=m[22]),w[0]&64&&(E.source=m[6]),w[0]&128&&(E.shape=m[7]),!t&&w[0]&4&&(t=!0,E.brush_radius=m[2],ge(()=>t=!1)),!n&&w[0]&8&&(n=!0,E.brush_color=m[3],ge(()=>n=!1)),e.$set(E);const R={};w[0]&4194304&&(R.show_eraser=m[22]),r.$set(R),m[1]==="color-sketch"||m[1]==="sketch"?f?(f.p(m,w),w[0]&2&&D(f,1)):(f=Ci(m),f.c(),D(f,1),f.m(a.parentNode,a)):f&&(_e(),M(f,1,1,()=>{f=null}),be())},i:function(m){c||(D(e.$$.fragment,m),D(r.$$.fragment,m),D(f),c=!0)},o:function(m){M(e.$$.fragment,m),M(r.$$.fragment,m),M(f),c=!1},d:function(m){m&&(B(s),B(o),B(a)),i[38](null),U(e,m),U(r,m),f&&f.d(m)}};return O("SvelteRegisterBlock",{block:b,id:Oi.name,type:"if",source:"(209:4) {#if img_width > 0}",ctx:i}),b}function Ci(i){let e,t,n,s;function r(l){i[42](l)}function o(l){i[43](l)}let a={container_height:i[20]||i[23],img_width:i[19]||i[24],img_height:i[18]||i[23],mode:i[21]};i[2]!==void 0&&(a.brush_radius=i[2]),i[3]!==void 0&&(a.brush_color=i[3]),e=new Yt({props:a,$$inline:!0}),Q.push(()=>me(e,"brush_radius",r)),Q.push(()=>me(e,"brush_color",o));const c={c:function(){X(e.$$.fragment)},m:function(u,h){Y(e,u,h),s=!0},p:function(u,h){const f={};h[0]&9437184&&(f.container_height=u[20]||u[23]),h[0]&17301504&&(f.img_width=u[19]||u[24]),h[0]&8650752&&(f.img_height=u[18]||u[23]),h[0]&2097152&&(f.mode=u[21]),!t&&h[0]&4&&(t=!0,f.brush_radius=u[2],ge(()=>t=!1)),!n&&h[0]&8&&(n=!0,f.brush_color=u[3],ge(()=>n=!1)),e.$set(f)},i:function(u){s||(D(e.$$.fragment,u),s=!0)},o:function(u){M(e.$$.fragment,u),s=!1},d:function(u){U(e,u)}};return O("SvelteRegisterBlock",{block:c,id:Ci.name,type:"if",source:'(231:5) {#if tool === \\"color-sketch\\" || tool === \\"sketch\\"}',ctx:i}),c}function pr(i){let e,t,n,s;const r=[br,_r,gr,mr,dr],o=[];function a(l,u){return l[0]===null&&!l[25]||l[8]?0:l[1]==="select"?1:l[1]==="editor"?2:(l[1]==="sketch"||l[1]==="color-sketch")&&(l[0]!==null||l[25])?3:4}e=a(i),t=o[e]=r[e](i);const c={c:function(){t.c(),n=Fe()},m:function(u,h){o[e].m(u,h),A(u,n,h),s=!0},p:function(u,h){let f=e;e=a(u),e===f?o[e].p(u,h):(_e(),M(o[f],1,1,()=>{o[f]=null}),be(),t=o[e],t?t.p(u,h):(t=o[e]=r[e](u),t.c()),D(t,1),t.m(n.parentNode,n))},i:function(u){s||(D(t),s=!0)},o:function(u){M(t),s=!1},d:function(u){u&&B(n),o[e].d(u)}};return O("SvelteRegisterBlock",{block:c,id:pr.name,type:"slot",source:'(168:2) <Upload    bind:dragging    filetype=\\"image/*\\"    on:load={handle_upload}    include_file_metadata={false}    disable_click={!!value}    root={root}   >',ctx:i}),c}function Ti(i){let e,t,n,s,r,o,a;e=new Dn({props:{show_label:i[5],Icon:i[6]==="canvas"?$t:xt,label:i[4]||(i[6]==="canvas"?"Sketch":"Image")},$$inline:!0});const c=[fr,hr,ur,lr,cr,ar,sr],l=[];function u(f,b){return f[6]==="upload"?0:f[6]==="canvas"?1:f[0]===null&&!f[25]||f[8]?2:f[1]==="select"?3:f[1]==="editor"?4:(f[1]==="sketch"||f[1]==="color-sketch")&&(f[0]!==null||f[25])?5:6}s=u(i),r=l[s]=c[s](i);const h={c:function(){X(e.$$.fragment),t=ne(),n=ee("div"),r.c(),I(n,"data-testid","image"),I(n,"class","image-container svelte-14sn87y"),Ni(()=>i[63].call(n)),te(n,Ke,200,0,4173)},l:function(b){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(b,_){Y(e,b,_),A(b,t,_),A(b,n,_),l[s].m(n,null),o=vn(n,i[63].bind(n)),a=!0},p:function(b,_){const m={};_[0]&32&&(m.show_label=b[5]),_[0]&64&&(m.Icon=b[6]==="canvas"?$t:xt),_[0]&80&&(m.label=b[4]||(b[6]==="canvas"?"Sketch":"Image")),e.$set(m);let w=s;s=u(b),s===w?l[s].p(b,_):(_e(),M(l[w],1,1,()=>{l[w]=null}),be(),r=l[s],r?r.p(b,_):(r=l[s]=c[s](b),r.c()),D(r,1),r.m(n,null))},i:function(b){a||(D(e.$$.fragment,b),D(r),a=!0)},o:function(b){M(e.$$.fragment,b),M(r),a=!1},d:function(b){b&&(B(t),B(n)),U(e,b),l[s].d(),o()}};return O("SvelteRegisterBlock",{block:h,id:Ti.name,type:"component",source:"",ctx:i}),h}function xo(i,e,t){let{$$slots:n={},$$scope:s}=e;qe("Image",n,["default"]);let{value:r}=e,{label:o=void 0}=e,{show_label:a}=e,{source:c="upload"}=e,{tool:l="editor"}=e,{shape:u}=e,{streaming:h=!1}=e,{pending:f=!1}=e,{mirror_webcam:b}=e,{brush_radius:_}=e,{brush_color:m="#000000"}=e,{mask_opacity:w}=e,{selectable:E=!1}=e,{root:R}=e,k,P;r&&(c==="upload"||c==="webcam")&&l==="sketch"&&(r={image:r,mask:null});function L({detail:g}){l==="color-sketch"?t(25,le=g):t(0,r=(c==="upload"||c==="webcam")&&l==="sketch"?{image:g,mask:null}:g),v("upload",g)}function y({detail:g}){t(0,r=null),t(25,le=void 0),v("clear")}async function C({detail:g},G){F==="mask"?c==="webcam"&&G?t(0,r={image:g,mask:null}):t(0,r={image:typeof r=="string"?r:r?.image||null,mask:g}):(c==="upload"||c==="webcam")&&l==="sketch"?t(0,r={image:g,mask:null}):t(0,r=g),await Ie(),v(h?"stream":"edit")}const v=Se();let S=!1,N=null;function W(g){const G=g.currentTarget;t(19,V=G.naturalWidth),t(18,Z=G.naturalHeight),t(20,H=G.getBoundingClientRect().height)}async function j(){k.clear(),await Ie(),t(0,r=null),t(25,le=void 0)}async function $(){k.clear_mask(),await Ie()}let Z=0,V=0,H=0,F,re,ae,ue,le;Xe(async()=>{l==="color-sketch"&&r&&typeof r=="string"&&(t(25,le=r),await Ie(),W({currentTarget:re}))});function ve(g){let G=Qi(g);G&&v("select",{index:G,value:null})}i.$$.on_mount.push(function(){r===void 0&&!("value"in e||i.$$.bound[i.$$.props.value])&&Be.warn("<Image> was created without expected prop 'value'"),a===void 0&&!("show_label"in e||i.$$.bound[i.$$.props.show_label])&&Be.warn("<Image> was created without expected prop 'show_label'"),u===void 0&&!("shape"in e||i.$$.bound[i.$$.props.shape])&&Be.warn("<Image> was created without expected prop 'shape'"),b===void 0&&!("mirror_webcam"in e||i.$$.bound[i.$$.props.mirror_webcam])&&Be.warn("<Image> was created without expected prop 'mirror_webcam'"),_===void 0&&!("brush_radius"in e||i.$$.bound[i.$$.props.brush_radius])&&Be.warn("<Image> was created without expected prop 'brush_radius'"),w===void 0&&!("mask_opacity"in e||i.$$.bound[i.$$.props.mask_opacity])&&Be.warn("<Image> was created without expected prop 'mask_opacity'"),R===void 0&&!("root"in e||i.$$.bound[i.$$.props.root])&&Be.warn("<Image> was created without expected prop 'root'")});const Me=["value","label","show_label","source","tool","shape","streaming","pending","mirror_webcam","brush_radius","brush_color","mask_opacity","selectable","root"];Object.keys(e).forEach(g=>{!~Me.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&Be.warn(`<Image> was created with unknown prop '${g}'`)});function p(g){Q[g?"unshift":"push"](()=>{P=g,t(14,P),t(0,r)})}const Qe=g=>(y(g),t(1,l="editor")),Le=()=>t(1,l="select");function mt(g){Q[g?"unshift":"push"](()=>{re=g,t(22,re)})}function Ze(g){Q[g?"unshift":"push"](()=>{k=g,t(17,k)})}function gt(g){_=g,t(2,_)}function Je(g){m=g,t(3,m)}const xe=()=>k.undo();function $e(g){_=g,t(2,_)}function et(g){m=g,t(3,m)}function tt(g){S=g,t(15,S)}const Te=()=>k.undo();function it(g){_=g,t(2,_)}function nt(g){m=g,t(3,m)}function rt(g){_=g,t(2,_)}function ot(g){m=g,t(3,m)}function st(g){Q[g?"unshift":"push"](()=>{k=g,t(17,k)})}const ye=g=>l==="color-sketch"?L(g):C(g,!0);function Pe(g){yn.call(this,i,g)}function _t(g){Q[g?"unshift":"push"](()=>{P=g,t(14,P),t(0,r)})}const We=g=>(y(g),t(1,l="editor")),bt=()=>t(1,l="select");function pt(g){Q[g?"unshift":"push"](()=>{re=g,t(22,re)})}function Ut(g){Q[g?"unshift":"push"](()=>{k=g,t(17,k)})}function Vt(g){_=g,t(2,_)}function Gt(g){m=g,t(3,m)}const qt=()=>k.undo();function Ft(g){_=g,t(2,_)}function d(g){m=g,t(3,m)}function T(){ae=this.offsetHeight,ue=this.offsetWidth,t(23,ae),t(24,ue)}return i.$$set=g=>{"value"in g&&t(0,r=g.value),"label"in g&&t(4,o=g.label),"show_label"in g&&t(5,a=g.show_label),"source"in g&&t(6,c=g.source),"tool"in g&&t(1,l=g.tool),"shape"in g&&t(7,u=g.shape),"streaming"in g&&t(8,h=g.streaming),"pending"in g&&t(9,f=g.pending),"mirror_webcam"in g&&t(10,b=g.mirror_webcam),"brush_radius"in g&&t(2,_=g.brush_radius),"brush_color"in g&&t(3,m=g.brush_color),"mask_opacity"in g&&t(11,w=g.mask_opacity),"selectable"in g&&t(12,E=g.selectable),"root"in g&&t(13,R=g.root),"$$scope"in g&&t(64,s=g.$$scope)},i.$capture_state=()=>({createEventDispatcher:Se,tick:Ie,onMount:Xe,BlockLabel:Dn,Image:xt,SketchIcon:$t,get_coordinates_of_clicked_image:Qi,Cropper:Xi,Sketch:Ht,Webcam:Hn,ModifySketch:Xt,SketchSettings:Yt,Upload:Bn,ModifyUpload:It,normalise_file:Ki,value:r,label:o,show_label:a,source:c,tool:l,shape:u,streaming:h,pending:f,mirror_webcam:b,brush_radius:_,brush_color:m,mask_opacity:w,selectable:E,root:R,sketch:k,cropper:P,handle_upload:L,handle_clear:y,handle_save:C,dispatch:v,dragging:S,value_:N,handle_image_load:W,handle_sketch_clear:j,handle_mask_clear:$,img_height:Z,img_width:V,container_height:H,mode:F,value_img:re,max_height:ae,max_width:ue,static_image:le,handle_click:ve}),i.$inject_state=g=>{"value"in g&&t(0,r=g.value),"label"in g&&t(4,o=g.label),"show_label"in g&&t(5,a=g.show_label),"source"in g&&t(6,c=g.source),"tool"in g&&t(1,l=g.tool),"shape"in g&&t(7,u=g.shape),"streaming"in g&&t(8,h=g.streaming),"pending"in g&&t(9,f=g.pending),"mirror_webcam"in g&&t(10,b=g.mirror_webcam),"brush_radius"in g&&t(2,_=g.brush_radius),"brush_color"in g&&t(3,m=g.brush_color),"mask_opacity"in g&&t(11,w=g.mask_opacity),"selectable"in g&&t(12,E=g.selectable),"root"in g&&t(13,R=g.root),"sketch"in g&&t(17,k=g.sketch),"cropper"in g&&t(14,P=g.cropper),"dragging"in g&&t(15,S=g.dragging),"value_"in g&&t(16,N=g.value_),"img_height"in g&&t(18,Z=g.img_height),"img_width"in g&&t(19,V=g.img_width),"container_height"in g&&t(20,H=g.container_height),"mode"in g&&t(21,F=g.mode),"value_img"in g&&t(22,re=g.value_img),"max_height"in g&&t(23,ae=g.max_height),"max_width"in g&&t(24,ue=g.max_width),"static_image"in g&&t(25,le=g.static_image)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),i.$$.update=()=>{i.$$.dirty[0]&32768&&v("drag",S),i.$$.dirty[0]&73729&&r!==N&&(t(16,N=r),Ki(N,R,null)),i.$$.dirty[0]&65536&&console.log(N),i.$$.dirty[0]&66&&(c==="canvas"&&l==="sketch"?t(21,F="bw-sketch"):l==="color-sketch"?t(21,F="color-sketch"):(c==="upload"||c==="webcam")&&l==="sketch"?t(21,F="mask"):t(21,F="editor")),i.$$.dirty[0]&1&&(r===null||r.image===null&&r.mask===null)&&t(25,le=void 0),i.$$.dirty[0]&16385&&P&&(r?(t(14,P.image=r,P),P.create()):P.destroy())},[r,l,_,m,o,a,c,u,h,f,b,w,E,R,P,S,N,k,Z,V,H,F,re,ae,ue,le,L,y,C,W,j,$,ve,n,p,Qe,Le,mt,Ze,gt,Je,xe,$e,et,tt,Te,it,nt,rt,ot,st,ye,Pe,_t,We,bt,pt,Ut,Vt,Gt,qt,Ft,d,T,s]}class wr extends Ve{constructor(e){super(e),Ge(this,e,xo,Ti,Ce,{value:0,label:4,show_label:5,source:6,tool:1,shape:7,streaming:8,pending:9,mirror_webcam:10,brush_radius:2,brush_color:3,mask_opacity:11,selectable:12,root:13},null,[-1,-1,-1]),O("SvelteRegisterComponent",{component:this,tagName:"Image_1",options:e,id:Ti.name})}get value(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get label(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set label(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get show_label(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set show_label(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get source(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set source(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get tool(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tool(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get shape(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set shape(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get streaming(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set streaming(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pending(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pending(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mirror_webcam(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mirror_webcam(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get brush_radius(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set brush_radius(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get brush_color(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set brush_color(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mask_opacity(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mask_opacity(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get selectable(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set selectable(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get root(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set root(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function vr(i){let e,t;e=new Nn({props:{type:"image"},$$inline:!0});const n={c:function(){X(e.$$.fragment)},m:function(r,o){Y(e,r,o),t=!0},p:Oe,i:function(r){t||(D(e.$$.fragment,r),t=!0)},o:function(r){M(e.$$.fragment,r),t=!1},d:function(r){U(e,r)}};return O("SvelteRegisterBlock",{block:n,id:vr.name,type:"slot",source:'(54:1) <Image   {brush_radius}   {brush_color}   {shape}   bind:value   {source}   {tool}   {selectable}   {mask_opacity}   {root}   on:edit={() => gradio.dispatch(\\"edit\\")}   on:clear={() => gradio.dispatch(\\"clear\\")}   on:stream={() => gradio.dispatch(\\"stream\\")}   on:drag={({ detail }) => (dragging = detail)}   on:upload={() => gradio.dispatch(\\"upload\\")}   on:select={({ detail }) => gradio.dispatch(\\"select\\", detail)}   on:share={({ detail }) => gradio.dispatch(\\"share\\", detail)}   on:error={({ detail }) => {    loading_status = loading_status || {};    loading_status.status = \\"error\\";    gradio.dispatch(\\"error\\", detail);   }}   {label}   {show_label}   {pending}   {streaming}   {mirror_webcam}  >',ctx:i}),n}function yr(i){let e,t,n,s,r;const o=[i[1]];let a={};for(let h=0;h<o.length;h+=1)a=Ar(a,o[h]);e=new En({props:a,$$inline:!0});function c(h){i[25](h)}let l={brush_radius:i[15],brush_color:i[16],shape:i[14],source:i[5],tool:i[6],selectable:i[18],mask_opacity:i[17],root:i[22],label:i[7],show_label:i[8],pending:i[10],streaming:i[9],mirror_webcam:i[13],$$slots:{default:[vr]},$$scope:{ctx:i}};i[0]!==void 0&&(l.value=i[0]),n=new wr({props:l,$$inline:!0}),Q.push(()=>me(n,"value",c)),n.$on("edit",i[26]),n.$on("clear",i[27]),n.$on("stream",i[28]),n.$on("drag",i[29]),n.$on("upload",i[30]),n.$on("select",i[31]),n.$on("share",i[32]),n.$on("error",i[33]);const u={c:function(){X(e.$$.fragment),t=ne(),X(n.$$.fragment)},m:function(f,b){Y(e,f,b),A(f,t,b),Y(n,f,b),r=!0},p:function(f,b){const _=b[0]&2?Br(o,[Nr(f[1])]):{};e.$set(_);const m={};b[0]&32768&&(m.brush_radius=f[15]),b[0]&65536&&(m.brush_color=f[16]),b[0]&16384&&(m.shape=f[14]),b[0]&32&&(m.source=f[5]),b[0]&64&&(m.tool=f[6]),b[0]&262144&&(m.selectable=f[18]),b[0]&131072&&(m.mask_opacity=f[17]),b[0]&4194304&&(m.root=f[22]),b[0]&128&&(m.label=f[7]),b[0]&256&&(m.show_label=f[8]),b[0]&1024&&(m.pending=f[10]),b[0]&512&&(m.streaming=f[9]),b[0]&8192&&(m.mirror_webcam=f[13]),b[1]&8&&(m.$$scope={dirty:b,ctx:f}),!s&&b[0]&1&&(s=!0,m.value=f[0],ge(()=>s=!1)),n.$set(m)},i:function(f){r||(D(e.$$.fragment,f),D(n.$$.fragment,f),r=!0)},o:function(f){M(e.$$.fragment,f),M(n.$$.fragment,f),r=!1},d:function(f){f&&B(t),U(e,f),U(n,f)}};return O("SvelteRegisterBlock",{block:u,id:yr.name,type:"slot",source:'(38:0) <Block  {visible}  variant={value === null && source === \\"upload\\" ? \\"dashed\\" : \\"solid\\"}  border_mode={dragging ? \\"focus\\" : \\"base\\"}  padding={false}  {elem_id}  {elem_classes}  height={height || (source === \\"webcam\\" ? undefined : FIXED_HEIGHT)}  {width}  allow_overflow={false}  {container}  {scale}  {min_width} >',ctx:i}),u}function Pi(i){let e,t;e=new Sn({props:{visible:i[4],variant:i[0]===null&&i[5]==="upload"?"dashed":"solid",border_mode:i[24]?"focus":"base",padding:!1,elem_id:i[2],elem_classes:i[3],height:i[11]||(i[5]==="webcam"?void 0:Ai),width:i[12],allow_overflow:!1,container:i[19],scale:i[20],min_width:i[21],$$slots:{default:[yr]},$$scope:{ctx:i}},$$inline:!0});const n={c:function(){X(e.$$.fragment)},l:function(r){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(r,o){Y(e,r,o),t=!0},p:function(r,o){const a={};o[0]&16&&(a.visible=r[4]),o[0]&33&&(a.variant=r[0]===null&&r[5]==="upload"?"dashed":"solid"),o[0]&16777216&&(a.border_mode=r[24]?"focus":"base"),o[0]&4&&(a.elem_id=r[2]),o[0]&8&&(a.elem_classes=r[3]),o[0]&2080&&(a.height=r[11]||(r[5]==="webcam"?void 0:Ai)),o[0]&4096&&(a.width=r[12]),o[0]&524288&&(a.container=r[19]),o[0]&1048576&&(a.scale=r[20]),o[0]&2097152&&(a.min_width=r[21]),o[0]&29878243|o[1]&8&&(a.$$scope={dirty:o,ctx:r}),e.$set(a)},i:function(r){t||(D(e.$$.fragment,r),t=!0)},o:function(r){M(e.$$.fragment,r),t=!1},d:function(r){U(e,r)}};return O("SvelteRegisterBlock",{block:n,id:Pi.name,type:"component",source:"",ctx:i}),n}const Ai=240;function $o(i,e,t){let{$$slots:n={},$$scope:s}=e;qe("InteractiveImage",n,[]);let{elem_id:r=""}=e,{elem_classes:o=[]}=e,{visible:a=!0}=e,{value:c=null}=e,{source:l="upload"}=e,{tool:u="editor"}=e,{label:h}=e,{show_label:f}=e,{streaming:b}=e,{pending:_}=e,{height:m}=e,{width:w}=e,{mirror_webcam:E}=e,{shape:R}=e,{brush_radius:k}=e,{brush_color:P}=e,{mask_opacity:L}=e,{selectable:y=!1}=e,{container:C=!0}=e,{scale:v=null}=e,{min_width:S=void 0}=e,{loading_status:N}=e,{root:W}=e,{gradio:j}=e,$;i.$$.on_mount.push(function(){h===void 0&&!("label"in e||i.$$.bound[i.$$.props.label])&&console.warn("<InteractiveImage> was created without expected prop 'label'"),f===void 0&&!("show_label"in e||i.$$.bound[i.$$.props.show_label])&&console.warn("<InteractiveImage> was created without expected prop 'show_label'"),b===void 0&&!("streaming"in e||i.$$.bound[i.$$.props.streaming])&&console.warn("<InteractiveImage> was created without expected prop 'streaming'"),_===void 0&&!("pending"in e||i.$$.bound[i.$$.props.pending])&&console.warn("<InteractiveImage> was created without expected prop 'pending'"),m===void 0&&!("height"in e||i.$$.bound[i.$$.props.height])&&console.warn("<InteractiveImage> was created without expected prop 'height'"),w===void 0&&!("width"in e||i.$$.bound[i.$$.props.width])&&console.warn("<InteractiveImage> was created without expected prop 'width'"),E===void 0&&!("mirror_webcam"in e||i.$$.bound[i.$$.props.mirror_webcam])&&console.warn("<InteractiveImage> was created without expected prop 'mirror_webcam'"),R===void 0&&!("shape"in e||i.$$.bound[i.$$.props.shape])&&console.warn("<InteractiveImage> was created without expected prop 'shape'"),k===void 0&&!("brush_radius"in e||i.$$.bound[i.$$.props.brush_radius])&&console.warn("<InteractiveImage> was created without expected prop 'brush_radius'"),P===void 0&&!("brush_color"in e||i.$$.bound[i.$$.props.brush_color])&&console.warn("<InteractiveImage> was created without expected prop 'brush_color'"),L===void 0&&!("mask_opacity"in e||i.$$.bound[i.$$.props.mask_opacity])&&console.warn("<InteractiveImage> was created without expected prop 'mask_opacity'"),N===void 0&&!("loading_status"in e||i.$$.bound[i.$$.props.loading_status])&&console.warn("<InteractiveImage> was created without expected prop 'loading_status'"),W===void 0&&!("root"in e||i.$$.bound[i.$$.props.root])&&console.warn("<InteractiveImage> was created without expected prop 'root'"),j===void 0&&!("gradio"in e||i.$$.bound[i.$$.props.gradio])&&console.warn("<InteractiveImage> was created without expected prop 'gradio'")});const Z=["elem_id","elem_classes","visible","value","source","tool","label","show_label","streaming","pending","height","width","mirror_webcam","shape","brush_radius","brush_color","mask_opacity","selectable","container","scale","min_width","loading_status","root","gradio"];Object.keys(e).forEach(p=>{!~Z.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<InteractiveImage> was created with unknown prop '${p}'`)});function V(p){c=p,t(0,c)}const H=()=>j.dispatch("edit"),F=()=>j.dispatch("clear"),re=()=>j.dispatch("stream"),ae=({detail:p})=>t(24,$=p),ue=()=>j.dispatch("upload"),le=({detail:p})=>j.dispatch("select",p),ve=({detail:p})=>j.dispatch("share",p),Me=({detail:p})=>{t(1,N=N||{}),t(1,N.status="error",N),j.dispatch("error",p)};return i.$$set=p=>{"elem_id"in p&&t(2,r=p.elem_id),"elem_classes"in p&&t(3,o=p.elem_classes),"visible"in p&&t(4,a=p.visible),"value"in p&&t(0,c=p.value),"source"in p&&t(5,l=p.source),"tool"in p&&t(6,u=p.tool),"label"in p&&t(7,h=p.label),"show_label"in p&&t(8,f=p.show_label),"streaming"in p&&t(9,b=p.streaming),"pending"in p&&t(10,_=p.pending),"height"in p&&t(11,m=p.height),"width"in p&&t(12,w=p.width),"mirror_webcam"in p&&t(13,E=p.mirror_webcam),"shape"in p&&t(14,R=p.shape),"brush_radius"in p&&t(15,k=p.brush_radius),"brush_color"in p&&t(16,P=p.brush_color),"mask_opacity"in p&&t(17,L=p.mask_opacity),"selectable"in p&&t(18,y=p.selectable),"container"in p&&t(19,C=p.container),"scale"in p&&t(20,v=p.scale),"min_width"in p&&t(21,S=p.min_width),"loading_status"in p&&t(1,N=p.loading_status),"root"in p&&t(22,W=p.root),"gradio"in p&&t(23,j=p.gradio)},i.$capture_state=()=>({Image:wr,Block:Sn,_:Pt,StatusTracker:En,UploadText:Nn,elem_id:r,elem_classes:o,visible:a,value:c,source:l,tool:u,label:h,show_label:f,streaming:b,pending:_,height:m,width:w,mirror_webcam:E,shape:R,brush_radius:k,brush_color:P,mask_opacity:L,selectable:y,container:C,scale:v,min_width:S,loading_status:N,root:W,gradio:j,dragging:$,FIXED_HEIGHT:Ai}),i.$inject_state=p=>{"elem_id"in p&&t(2,r=p.elem_id),"elem_classes"in p&&t(3,o=p.elem_classes),"visible"in p&&t(4,a=p.visible),"value"in p&&t(0,c=p.value),"source"in p&&t(5,l=p.source),"tool"in p&&t(6,u=p.tool),"label"in p&&t(7,h=p.label),"show_label"in p&&t(8,f=p.show_label),"streaming"in p&&t(9,b=p.streaming),"pending"in p&&t(10,_=p.pending),"height"in p&&t(11,m=p.height),"width"in p&&t(12,w=p.width),"mirror_webcam"in p&&t(13,E=p.mirror_webcam),"shape"in p&&t(14,R=p.shape),"brush_radius"in p&&t(15,k=p.brush_radius),"brush_color"in p&&t(16,P=p.brush_color),"mask_opacity"in p&&t(17,L=p.mask_opacity),"selectable"in p&&t(18,y=p.selectable),"container"in p&&t(19,C=p.container),"scale"in p&&t(20,v=p.scale),"min_width"in p&&t(21,S=p.min_width),"loading_status"in p&&t(1,N=p.loading_status),"root"in p&&t(22,W=p.root),"gradio"in p&&t(23,j=p.gradio),"dragging"in p&&t(24,$=p.dragging)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),i.$$.update=()=>{i.$$.dirty[0]&1&&t(0,c=c||null),i.$$.dirty[0]&8388609&&j.dispatch("change")},[c,N,r,o,a,l,u,h,f,b,_,m,w,E,R,k,P,L,y,C,v,S,W,j,$,V,H,F,re,ae,ue,le,ve,Me]}class es extends Ve{constructor(e){super(e),Ge(this,e,$o,Pi,Ce,{elem_id:2,elem_classes:3,visible:4,value:0,source:5,tool:6,label:7,show_label:8,streaming:9,pending:10,height:11,width:12,mirror_webcam:13,shape:14,brush_radius:15,brush_color:16,mask_opacity:17,selectable:18,container:19,scale:20,min_width:21,loading_status:1,root:22,gradio:23},null,[-1,-1]),O("SvelteRegisterComponent",{component:this,tagName:"InteractiveImage",options:e,id:Pi.name})}get elem_id(){return this.$$.ctx[2]}set elem_id(e){this.$$set({elem_id:e}),K()}get elem_classes(){return this.$$.ctx[3]}set elem_classes(e){this.$$set({elem_classes:e}),K()}get visible(){return this.$$.ctx[4]}set visible(e){this.$$set({visible:e}),K()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),K()}get source(){return this.$$.ctx[5]}set source(e){this.$$set({source:e}),K()}get tool(){return this.$$.ctx[6]}set tool(e){this.$$set({tool:e}),K()}get label(){return this.$$.ctx[7]}set label(e){this.$$set({label:e}),K()}get show_label(){return this.$$.ctx[8]}set show_label(e){this.$$set({show_label:e}),K()}get streaming(){return this.$$.ctx[9]}set streaming(e){this.$$set({streaming:e}),K()}get pending(){return this.$$.ctx[10]}set pending(e){this.$$set({pending:e}),K()}get height(){return this.$$.ctx[11]}set height(e){this.$$set({height:e}),K()}get width(){return this.$$.ctx[12]}set width(e){this.$$set({width:e}),K()}get mirror_webcam(){return this.$$.ctx[13]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),K()}get shape(){return this.$$.ctx[14]}set shape(e){this.$$set({shape:e}),K()}get brush_radius(){return this.$$.ctx[15]}set brush_radius(e){this.$$set({brush_radius:e}),K()}get brush_color(){return this.$$.ctx[16]}set brush_color(e){this.$$set({brush_color:e}),K()}get mask_opacity(){return this.$$.ctx[17]}set mask_opacity(e){this.$$set({mask_opacity:e}),K()}get selectable(){return this.$$.ctx[18]}set selectable(e){this.$$set({selectable:e}),K()}get container(){return this.$$.ctx[19]}set container(e){this.$$set({container:e}),K()}get scale(){return this.$$.ctx[20]}set scale(e){this.$$set({scale:e}),K()}get min_width(){return this.$$.ctx[21]}set min_width(e){this.$$set({min_width:e}),K()}get loading_status(){return this.$$.ctx[1]}set loading_status(e){this.$$set({loading_status:e}),K()}get root(){return this.$$.ctx[22]}set root(e){this.$$set({root:e}),K()}get gradio(){return this.$$.ctx[23]}set gradio(e){this.$$set({gradio:e}),K()}}const ds=es;export{ds as I,Hn as W};
//# sourceMappingURL=InteractiveImage-e2bd75e4.js.map
