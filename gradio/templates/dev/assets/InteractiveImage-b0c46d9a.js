import{SvelteComponentDev as ve,init as ye,safe_not_equal as me,dispatch_dev as R,validate_slots as ke,svg_element as oe,attr_dev as w,add_location as B,insert_dev as I,append_dev as ie,noop as X,detach_dev as T,validate_store as Lr,component_subscribe as Wr,createEventDispatcher as Te,onMount as Ge,globals as qi,element as ne,space as se,toggle_class as Z,transition_in as D,group_outros as Ee,transition_out as C,check_outros as Se,binding_callbacks as J,listen_dev as ce,is_function as Hr,create_component as Y,mount_component as V,destroy_component as q,empty as Ke,flush as Q,src_url_equal as pe,ensure_array_like_dev as tn,tick as Ae,onDestroy as nn,add_render_callback as Gi,add_iframe_resize_listener as Nn,destroy_each as Ur,bubble as zn,create_bidirectional_transition as rn,set_style as on,stop_propagation as Xr,run_all as jn,to_number as Yr,set_input_value as zt,bind as we,add_flush_callback as be,create_slot as Vr,update_slot_base as qr,get_all_dirty_from_scope as Gr,get_slot_changes as Fr,assign as Zr,get_spread_update as Kr,get_spread_object as Qr}from"../../../node/dev/svelte-internal.js";import{X as At,S as Ln}from"./index-168e7816.js";import{f as ti,n as sn,B as Wn}from"./Button-e33227ec.js";import{B as Hn}from"./BlockLabel-2ee7f826.js";import{I as ii}from"./Image-51aa0ec9.js";import{g as an}from"./utils-90f3612b.js";import{I as Fe}from"./IconButton-f58f3320.js";import{C as Un,M as Ot}from"./ModifyUpload-ddf21bcf.js";import{U as Xn}from"./Undo-a5938b87.js";import{U as Yn}from"./Upload-316178cb.js";import{U as Vn}from"./UploadText-f2d3bf08.js";const Qt="Users/peterallen/Projects/gradio/js/icons/src/Brush.svelte";function ni(i){let e,t,n;const s={c:function(){e=oe("svg"),t=oe("path"),n=oe("path"),w(t,"d","M28.828 3.172a4.094 4.094 0 0 0-5.656 0L4.05 22.292A6.954 6.954 0 0 0 2 27.242V30h2.756a6.952 6.952 0 0 0 4.95-2.05L28.828 8.829a3.999 3.999 0 0 0 0-5.657zM10.91 18.26l2.829 2.829l-2.122 2.121l-2.828-2.828zm-2.619 8.276A4.966 4.966 0 0 1 4.756 28H4v-.759a4.967 4.967 0 0 1 1.464-3.535l1.91-1.91l2.829 2.828zM27.415 7.414l-12.261 12.26l-2.829-2.828l12.262-12.26a2.047 2.047 0 0 1 2.828 0a2 2 0 0 1 0 2.828z"),w(t,"fill","currentColor"),B(t,Qt,1,1,54),w(n,"d","M6.5 15a3.5 3.5 0 0 1-2.475-5.974l3.5-3.5a1.502 1.502 0 0 0 0-2.121a1.537 1.537 0 0 0-2.121 0L3.415 5.394L2 3.98l1.99-1.988a3.585 3.585 0 0 1 4.95 0a3.504 3.504 0 0 1 0 4.949L5.439 10.44a1.502 1.502 0 0 0 0 2.121a1.537 1.537 0 0 0 2.122 0l4.024-4.024L13 9.95l-4.025 4.024A3.475 3.475 0 0 1 6.5 15z"),w(n,"fill","currentColor"),B(n,Qt,5,1,499),w(e,"width","100%"),w(e,"height","100%"),w(e,"viewBox","0 0 32 32"),B(e,Qt,0,0,0)},l:function(o){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,a){I(o,e,a),ie(e,t),ie(e,n)},p:X,i:X,o:X,d:function(o){o&&T(e)}};return R("SvelteRegisterBlock",{block:s,id:ni.name,type:"component",source:"",ctx:i}),s}function Jr(i,e){let{$$slots:t={},$$scope:n}=e;ke("Brush",t,[]);const s=[];return Object.keys(e).forEach(r=>{!~s.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<Brush> was created with unknown prop '${r}'`)}),[]}class qn extends ve{constructor(e){super(e),ye(this,e,Jr,ni,me,{}),R("SvelteRegisterComponent",{component:this,tagName:"Brush",options:e,id:ni.name})}}const Jt="Users/peterallen/Projects/gradio/js/icons/src/Camera.svelte";function ri(i){let e,t,n;const s={c:function(){e=oe("svg"),t=oe("path"),n=oe("circle"),w(t,"d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"),B(t,Jt,12,1,231),w(n,"cx","12"),w(n,"cy","13"),w(n,"r","4"),B(n,Jt,15,1,330),w(e,"xmlns","http://www.w3.org/2000/svg"),w(e,"width","100%"),w(e,"height","100%"),w(e,"viewBox","0 0 24 24"),w(e,"fill","none"),w(e,"stroke","currentColor"),w(e,"stroke-width","1.5"),w(e,"stroke-linecap","round"),w(e,"stroke-linejoin","round"),w(e,"class","feather feather-camera"),B(e,Jt,0,0,0)},l:function(o){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,a){I(o,e,a),ie(e,t),ie(e,n)},p:X,i:X,o:X,d:function(o){o&&T(e)}};return R("SvelteRegisterBlock",{block:s,id:ri.name,type:"component",source:"",ctx:i}),s}function xr(i,e){let{$$slots:t={},$$scope:n}=e;ke("Camera",t,[]);const s=[];return Object.keys(e).forEach(r=>{!~s.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<Camera> was created with unknown prop '${r}'`)}),[]}class Gn extends ve{constructor(e){super(e),ye(this,e,xr,ri,me,{}),R("SvelteRegisterComponent",{component:this,tagName:"Camera",options:e,id:ri.name})}}const cn="Users/peterallen/Projects/gradio/js/icons/src/Circle.svelte";function oi(i){let e,t;const n={c:function(){e=oe("svg"),t=oe("circle"),w(t,"cx","12"),w(t,"cy","12"),w(t,"r","10"),B(t,cn,12,1,221),w(e,"xmlns","http://www.w3.org/2000/svg"),w(e,"width","100%"),w(e,"height","100%"),w(e,"viewBox","0 0 24 24"),w(e,"fill","red"),w(e,"stroke","red"),w(e,"stroke-width","1.5"),w(e,"stroke-linecap","round"),w(e,"stroke-linejoin","round"),w(e,"class","feather feather-circle"),B(e,cn,0,0,0)},l:function(r){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(r,o){I(r,e,o),ie(e,t)},p:X,i:X,o:X,d:function(r){r&&T(e)}};return R("SvelteRegisterBlock",{block:n,id:oi.name,type:"component",source:"",ctx:i}),n}function $r(i,e){let{$$slots:t={},$$scope:n}=e;ke("Circle",t,[]);const s=[];return Object.keys(e).forEach(r=>{!~s.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<Circle> was created with unknown prop '${r}'`)}),[]}class Fn extends ve{constructor(e){super(e),ye(this,e,$r,oi,me,{}),R("SvelteRegisterComponent",{component:this,tagName:"Circle",options:e,id:oi.name})}}const Ye="Users/peterallen/Projects/gradio/js/icons/src/Color.svelte";function si(i){let e,t,n,s,r,o,a;const c={c:function(){e=oe("svg"),t=oe("circle"),n=oe("circle"),s=oe("circle"),r=oe("circle"),o=oe("circle"),a=oe("path"),w(t,"cx","10"),w(t,"cy","12"),w(t,"r","2"),w(t,"fill","currentColor"),B(t,Ye,1,1,54),w(n,"cx","16"),w(n,"cy","9"),w(n,"r","2"),w(n,"fill","currentColor"),B(n,Ye,2,1,108),w(s,"cx","22"),w(s,"cy","12"),w(s,"r","2"),w(s,"fill","currentColor"),B(s,Ye,3,1,161),w(r,"cx","23"),w(r,"cy","18"),w(r,"r","2"),w(r,"fill","currentColor"),B(r,Ye,4,1,215),w(o,"cx","19"),w(o,"cy","23"),w(o,"r","2"),w(o,"fill","currentColor"),B(o,Ye,5,1,269),w(a,"fill","currentColor"),w(a,"d","M16.54 2A14 14 0 0 0 2 16a4.82 4.82 0 0 0 6.09 4.65l1.12-.31a3 3 0 0 1 3.79 2.9V27a3 3 0 0 0 3 3a14 14 0 0 0 14-14.54A14.05 14.05 0 0 0 16.54 2Zm8.11 22.31A11.93 11.93 0 0 1 16 28a1 1 0 0 1-1-1v-3.76a5 5 0 0 0-5-5a5.07 5.07 0 0 0-1.33.18l-1.12.31A2.82 2.82 0 0 1 4 16A12 12 0 0 1 16.47 4A12.18 12.18 0 0 1 28 15.53a11.89 11.89 0 0 1-3.35 8.79Z"),B(a,Ye,6,1,323),w(e,"width","100%"),w(e,"height","100%"),w(e,"viewBox","0 0 32 32"),B(e,Ye,0,0,0)},l:function(u){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(u,h){I(u,e,h),ie(e,t),ie(e,n),ie(e,s),ie(e,r),ie(e,o),ie(e,a)},p:X,i:X,o:X,d:function(u){u&&T(e)}};return R("SvelteRegisterBlock",{block:c,id:si.name,type:"component",source:"",ctx:i}),c}function eo(i,e){let{$$slots:t={},$$scope:n}=e;ke("Color",t,[]);const s=[];return Object.keys(e).forEach(r=>{!~s.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<Color> was created with unknown prop '${r}'`)}),[]}class Zn extends ve{constructor(e){super(e),ye(this,e,eo,si,me,{}),R("SvelteRegisterComponent",{component:this,tagName:"Color",options:e,id:si.name})}}const ln="Users/peterallen/Projects/gradio/js/icons/src/Erase.svelte";function ai(i){let e,t;const n={c:function(){e=oe("svg"),t=oe("path"),w(t,"fill","currentColor"),w(t,"d","M7 27h23v2H7zm20.38-16.49l-7.93-7.92a2 2 0 0 0-2.83 0l-14 14a2 2 0 0 0 0 2.83L7.13 24h9.59l10.66-10.66a2 2 0 0 0 0-2.83zM15.89 22H8l-4-4l6.31-6.31l7.93 7.92zm3.76-3.76l-7.92-7.93L18 4l8 7.93z"),B(t,ln,5,2,93),w(e,"xmlns","http://www.w3.org/2000/svg"),w(e,"width","100%"),w(e,"height","100%"),w(e,"viewBox","0 0 32 32"),B(e,ln,0,0,0)},l:function(r){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(r,o){I(r,e,o),ie(e,t)},p:X,i:X,o:X,d:function(r){r&&T(e)}};return R("SvelteRegisterBlock",{block:n,id:ai.name,type:"component",source:"",ctx:i}),n}function to(i,e){let{$$slots:t={},$$scope:n}=e;ke("Erase",t,[]);const s=[];return Object.keys(e).forEach(r=>{!~s.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<Erase> was created with unknown prop '${r}'`)}),[]}class Kn extends ve{constructor(e){super(e),ye(this,e,to,ai,me,{}),R("SvelteRegisterComponent",{component:this,tagName:"Erase",options:e,id:ai.name})}}const un="Users/peterallen/Projects/gradio/js/icons/src/Sketch.svelte";function ci(i){let e,t;const n={c:function(){e=oe("svg"),t=oe("path"),w(t,"d","M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"),B(t,un,12,1,231),w(e,"xmlns","http://www.w3.org/2000/svg"),w(e,"width","100%"),w(e,"height","100%"),w(e,"viewBox","0 0 24 24"),w(e,"fill","none"),w(e,"stroke","currentColor"),w(e,"stroke-width","1.5"),w(e,"stroke-linecap","round"),w(e,"stroke-linejoin","round"),w(e,"class","feather feather-edit-2"),B(e,un,0,0,0)},l:function(r){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(r,o){I(r,e,o),ie(e,t)},p:X,i:X,o:X,d:function(r){r&&T(e)}};return R("SvelteRegisterBlock",{block:n,id:ci.name,type:"component",source:"",ctx:i}),n}function io(i,e){let{$$slots:t={},$$scope:n}=e;ke("Sketch",t,[]);const s=[];return Object.keys(e).forEach(r=>{!~s.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<Sketch> was created with unknown prop '${r}'`)}),[]}let li=class extends ve{constructor(e){super(e),ye(this,e,io,ci,me,{}),R("SvelteRegisterComponent",{component:this,tagName:"Sketch",options:e,id:ci.name})}};const hn="Users/peterallen/Projects/gradio/js/icons/src/Square.svelte";function ui(i){let e,t;const n={c:function(){e=oe("svg"),t=oe("rect"),w(t,"x","3"),w(t,"y","3"),w(t,"width","18"),w(t,"height","18"),w(t,"rx","2"),w(t,"ry","2"),B(t,hn,12,1,221),w(e,"xmlns","http://www.w3.org/2000/svg"),w(e,"width","100%"),w(e,"height","100%"),w(e,"viewBox","0 0 24 24"),w(e,"fill","red"),w(e,"stroke","red"),w(e,"stroke-width","1.5"),w(e,"stroke-linecap","round"),w(e,"stroke-linejoin","round"),w(e,"class","feather feather-square"),B(e,hn,0,0,0)},l:function(r){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(r,o){I(r,e,o),ie(e,t)},p:X,i:X,o:X,d:function(r){r&&T(e)}};return R("SvelteRegisterBlock",{block:n,id:ui.name,type:"component",source:"",ctx:i}),n}function no(i,e){let{$$slots:t={},$$scope:n}=e;ke("Square",t,[]);const s=[];return Object.keys(e).forEach(r=>{!~s.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<Square> was created with unknown prop '${r}'`)}),[]}class Qn extends ve{constructor(e){super(e),ye(this,e,no,ui,me,{}),R("SvelteRegisterComponent",{component:this,tagName:"Square",options:e,id:ui.name})}}const{console:xt}=qi,mt="Users/peterallen/Projects/gradio/js/image/interactive/Webcam.svelte";function hi(i){let e,t,n,s,r,o;const a=[xn,Jn],c=[];function l(h,f){return h[1]==="video"?0:1}t=l(i),n=c[t]=a[t](i);const u={c:function(){e=ne("button"),n.c(),w(e,"class","svelte-1cyu66t"),B(e,mt,131,2,3198)},m:function(f,p){I(f,e,p),c[t].m(e,null),s=!0,r||(o=ce(e,"click",function(){Hr(i[1]==="image"?i[5]:i[6])&&(i[1]==="image"?i[5]:i[6]).apply(this,arguments)},!1,!1,!1,!1),r=!0)},p:function(f,p){i=f;let _=t;t=l(i),t===_?c[t].p(i,p):(Ee(),C(c[_],1,1,()=>{c[_]=null}),Se(),n=c[t],n?n.p(i,p):(n=c[t]=a[t](i),n.c()),D(n,1),n.m(e,null))},i:function(f){s||(D(n),s=!0)},o:function(f){C(n),s=!1},d:function(f){f&&T(e),c[t].d(),r=!1,o()}};return R("SvelteRegisterBlock",{block:u,id:hi.name,type:"if",source:"(102:1) {#if !streaming}",ctx:i}),u}function Jn(i){let e,t,n;t=new Gn({$$inline:!0});const s={c:function(){e=ne("div"),Y(t.$$.fragment),w(e,"class","icon svelte-1cyu66t"),B(e,mt,143,4,3456)},m:function(o,a){I(o,e,a),V(t,e,null),n=!0},p:X,i:function(o){n||(D(t.$$.fragment,o),n=!0)},o:function(o){C(t.$$.fragment,o),n=!1},d:function(o){o&&T(e),q(t)}};return R("SvelteRegisterBlock",{block:s,id:Jn.name,type:"else",source:"(114:3) {:else}",ctx:i}),s}function xn(i){let e,t,n,s;const r=[er,$n],o=[];function a(l,u){return l[4]?0:1}e=a(i),t=o[e]=r[e](i);const c={c:function(){t.c(),n=Ke()},m:function(u,h){o[e].m(u,h),I(u,n,h),s=!0},p:function(u,h){let f=e;e=a(u),e!==f&&(Ee(),C(o[f],1,1,()=>{o[f]=null}),Se(),t=o[e],t||(t=o[e]=r[e](u),t.c()),D(t,1),t.m(n.parentNode,n))},i:function(u){s||(D(t),s=!0)},o:function(u){C(t),s=!1},d:function(u){u&&T(n),o[e].d(u)}};return R("SvelteRegisterBlock",{block:c,id:xn.name,type:"if",source:'(104:3) {#if mode === \\"video\\"}',ctx:i}),c}function $n(i){let e,t,n;t=new Fn({$$inline:!0});const s={c:function(){e=ne("div"),Y(t.$$.fragment),w(e,"class","icon svelte-1cyu66t"),B(e,mt,138,5,3383)},m:function(o,a){I(o,e,a),V(t,e,null),n=!0},i:function(o){n||(D(t.$$.fragment,o),n=!0)},o:function(o){C(t.$$.fragment,o),n=!1},d:function(o){o&&T(e),q(t)}};return R("SvelteRegisterBlock",{block:s,id:$n.name,type:"else",source:"(109:4) {:else}",ctx:i}),s}function er(i){let e,t,n;t=new Qn({$$inline:!0});const s={c:function(){e=ne("div"),Y(t.$$.fragment),w(e,"class","icon svelte-1cyu66t"),B(e,mt,134,5,3318)},m:function(o,a){I(o,e,a),V(t,e,null),n=!0},i:function(o){n||(D(t.$$.fragment,o),n=!0)},o:function(o){C(t.$$.fragment,o),n=!1},d:function(o){o&&T(e),q(t)}};return R("SvelteRegisterBlock",{block:s,id:er.name,type:"if",source:"(105:4) {#if recording}",ctx:i}),s}function fi(i){let e,t,n,s,r=!i[0]&&hi(i);const o={c:function(){e=ne("div"),t=ne("video"),n=se(),r&&r.c(),w(t,"class","svelte-1cyu66t"),Z(t,"flip",i[2]),B(t,mt,129,1,3116),w(e,"class","wrap svelte-1cyu66t"),B(e,mt,127,0,3049)},l:function(c){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(c,l){I(c,e,l),ie(e,t),i[9](t),ie(e,n),r&&r.m(e,null),s=!0},p:function(c,[l]){(!s||l&4)&&Z(t,"flip",c[2]),c[0]?r&&(Ee(),C(r,1,1,()=>{r=null}),Se()):r?(r.p(c,l),l&1&&D(r,1)):(r=hi(c),r.c(),D(r,1),r.m(e,null))},i:function(c){s||(D(r),s=!0)},o:function(c){C(r),s=!1},d:function(c){c&&T(e),i[9](null),r&&r.d()}};return R("SvelteRegisterBlock",{block:o,id:fi.name,type:"component",source:"",ctx:i}),o}function ro(i,e,t){let n;Lr(At,"_"),Wr(i,At,y=>t(15,n=y));let{$$slots:s={},$$scope:r}=e;ke("Webcam",s,[]);let o,a,{streaming:c=!1}=e,{pending:l=!1}=e,{mode:u="image"}=e,{mirror_webcam:h}=e,{include_audio:f}=e;const p=Te();Ge(()=>a=document.createElement("canvas"));async function _(){try{O=await navigator.mediaDevices.getUserMedia({video:!0,audio:f}),t(3,o.srcObject=O,o),t(3,o.muted=!0,o),o.play()}catch(y){if(y instanceof DOMException&&y.name=="NotAllowedError")p("error",n("image.allow_webcam_access"));else throw y}}function m(){var y=a.getContext("2d");if(o.videoWidth&&o.videoHeight){a.width=o.videoWidth,a.height=o.videoHeight,y.drawImage(o,0,0,o.videoWidth,o.videoHeight);var M=a.toDataURL("image/png");p(c?"stream":"capture",M)}}let v=!1,S=[],O,E,N;function L(){if(v){N.stop();let y=new Blob(S,{type:E}),M=new FileReader;M.onload=function(z){z.target&&(p("capture",{data:z.target.result,name:"sample."+E.substring(6),is_example:!1,is_file:!1}),p("stop_recording"))},M.readAsDataURL(y)}else{p("start_recording"),S=[];let y=["video/webm","video/mp4"];for(let M of y)if(MediaRecorder.isTypeSupported(M)){E=M;break}if(E===null){console.error("No supported MediaRecorder mimeType");return}N=new MediaRecorder(O,{mimeType:E}),N.addEventListener("dataavailable",function(M){S.push(M.data)}),N.start(200)}t(4,v=!v)}_(),c&&u==="image"&&window.setInterval(()=>{o&&!l&&m()},500),i.$$.on_mount.push(function(){h===void 0&&!("mirror_webcam"in e||i.$$.bound[i.$$.props.mirror_webcam])&&xt.warn("<Webcam> was created without expected prop 'mirror_webcam'"),f===void 0&&!("include_audio"in e||i.$$.bound[i.$$.props.include_audio])&&xt.warn("<Webcam> was created without expected prop 'include_audio'")});const k=["streaming","pending","mode","mirror_webcam","include_audio"];Object.keys(e).forEach(y=>{!~k.indexOf(y)&&y.slice(0,2)!=="$$"&&y!=="slot"&&xt.warn(`<Webcam> was created with unknown prop '${y}'`)});function P(y){J[y?"unshift":"push"](()=>{o=y,t(3,o)})}return i.$$set=y=>{"streaming"in y&&t(0,c=y.streaming),"pending"in y&&t(7,l=y.pending),"mode"in y&&t(1,u=y.mode),"mirror_webcam"in y&&t(2,h=y.mirror_webcam),"include_audio"in y&&t(8,f=y.include_audio)},i.$capture_state=()=>({createEventDispatcher:Te,onMount:Ge,Camera:Gn,Circle:Fn,Square:Qn,_:At,video_source:o,canvas:a,streaming:c,pending:l,mode:u,mirror_webcam:h,include_audio:f,dispatch:p,access_webcam:_,take_picture:m,recording:v,recorded_blobs:S,stream:O,mimeType:E,media_recorder:N,take_recording:L,$_:n}),i.$inject_state=y=>{"video_source"in y&&t(3,o=y.video_source),"canvas"in y&&(a=y.canvas),"streaming"in y&&t(0,c=y.streaming),"pending"in y&&t(7,l=y.pending),"mode"in y&&t(1,u=y.mode),"mirror_webcam"in y&&t(2,h=y.mirror_webcam),"include_audio"in y&&t(8,f=y.include_audio),"recording"in y&&t(4,v=y.recording),"recorded_blobs"in y&&(S=y.recorded_blobs),"stream"in y&&(O=y.stream),"mimeType"in y&&(E=y.mimeType),"media_recorder"in y&&(N=y.media_recorder)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),[c,u,h,o,v,m,L,l,f,P]}class oo extends ve{constructor(e){super(e),ye(this,e,ro,fi,me,{streaming:0,pending:7,mode:1,mirror_webcam:2,include_audio:8}),R("SvelteRegisterComponent",{component:this,tagName:"Webcam",options:e,id:fi.name})}get streaming(){throw new Error("<Webcam>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set streaming(e){throw new Error("<Webcam>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pending(){throw new Error("<Webcam>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pending(e){throw new Error("<Webcam>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mode(){throw new Error("<Webcam>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(e){throw new Error("<Webcam>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mirror_webcam(){throw new Error("<Webcam>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mirror_webcam(e){throw new Error("<Webcam>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get include_audio(){throw new Error("<Webcam>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set include_audio(e){throw new Error("<Webcam>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const tr=oo;/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */function fn(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function ir(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fn(Object(t),!0).forEach(function(n){co(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):fn(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Nt(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Nt=function(e){return typeof e}:Nt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(i)}function so(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function dn(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function ao(i,e,t){return e&&dn(i.prototype,e),t&&dn(i,t),i}function co(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function nr(i){return lo(i)||uo(i)||ho(i)||fo()}function lo(i){if(Array.isArray(i))return di(i)}function uo(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function ho(i,e){if(i){if(typeof i=="string")return di(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return di(i,e)}}function di(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function fo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ht=typeof window<"u"&&typeof window.document<"u",Pe=Ht?window:{},Fi=Ht&&Pe.document.documentElement?"ontouchstart"in Pe.document.documentElement:!1,Zi=Ht?"PointerEvent"in Pe:!1,$="cropper",Ki="all",rr="crop",or="move",sr="zoom",Ve="e",qe="w",lt="s",je="n",yt="ne",kt="nw",Et="se",St="sw",mi="".concat($,"-crop"),mn="".concat($,"-disabled"),_e="".concat($,"-hidden"),gn="".concat($,"-hide"),mo="".concat($,"-invisible"),jt="".concat($,"-modal"),gi="".concat($,"-move"),Dt="".concat($,"Action"),Pt="".concat($,"Preview"),Qi="crop",ar="move",cr="none",_i="crop",pi="cropend",wi="cropmove",bi="cropstart",_n="dblclick",go=Fi?"touchstart":"mousedown",_o=Fi?"touchmove":"mousemove",po=Fi?"touchend touchcancel":"mouseup",pn=Zi?"pointerdown":go,wn=Zi?"pointermove":_o,bn=Zi?"pointerup pointercancel":po,vn="ready",yn="resize",kn="wheel",vi="zoom",En="image/jpeg",wo=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,bo=/^data:/,vo=/^data:image\/jpeg;base64,/,yo=/^img|canvas$/i,lr=200,ur=100,Sn={viewMode:0,dragMode:Qi,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:lr,minContainerHeight:ur,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},ko='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Eo=Number.isNaN||Pe.isNaN;function j(i){return typeof i=="number"&&!Eo(i)}var Mn=function(e){return e>0&&e<1/0};function $t(i){return typeof i>"u"}function Ze(i){return Nt(i)==="object"&&i!==null}var So=Object.prototype.hasOwnProperty;function ut(i){if(!Ze(i))return!1;try{var e=i.constructor,t=e.prototype;return e&&t&&So.call(t,"isPrototypeOf")}catch{return!1}}function ge(i){return typeof i=="function"}var Mo=Array.prototype.slice;function hr(i){return Array.from?Array.from(i):Mo.call(i)}function le(i,e){return i&&ge(e)&&(Array.isArray(i)||j(i.length)?hr(i).forEach(function(t,n){e.call(i,t,n,i)}):Ze(i)&&Object.keys(i).forEach(function(t){e.call(i,i[t],t,i)})),i}var ee=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return Ze(e)&&n.length>0&&n.forEach(function(r){Ze(r)&&Object.keys(r).forEach(function(o){e[o]=r[o]})}),e},Do=/\.\d*(?:0|9){12}\d*$/;function ft(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Do.test(i)?Math.round(i*e)/e:i}var Ro=/^width|height|left|top|marginLeft|marginTop$/;function We(i,e){var t=i.style;le(e,function(n,s){Ro.test(s)&&j(n)&&(n="".concat(n,"px")),t[s]=n})}function Co(i,e){return i.classList?i.classList.contains(e):i.className.indexOf(e)>-1}function he(i,e){if(e){if(j(i.length)){le(i,function(n){he(n,e)});return}if(i.classList){i.classList.add(e);return}var t=i.className.trim();t?t.indexOf(e)<0&&(i.className="".concat(t," ").concat(e)):i.className=e}}function Ie(i,e){if(e){if(j(i.length)){le(i,function(t){Ie(t,e)});return}if(i.classList){i.classList.remove(e);return}i.className.indexOf(e)>=0&&(i.className=i.className.replace(e,""))}}function ht(i,e,t){if(e){if(j(i.length)){le(i,function(n){ht(n,e,t)});return}t?he(i,e):Ie(i,e)}}var Oo=/([a-z\d])([A-Z])/g;function Ji(i){return i.replace(Oo,"$1-$2").toLowerCase()}function yi(i,e){return Ze(i[e])?i[e]:i.dataset?i.dataset[e]:i.getAttribute("data-".concat(Ji(e)))}function Rt(i,e,t){Ze(t)?i[e]=t:i.dataset?i.dataset[e]=t:i.setAttribute("data-".concat(Ji(e)),t)}function Io(i,e){if(Ze(i[e]))try{delete i[e]}catch{i[e]=void 0}else if(i.dataset)try{delete i.dataset[e]}catch{i.dataset[e]=void 0}else i.removeAttribute("data-".concat(Ji(e)))}var fr=/\s\s*/,dr=function(){var i=!1;if(Ht){var e=!1,t=function(){},n=Object.defineProperty({},"once",{get:function(){return i=!0,e},set:function(r){e=r}});Pe.addEventListener("test",t,n),Pe.removeEventListener("test",t,n)}return i}();function Oe(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=t;e.trim().split(fr).forEach(function(r){if(!dr){var o=i.listeners;o&&o[r]&&o[r][t]&&(s=o[r][t],delete o[r][t],Object.keys(o[r]).length===0&&delete o[r],Object.keys(o).length===0&&delete i.listeners)}i.removeEventListener(r,s,n)})}function De(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=t;e.trim().split(fr).forEach(function(r){if(n.once&&!dr){var o=i.listeners,a=o===void 0?{}:o;s=function(){delete a[r][t],i.removeEventListener(r,s,n);for(var l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];t.apply(i,u)},a[r]||(a[r]={}),a[r][t]&&i.removeEventListener(r,a[r][t],n),a[r][t]=s,i.listeners=a}i.addEventListener(r,s,n)})}function dt(i,e,t){var n;return ge(Event)&&ge(CustomEvent)?n=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!0,!0,t)),i.dispatchEvent(n)}function mr(i){var e=i.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var ei=Pe.location,To=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Dn(i){var e=i.match(To);return e!==null&&(e[1]!==ei.protocol||e[2]!==ei.hostname||e[3]!==ei.port)}function Rn(i){var e="timestamp=".concat(new Date().getTime());return i+(i.indexOf("?")===-1?"?":"&")+e}function Mt(i){var e=i.rotate,t=i.scaleX,n=i.scaleY,s=i.translateX,r=i.translateY,o=[];j(s)&&s!==0&&o.push("translateX(".concat(s,"px)")),j(r)&&r!==0&&o.push("translateY(".concat(r,"px)")),j(e)&&e!==0&&o.push("rotate(".concat(e,"deg)")),j(t)&&t!==1&&o.push("scaleX(".concat(t,")")),j(n)&&n!==1&&o.push("scaleY(".concat(n,")"));var a=o.length?o.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function Po(i){var e=ir({},i),t=0;return le(i,function(n,s){delete e[s],le(e,function(r){var o=Math.abs(n.startX-r.startX),a=Math.abs(n.startY-r.startY),c=Math.abs(n.endX-r.endX),l=Math.abs(n.endY-r.endY),u=Math.sqrt(o*o+a*a),h=Math.sqrt(c*c+l*l),f=(h-u)/u;Math.abs(f)>Math.abs(t)&&(t=f)})}),t}function Bt(i,e){var t=i.pageX,n=i.pageY,s={endX:t,endY:n};return e?s:ir({startX:t,startY:n},s)}function Bo(i){var e=0,t=0,n=0;return le(i,function(s){var r=s.startX,o=s.startY;e+=r,t+=o,n+=1}),e/=n,t/=n,{pageX:e,pageY:t}}function He(i){var e=i.aspectRatio,t=i.height,n=i.width,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",r=Mn(n),o=Mn(t);if(r&&o){var a=t*e;s==="contain"&&a>n||s==="cover"&&a<n?t=n/e:n=t*e}else r?t=n/e:o&&(n=t*e);return{width:n,height:t}}function Ao(i){var e=i.width,t=i.height,n=i.degree;if(n=Math.abs(n)%180,n===90)return{width:t,height:e};var s=n%90*Math.PI/180,r=Math.sin(s),o=Math.cos(s),a=e*o+t*r,c=e*r+t*o;return n>90?{width:c,height:a}:{width:a,height:c}}function No(i,e,t,n){var s=e.aspectRatio,r=e.naturalWidth,o=e.naturalHeight,a=e.rotate,c=a===void 0?0:a,l=e.scaleX,u=l===void 0?1:l,h=e.scaleY,f=h===void 0?1:h,p=t.aspectRatio,_=t.naturalWidth,m=t.naturalHeight,v=n.fillColor,S=v===void 0?"transparent":v,O=n.imageSmoothingEnabled,E=O===void 0?!0:O,N=n.imageSmoothingQuality,L=N===void 0?"low":N,k=n.maxWidth,P=k===void 0?1/0:k,y=n.maxHeight,M=y===void 0?1/0:y,z=n.minWidth,W=z===void 0?0:z,H=n.minHeight,te=H===void 0?0:H,x=document.createElement("canvas"),G=x.getContext("2d"),U=He({aspectRatio:p,width:P,height:M}),K=He({aspectRatio:p,width:W,height:te},"cover"),ae=Math.min(U.width,Math.max(K.width,_)),ue=Math.min(U.height,Math.max(K.height,m)),de=He({aspectRatio:s,width:P,height:M}),fe=He({aspectRatio:s,width:W,height:te},"cover"),Re=Math.min(de.width,Math.max(fe.width,r)),Be=Math.min(de.height,Math.max(fe.height,o)),b=[-Re/2,-Be/2,Re,Be];return x.width=ft(ae),x.height=ft(ue),G.fillStyle=S,G.fillRect(0,0,ae,ue),G.save(),G.translate(ae/2,ue/2),G.rotate(c*Math.PI/180),G.scale(u,f),G.imageSmoothingEnabled=E,G.imageSmoothingQuality=L,G.drawImage.apply(G,[i].concat(nr(b.map(function(Je){return Math.floor(ft(Je))})))),G.restore(),x}var gr=String.fromCharCode;function zo(i,e,t){var n="";t+=e;for(var s=e;s<t;s+=1)n+=gr(i.getUint8(s));return n}var jo=/^data:.*,/;function Lo(i){var e=i.replace(jo,""),t=atob(e),n=new ArrayBuffer(t.length),s=new Uint8Array(n);return le(s,function(r,o){s[o]=t.charCodeAt(o)}),n}function Wo(i,e){for(var t=[],n=8192,s=new Uint8Array(i);s.length>0;)t.push(gr.apply(null,hr(s.subarray(0,n)))),s=s.subarray(n);return"data:".concat(e,";base64,").concat(btoa(t.join("")))}function Ho(i){var e=new DataView(i),t;try{var n,s,r;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var o=e.byteLength,a=2;a+1<o;){if(e.getUint8(a)===255&&e.getUint8(a+1)===225){s=a;break}a+=1}if(s){var c=s+4,l=s+10;if(zo(e,c,4)==="Exif"){var u=e.getUint16(l);if(n=u===18761,(n||u===19789)&&e.getUint16(l+2,n)===42){var h=e.getUint32(l+4,n);h>=8&&(r=l+h)}}}if(r){var f=e.getUint16(r,n),p,_;for(_=0;_<f;_+=1)if(p=r+_*12+2,e.getUint16(p,n)===274){p+=8,t=e.getUint16(p,n),e.setUint16(p,1,n);break}}}catch{t=1}return t}function Uo(i){var e=0,t=1,n=1;switch(i){case 2:t=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,t=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:t,scaleY:n}}var Xo={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,n=this.container,s=this.cropper,r=Number(t.minContainerWidth),o=Number(t.minContainerHeight);he(s,_e),Ie(e,_e);var a={width:Math.max(n.offsetWidth,r>=0?r:lr),height:Math.max(n.offsetHeight,o>=0?o:ur)};this.containerData=a,We(s,{width:a.width,height:a.height}),he(e,_e),Ie(s,_e)},initCanvas:function(){var e=this.containerData,t=this.imageData,n=this.options.viewMode,s=Math.abs(t.rotate)%180===90,r=s?t.naturalHeight:t.naturalWidth,o=s?t.naturalWidth:t.naturalHeight,a=r/o,c=e.width,l=e.height;e.height*a>e.width?n===3?c=e.height*a:l=e.width/a:n===3?l=e.width/a:c=e.height*a;var u={aspectRatio:a,naturalWidth:r,naturalHeight:o,width:c,height:l};this.canvasData=u,this.limited=n===1||n===2,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(e.width-u.width)/2,u.top=(e.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=ee({},u)},limitCanvas:function(e,t){var n=this.options,s=this.containerData,r=this.canvasData,o=this.cropBoxData,a=n.viewMode,c=r.aspectRatio,l=this.cropped&&o;if(e){var u=Number(n.minCanvasWidth)||0,h=Number(n.minCanvasHeight)||0;a>1?(u=Math.max(u,s.width),h=Math.max(h,s.height),a===3&&(h*c>u?u=h*c:h=u/c)):a>0&&(u?u=Math.max(u,l?o.width:0):h?h=Math.max(h,l?o.height:0):l&&(u=o.width,h=o.height,h*c>u?u=h*c:h=u/c));var f=He({aspectRatio:c,width:u,height:h});u=f.width,h=f.height,r.minWidth=u,r.minHeight=h,r.maxWidth=1/0,r.maxHeight=1/0}if(t)if(a>(l?0:1)){var p=s.width-r.width,_=s.height-r.height;r.minLeft=Math.min(0,p),r.minTop=Math.min(0,_),r.maxLeft=Math.max(0,p),r.maxTop=Math.max(0,_),l&&this.limited&&(r.minLeft=Math.min(o.left,o.left+(o.width-r.width)),r.minTop=Math.min(o.top,o.top+(o.height-r.height)),r.maxLeft=o.left,r.maxTop=o.top,a===2&&(r.width>=s.width&&(r.minLeft=Math.min(0,p),r.maxLeft=Math.max(0,p)),r.height>=s.height&&(r.minTop=Math.min(0,_),r.maxTop=Math.max(0,_))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=s.width,r.maxTop=s.height},renderCanvas:function(e,t){var n=this.canvasData,s=this.imageData;if(t){var r=Ao({width:s.naturalWidth*Math.abs(s.scaleX||1),height:s.naturalHeight*Math.abs(s.scaleY||1),degree:s.rotate||0}),o=r.width,a=r.height,c=n.width*(o/n.naturalWidth),l=n.height*(a/n.naturalHeight);n.left-=(c-n.width)/2,n.top-=(l-n.height)/2,n.width=c,n.height=l,n.aspectRatio=o/a,n.naturalWidth=o,n.naturalHeight=a,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,We(this.canvas,ee({width:n.width,height:n.height},Mt({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,n=this.imageData,s=n.naturalWidth*(t.width/t.naturalWidth),r=n.naturalHeight*(t.height/t.naturalHeight);ee(n,{width:s,height:r,left:(t.width-s)/2,top:(t.height-r)/2}),We(this.image,ee({width:n.width,height:n.height},Mt(ee({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,s=Number(e.autoCropArea)||.8,r={width:t.width,height:t.height};n&&(t.height*n>t.width?r.height=r.width/n:r.width=r.height*n),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*s),r.height=Math.max(r.minHeight,r.height*s),r.left=t.left+(t.width-r.width)/2,r.top=t.top+(t.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=ee({},r)},limitCropBox:function(e,t){var n=this.options,s=this.containerData,r=this.canvasData,o=this.cropBoxData,a=this.limited,c=n.aspectRatio;if(e){var l=Number(n.minCropBoxWidth)||0,u=Number(n.minCropBoxHeight)||0,h=a?Math.min(s.width,r.width,r.width+r.left,s.width-r.left):s.width,f=a?Math.min(s.height,r.height,r.height+r.top,s.height-r.top):s.height;l=Math.min(l,s.width),u=Math.min(u,s.height),c&&(l&&u?u*c>l?u=l/c:l=u*c:l?u=l/c:u&&(l=u*c),f*c>h?f=h/c:h=f*c),o.minWidth=Math.min(l,h),o.minHeight=Math.min(u,f),o.maxWidth=h,o.maxHeight=f}t&&(a?(o.minLeft=Math.max(0,r.left),o.minTop=Math.max(0,r.top),o.maxLeft=Math.min(s.width,r.left+r.width)-o.width,o.maxTop=Math.min(s.height,r.top+r.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=s.width-o.width,o.maxTop=s.height-o.height))},renderCropBox:function(){var e=this.options,t=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&Rt(this.face,Dt,n.width>=t.width&&n.height>=t.height?or:Ki),We(this.cropBox,ee({width:n.width,height:n.height},Mt({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),dt(this.element,_i,this.getData())}},Yo={initPreview:function(){var e=this.element,t=this.crossOrigin,n=this.options.preview,s=t?this.crossOriginUrl:this.url,r=e.alt||"The image to preview",o=document.createElement("img");if(t&&(o.crossOrigin=t),o.src=s,o.alt=r,this.viewBox.appendChild(o),this.viewBoxImage=o,!!n){var a=n;typeof n=="string"?a=e.ownerDocument.querySelectorAll(n):n.querySelector&&(a=[n]),this.previews=a,le(a,function(c){var l=document.createElement("img");Rt(c,Pt,{width:c.offsetWidth,height:c.offsetHeight,html:c.innerHTML}),t&&(l.crossOrigin=t),l.src=s,l.alt=r,l.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',c.innerHTML="",c.appendChild(l)})}},resetPreview:function(){le(this.previews,function(e){var t=yi(e,Pt);We(e,{width:t.width,height:t.height}),e.innerHTML=t.html,Io(e,Pt)})},preview:function(){var e=this.imageData,t=this.canvasData,n=this.cropBoxData,s=n.width,r=n.height,o=e.width,a=e.height,c=n.left-t.left-e.left,l=n.top-t.top-e.top;!this.cropped||this.disabled||(We(this.viewBoxImage,ee({width:o,height:a},Mt(ee({translateX:-c,translateY:-l},e)))),le(this.previews,function(u){var h=yi(u,Pt),f=h.width,p=h.height,_=f,m=p,v=1;s&&(v=f/s,m=r*v),r&&m>p&&(v=p/r,_=s*v,m=p),We(u,{width:_,height:m}),We(u.getElementsByTagName("img")[0],ee({width:o*v,height:a*v},Mt(ee({translateX:-c*v,translateY:-l*v},e))))}))}},Vo={bind:function(){var e=this.element,t=this.options,n=this.cropper;ge(t.cropstart)&&De(e,bi,t.cropstart),ge(t.cropmove)&&De(e,wi,t.cropmove),ge(t.cropend)&&De(e,pi,t.cropend),ge(t.crop)&&De(e,_i,t.crop),ge(t.zoom)&&De(e,vi,t.zoom),De(n,pn,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&De(n,kn,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&De(n,_n,this.onDblclick=this.dblclick.bind(this)),De(e.ownerDocument,wn,this.onCropMove=this.cropMove.bind(this)),De(e.ownerDocument,bn,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&De(window,yn,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,n=this.cropper;ge(t.cropstart)&&Oe(e,bi,t.cropstart),ge(t.cropmove)&&Oe(e,wi,t.cropmove),ge(t.cropend)&&Oe(e,pi,t.cropend),ge(t.crop)&&Oe(e,_i,t.crop),ge(t.zoom)&&Oe(e,vi,t.zoom),Oe(n,pn,this.onCropStart),t.zoomable&&t.zoomOnWheel&&Oe(n,kn,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Oe(n,_n,this.onDblclick),Oe(e.ownerDocument,wn,this.onCropMove),Oe(e.ownerDocument,bn,this.onCropEnd),t.responsive&&Oe(window,yn,this.onResize)}},qo={resize:function(){if(!this.disabled){var e=this.options,t=this.container,n=this.containerData,s=t.offsetWidth/n.width,r=t.offsetHeight/n.height,o=Math.abs(s-1)>Math.abs(r-1)?s:r;if(o!==1){var a,c;e.restore&&(a=this.getCanvasData(),c=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(le(a,function(l,u){a[u]=l*o})),this.setCropBoxData(le(c,function(l,u){c[u]=l*o})))}}},dblclick:function(){this.disabled||this.options.dragMode===cr||this.setDragMode(Co(this.dragBox,mi)?ar:Qi)},wheel:function(e){var t=this,n=Number(this.options.wheelZoomRatio)||.1,s=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),e.deltaY?s=e.deltaY>0?1:-1:e.wheelDelta?s=-e.wheelDelta/120:e.detail&&(s=e.detail>0?1:-1),this.zoom(-s*n,e)))},cropStart:function(e){var t=e.buttons,n=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(j(t)&&t!==1||j(n)&&n!==0||e.ctrlKey))){var s=this.options,r=this.pointers,o;e.changedTouches?le(e.changedTouches,function(a){r[a.identifier]=Bt(a)}):r[e.pointerId||0]=Bt(e),Object.keys(r).length>1&&s.zoomable&&s.zoomOnTouch?o=sr:o=yi(e.target,Dt),wo.test(o)&&dt(this.element,bi,{originalEvent:e,action:o})!==!1&&(e.preventDefault(),this.action=o,this.cropping=!1,o===rr&&(this.cropping=!0,he(this.dragBox,jt)))}},cropMove:function(e){var t=this.action;if(!(this.disabled||!t)){var n=this.pointers;e.preventDefault(),dt(this.element,wi,{originalEvent:e,action:t})!==!1&&(e.changedTouches?le(e.changedTouches,function(s){ee(n[s.identifier]||{},Bt(s,!0))}):ee(n[e.pointerId||0]||{},Bt(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,n=this.pointers;e.changedTouches?le(e.changedTouches,function(s){delete n[s.identifier]}):delete n[e.pointerId||0],t&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,ht(this.dragBox,jt,this.cropped&&this.options.modal)),dt(this.element,pi,{originalEvent:e,action:t}))}}},Go={change:function(e){var t=this.options,n=this.canvasData,s=this.containerData,r=this.cropBoxData,o=this.pointers,a=this.action,c=t.aspectRatio,l=r.left,u=r.top,h=r.width,f=r.height,p=l+h,_=u+f,m=0,v=0,S=s.width,O=s.height,E=!0,N;!c&&e.shiftKey&&(c=h&&f?h/f:1),this.limited&&(m=r.minLeft,v=r.minTop,S=m+Math.min(s.width,n.width,n.left+n.width),O=v+Math.min(s.height,n.height,n.top+n.height));var L=o[Object.keys(o)[0]],k={x:L.endX-L.startX,y:L.endY-L.startY},P=function(M){switch(M){case Ve:p+k.x>S&&(k.x=S-p);break;case qe:l+k.x<m&&(k.x=m-l);break;case je:u+k.y<v&&(k.y=v-u);break;case lt:_+k.y>O&&(k.y=O-_);break}};switch(a){case Ki:l+=k.x,u+=k.y;break;case Ve:if(k.x>=0&&(p>=S||c&&(u<=v||_>=O))){E=!1;break}P(Ve),h+=k.x,h<0&&(a=qe,h=-h,l-=h),c&&(f=h/c,u+=(r.height-f)/2);break;case je:if(k.y<=0&&(u<=v||c&&(l<=m||p>=S))){E=!1;break}P(je),f-=k.y,u+=k.y,f<0&&(a=lt,f=-f,u-=f),c&&(h=f*c,l+=(r.width-h)/2);break;case qe:if(k.x<=0&&(l<=m||c&&(u<=v||_>=O))){E=!1;break}P(qe),h-=k.x,l+=k.x,h<0&&(a=Ve,h=-h,l-=h),c&&(f=h/c,u+=(r.height-f)/2);break;case lt:if(k.y>=0&&(_>=O||c&&(l<=m||p>=S))){E=!1;break}P(lt),f+=k.y,f<0&&(a=je,f=-f,u-=f),c&&(h=f*c,l+=(r.width-h)/2);break;case yt:if(c){if(k.y<=0&&(u<=v||p>=S)){E=!1;break}P(je),f-=k.y,u+=k.y,h=f*c}else P(je),P(Ve),k.x>=0?p<S?h+=k.x:k.y<=0&&u<=v&&(E=!1):h+=k.x,k.y<=0?u>v&&(f-=k.y,u+=k.y):(f-=k.y,u+=k.y);h<0&&f<0?(a=St,f=-f,h=-h,u-=f,l-=h):h<0?(a=kt,h=-h,l-=h):f<0&&(a=Et,f=-f,u-=f);break;case kt:if(c){if(k.y<=0&&(u<=v||l<=m)){E=!1;break}P(je),f-=k.y,u+=k.y,h=f*c,l+=r.width-h}else P(je),P(qe),k.x<=0?l>m?(h-=k.x,l+=k.x):k.y<=0&&u<=v&&(E=!1):(h-=k.x,l+=k.x),k.y<=0?u>v&&(f-=k.y,u+=k.y):(f-=k.y,u+=k.y);h<0&&f<0?(a=Et,f=-f,h=-h,u-=f,l-=h):h<0?(a=yt,h=-h,l-=h):f<0&&(a=St,f=-f,u-=f);break;case St:if(c){if(k.x<=0&&(l<=m||_>=O)){E=!1;break}P(qe),h-=k.x,l+=k.x,f=h/c}else P(lt),P(qe),k.x<=0?l>m?(h-=k.x,l+=k.x):k.y>=0&&_>=O&&(E=!1):(h-=k.x,l+=k.x),k.y>=0?_<O&&(f+=k.y):f+=k.y;h<0&&f<0?(a=yt,f=-f,h=-h,u-=f,l-=h):h<0?(a=Et,h=-h,l-=h):f<0&&(a=kt,f=-f,u-=f);break;case Et:if(c){if(k.x>=0&&(p>=S||_>=O)){E=!1;break}P(Ve),h+=k.x,f=h/c}else P(lt),P(Ve),k.x>=0?p<S?h+=k.x:k.y>=0&&_>=O&&(E=!1):h+=k.x,k.y>=0?_<O&&(f+=k.y):f+=k.y;h<0&&f<0?(a=kt,f=-f,h=-h,u-=f,l-=h):h<0?(a=St,h=-h,l-=h):f<0&&(a=yt,f=-f,u-=f);break;case or:this.move(k.x,k.y),E=!1;break;case sr:this.zoom(Po(o),e),E=!1;break;case rr:if(!k.x||!k.y){E=!1;break}N=mr(this.cropper),l=L.startX-N.left,u=L.startY-N.top,h=r.minWidth,f=r.minHeight,k.x>0?a=k.y>0?Et:yt:k.x<0&&(l-=h,a=k.y>0?St:kt),k.y<0&&(u-=f),this.cropped||(Ie(this.cropBox,_e),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}E&&(r.width=h,r.height=f,r.left=l,r.top=u,this.action=a,this.renderCropBox()),le(o,function(y){y.startX=y.endX,y.startY=y.endY})}},Fo={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&he(this.dragBox,jt),Ie(this.cropBox,_e),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=ee({},this.initialImageData),this.canvasData=ee({},this.initialCanvasData),this.cropBoxData=ee({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(ee(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Ie(this.dragBox,jt),he(this.cropBox,_e)),this},replace:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,le(this.previews,function(n){n.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Ie(this.cropper,mn)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,he(this.cropper,mn)),this},destroy:function(){var e=this.element;return e[$]?(e[$]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.canvasData,s=n.left,r=n.top;return this.moveTo($t(e)?e:s+Number(e),$t(t)?t:r+Number(t))},moveTo:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.canvasData,s=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(j(e)&&(n.left=e,s=!0),j(t)&&(n.top=t,s=!0),s&&this.renderCanvas(!0)),this},zoom:function(e,t){var n=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(n.width*e/n.naturalWidth,null,t)},zoomTo:function(e,t,n){var s=this.options,r=this.canvasData,o=r.width,a=r.height,c=r.naturalWidth,l=r.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&s.zoomable){var u=c*e,h=l*e;if(dt(this.element,vi,{ratio:e,oldRatio:o/c,originalEvent:n})===!1)return this;if(n){var f=this.pointers,p=mr(this.cropper),_=f&&Object.keys(f).length?Bo(f):{pageX:n.pageX,pageY:n.pageY};r.left-=(u-o)*((_.pageX-p.left-r.left)/o),r.top-=(h-a)*((_.pageY-p.top-r.top)/a)}else ut(t)&&j(t.x)&&j(t.y)?(r.left-=(u-o)*((t.x-r.left)/o),r.top-=(h-a)*((t.y-r.top)/a)):(r.left-=(u-o)/2,r.top-=(h-a)/2);r.width=u,r.height=h,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),j(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,j(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(j(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.imageData,s=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(j(e)&&(n.scaleX=e,s=!0),j(t)&&(n.scaleY=t,s=!0),s&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.options,n=this.imageData,s=this.canvasData,r=this.cropBoxData,o;if(this.ready&&this.cropped){o={x:r.left-s.left,y:r.top-s.top,width:r.width,height:r.height};var a=n.width/n.naturalWidth;if(le(o,function(u,h){o[h]=u/a}),e){var c=Math.round(o.y+o.height),l=Math.round(o.x+o.width);o.x=Math.round(o.x),o.y=Math.round(o.y),o.width=l-o.x,o.height=c-o.y}}else o={x:0,y:0,width:0,height:0};return t.rotatable&&(o.rotate=n.rotate||0),t.scalable&&(o.scaleX=n.scaleX||1,o.scaleY=n.scaleY||1),o},setData:function(e){var t=this.options,n=this.imageData,s=this.canvasData,r={};if(this.ready&&!this.disabled&&ut(e)){var o=!1;t.rotatable&&j(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,o=!0),t.scalable&&(j(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,o=!0),j(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var a=n.width/n.naturalWidth;j(e.x)&&(r.left=e.x*a+s.left),j(e.y)&&(r.top=e.y*a+s.top),j(e.width)&&(r.width=e.width*a),j(e.height)&&(r.height=e.height*a),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?ee({},this.containerData):{}},getImageData:function(){return this.sized?ee({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&le(["left","top","width","height","naturalWidth","naturalHeight"],function(n){t[n]=e[n]}),t},setCanvasData:function(e){var t=this.canvasData,n=t.aspectRatio;return this.ready&&!this.disabled&&ut(e)&&(j(e.left)&&(t.left=e.left),j(e.top)&&(t.top=e.top),j(e.width)?(t.width=e.width,t.height=e.width/n):j(e.height)&&(t.height=e.height,t.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,t;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(e){var t=this.cropBoxData,n=this.options.aspectRatio,s,r;return this.ready&&this.cropped&&!this.disabled&&ut(e)&&(j(e.left)&&(t.left=e.left),j(e.top)&&(t.top=e.top),j(e.width)&&e.width!==t.width&&(s=!0,t.width=e.width),j(e.height)&&e.height!==t.height&&(r=!0,t.height=e.height),n&&(s?t.height=t.width/n:r&&(t.width=t.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,n=No(this.image,this.imageData,t,e);if(!this.cropped)return n;var s=this.getData(),r=s.x,o=s.y,a=s.width,c=s.height,l=n.width/Math.floor(t.naturalWidth);l!==1&&(r*=l,o*=l,a*=l,c*=l);var u=a/c,h=He({aspectRatio:u,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),f=He({aspectRatio:u,width:e.minWidth||0,height:e.minHeight||0},"cover"),p=He({aspectRatio:u,width:e.width||(l!==1?n.width:a),height:e.height||(l!==1?n.height:c)}),_=p.width,m=p.height;_=Math.min(h.width,Math.max(f.width,_)),m=Math.min(h.height,Math.max(f.height,m));var v=document.createElement("canvas"),S=v.getContext("2d");v.width=ft(_),v.height=ft(m),S.fillStyle=e.fillColor||"transparent",S.fillRect(0,0,_,m);var O=e.imageSmoothingEnabled,E=O===void 0?!0:O,N=e.imageSmoothingQuality;S.imageSmoothingEnabled=E,N&&(S.imageSmoothingQuality=N);var L=n.width,k=n.height,P=r,y=o,M,z,W,H,te,x;P<=-a||P>L?(P=0,M=0,W=0,te=0):P<=0?(W=-P,P=0,M=Math.min(L,a+P),te=M):P<=L&&(W=0,M=Math.min(a,L-P),te=M),M<=0||y<=-c||y>k?(y=0,z=0,H=0,x=0):y<=0?(H=-y,y=0,z=Math.min(k,c+y),x=z):y<=k&&(H=0,z=Math.min(c,k-y),x=z);var G=[P,y,M,z];if(te>0&&x>0){var U=_/a;G.push(W*U,H*U,te*U,x*U)}return S.drawImage.apply(S,[n].concat(nr(G.map(function(K){return Math.floor(ft(K))})))),v},setAspectRatio:function(e){var t=this.options;return!this.disabled&&!$t(e)&&(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,n=this.dragBox,s=this.face;if(this.ready&&!this.disabled){var r=e===Qi,o=t.movable&&e===ar;e=r||o?e:cr,t.dragMode=e,Rt(n,Dt,e),ht(n,mi,r),ht(n,gi,o),t.cropBoxMovable||(Rt(s,Dt,e),ht(s,mi,r),ht(s,gi,o))}return this}},Zo=Pe.Cropper,ki=function(){function i(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(so(this,i),!e||!yo.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=ee({},Sn,ut(t)&&t),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return ao(i,[{key:"init",value:function(){var t=this.element,n=t.tagName.toLowerCase(),s;if(!t[$]){if(t[$]=this,n==="img"){if(this.isImg=!0,s=t.getAttribute("src")||"",this.originalUrl=s,!s)return;s=t.src}else n==="canvas"&&window.HTMLCanvasElement&&(s=t.toDataURL());this.load(s)}}},{key:"load",value:function(t){var n=this;if(t){this.url=t,this.imageData={};var s=this.element,r=this.options;if(!r.rotatable&&!r.scalable&&(r.checkOrientation=!1),!r.checkOrientation||!window.ArrayBuffer){this.clone();return}if(bo.test(t)){vo.test(t)?this.read(Lo(t)):this.clone();return}var o=new XMLHttpRequest,a=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=a,o.onerror=a,o.ontimeout=a,o.onprogress=function(){o.getResponseHeader("content-type")!==En&&o.abort()},o.onload=function(){n.read(o.response)},o.onloadend=function(){n.reloading=!1,n.xhr=null},r.checkCrossOrigin&&Dn(t)&&s.crossOrigin&&(t=Rn(t)),o.open("GET",t,!0),o.responseType="arraybuffer",o.withCredentials=s.crossOrigin==="use-credentials",o.send()}}},{key:"read",value:function(t){var n=this.options,s=this.imageData,r=Ho(t),o=0,a=1,c=1;if(r>1){this.url=Wo(t,En);var l=Uo(r);o=l.rotate,a=l.scaleX,c=l.scaleY}n.rotatable&&(s.rotate=o),n.scalable&&(s.scaleX=a,s.scaleY=c),this.clone()}},{key:"clone",value:function(){var t=this.element,n=this.url,s=t.crossOrigin,r=n;this.options.checkCrossOrigin&&Dn(n)&&(s||(s="anonymous"),r=Rn(n)),this.crossOrigin=s,this.crossOriginUrl=r;var o=document.createElement("img");s&&(o.crossOrigin=s),o.src=r||n,o.alt=t.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),he(o,gn),t.parentNode.insertBefore(o,t.nextSibling)}},{key:"start",value:function(){var t=this,n=this.image;n.onload=null,n.onerror=null,this.sizing=!0;var s=Pe.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Pe.navigator.userAgent),r=function(l,u){ee(t.imageData,{naturalWidth:l,naturalHeight:u,aspectRatio:l/u}),t.initialImageData=ee({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(n.naturalWidth&&!s){r(n.naturalWidth,n.naturalHeight);return}var o=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){r(o.width,o.height),s||a.removeChild(o)},o.src=n.src,s||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(o))}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var t=this.element,n=this.options,s=this.image,r=t.parentNode,o=document.createElement("div");o.innerHTML=ko;var a=o.querySelector(".".concat($,"-container")),c=a.querySelector(".".concat($,"-canvas")),l=a.querySelector(".".concat($,"-drag-box")),u=a.querySelector(".".concat($,"-crop-box")),h=u.querySelector(".".concat($,"-face"));this.container=r,this.cropper=a,this.canvas=c,this.dragBox=l,this.cropBox=u,this.viewBox=a.querySelector(".".concat($,"-view-box")),this.face=h,c.appendChild(s),he(t,_e),r.insertBefore(a,t.nextSibling),this.isImg||Ie(s,gn),this.initPreview(),this.bind(),n.initialAspectRatio=Math.max(0,n.initialAspectRatio)||NaN,n.aspectRatio=Math.max(0,n.aspectRatio)||NaN,n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0,he(u,_e),n.guides||he(u.getElementsByClassName("".concat($,"-dashed")),_e),n.center||he(u.getElementsByClassName("".concat($,"-center")),_e),n.background&&he(a,"".concat($,"-bg")),n.highlight||he(h,mo),n.cropBoxMovable&&(he(h,gi),Rt(h,Dt,Ki)),n.cropBoxResizable||(he(u.getElementsByClassName("".concat($,"-line")),_e),he(u.getElementsByClassName("".concat($,"-point")),_e)),this.render(),this.ready=!0,this.setDragMode(n.dragMode),n.autoCrop&&this.crop(),this.setData(n.data),ge(n.ready)&&De(t,vn,n.ready,{once:!0}),dt(t,vn)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),Ie(this.element,_e))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Zo,i}},{key:"setDefaults",value:function(t){ee(Sn,ut(t)&&t)}}]),i}();ee(ki.prototype,Xo,Yo,Vo,qo,Go,Fo);const Ko="Users/peterallen/Projects/gradio/js/image/interactive/Cropper.svelte";function Ei(i){let e,t;const n={c:function(){e=ne("img"),pe(e.src,t=i[0])||w(e,"src",t),w(e,"alt",""),B(e,Ko,32,0,600)},l:function(r){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(r,o){I(r,e,o),i[4](e)},p:function(r,[o]){o&1&&!pe(e.src,t=r[0])&&w(e,"src",t)},i:X,o:X,d:function(r){r&&T(e),i[4](null)}};return R("SvelteRegisterBlock",{block:n,id:Ei.name,type:"component",source:"",ctx:i}),n}function Qo(i,e,t){let{$$slots:n={},$$scope:s}=e;ke("Cropper",n,[]);let{image:r}=e,o;const a=Te();let c;function l(){c.destroy()}function u(){c&&l(),c=new ki(o,{autoCropArea:1,cropend(){const p=c.getCroppedCanvas().toDataURL();a("crop",p)}}),a("crop",r)}i.$$.on_mount.push(function(){r===void 0&&!("image"in e||i.$$.bound[i.$$.props.image])&&console.warn("<Cropper> was created without expected prop 'image'")});const h=["image"];Object.keys(e).forEach(p=>{!~h.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<Cropper> was created with unknown prop '${p}'`)});function f(p){J[p?"unshift":"push"](()=>{o=p,t(1,o)})}return i.$$set=p=>{"image"in p&&t(0,r=p.image)},i.$capture_state=()=>({Cropper:ki,onMount:Ge,createEventDispatcher:Te,image:r,el:o,dispatch:a,cropper:c,destroy:l,create:u}),i.$inject_state=p=>{"image"in p&&t(0,r=p.image),"el"in p&&t(1,o=p.el),"cropper"in p&&(c=p.cropper)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),[r,o,l,u,f]}class xi extends ve{constructor(e){super(e),ye(this,e,Qo,Ei,me,{image:0,destroy:2,create:3}),R("SvelteRegisterComponent",{component:this,tagName:"Cropper_1",options:e,id:Ei.name})}get image(){return this.$$.ctx[0]}set image(e){this.$$set({image:e}),Q()}get destroy(){return this.$$.ctx[2]}set destroy(e){throw new Error("<Cropper>: Cannot set read-only property 'destroy'")}get create(){return this.$$.ctx[3]}set create(e){throw new Error("<Cropper>: Cannot set read-only property 'create'")}}class Cn{constructor(e,t){this.x=e,this.y=t}}class On extends Cn{update(e){this.x=e.x,this.y=e.y}moveByAngle(e,t){const n=e+Math.PI/2;this.x=this.x+Math.sin(n)*t,this.y=this.y-Math.cos(n)*t}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new Cn(this.x-e.x,this.y-e.y)}getDistanceTo(e){const t=this.getDifferenceTo(e);return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}getAngleTo(e){const t=this.getDifferenceTo(e);return Math.atan2(t.y,t.x)}toObject(){return{x:this.x,y:this.y}}}const Jo=30;class In{constructor({radius:e=Jo,enabled:t=!0,initialPoint:n={x:0,y:0}}={}){this.radius=e,this._isEnabled=t,this.pointer=new On(n.x,n.y),this.brush=new On(n.x,n.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,{both:t=!1}={}){return this._hasMoved=!1,this.pointer.equalsTo(e)&&!t?!1:(this.pointer.update(e),t?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}var _r=function(){if(typeof Map<"u")return Map;function i(e,t){var n=-1;return e.some(function(s,r){return s[0]===t?(n=r,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var n=i(this.__entries__,t),s=this.__entries__[n];return s&&s[1]},e.prototype.set=function(t,n){var s=i(this.__entries__,t);~s?this.__entries__[s][1]=n:this.__entries__.push([t,n])},e.prototype.delete=function(t){var n=this.__entries__,s=i(n,t);~s&&n.splice(s,1)},e.prototype.has=function(t){return!!~i(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,n){n===void 0&&(n=null);for(var s=0,r=this.__entries__;s<r.length;s++){var o=r[s];t.call(n,o[1],o[0])}},e}()}(),Si=typeof window<"u"&&typeof document<"u"&&window.document===document,Lt=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),xo=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Lt):function(i){return setTimeout(function(){return i(Date.now())},1e3/60)}}(),$o=2;function es(i,e){var t=!1,n=!1,s=0;function r(){t&&(t=!1,i()),n&&a()}function o(){xo(r)}function a(){var c=Date.now();if(t){if(c-s<$o)return;n=!0}else t=!0,n=!1,setTimeout(o,e);s=c}return a}var ts=20,is=["top","right","bottom","left","width","height","size","weight"],ns=typeof MutationObserver<"u",rs=function(){function i(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=es(this.refresh.bind(this),ts)}return i.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},i.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},i.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},i.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},i.prototype.connect_=function(){!Si||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ns?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},i.prototype.disconnect_=function(){!Si||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},i.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=t===void 0?"":t,s=is.some(function(r){return!!~n.indexOf(r)});s&&this.refresh()},i.getInstance=function(){return this.instance_||(this.instance_=new i),this.instance_},i.instance_=null,i}(),pr=function(i,e){for(var t=0,n=Object.keys(e);t<n.length;t++){var s=n[t];Object.defineProperty(i,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return i},gt=function(i){var e=i&&i.ownerDocument&&i.ownerDocument.defaultView;return e||Lt},wr=Ut(0,0,0,0);function Wt(i){return parseFloat(i)||0}function Tn(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(n,s){var r=i["border-"+s+"-width"];return n+Wt(r)},0)}function os(i){for(var e=["top","right","bottom","left"],t={},n=0,s=e;n<s.length;n++){var r=s[n],o=i["padding-"+r];t[r]=Wt(o)}return t}function ss(i){var e=i.getBBox();return Ut(0,0,e.width,e.height)}function as(i){var e=i.clientWidth,t=i.clientHeight;if(!e&&!t)return wr;var n=gt(i).getComputedStyle(i),s=os(n),r=s.left+s.right,o=s.top+s.bottom,a=Wt(n.width),c=Wt(n.height);if(n.boxSizing==="border-box"&&(Math.round(a+r)!==e&&(a-=Tn(n,"left","right")+r),Math.round(c+o)!==t&&(c-=Tn(n,"top","bottom")+o)),!ls(i)){var l=Math.round(a+r)-e,u=Math.round(c+o)-t;Math.abs(l)!==1&&(a-=l),Math.abs(u)!==1&&(c-=u)}return Ut(s.left,s.top,a,c)}var cs=function(){return typeof SVGGraphicsElement<"u"?function(i){return i instanceof gt(i).SVGGraphicsElement}:function(i){return i instanceof gt(i).SVGElement&&typeof i.getBBox=="function"}}();function ls(i){return i===gt(i).document.documentElement}function us(i){return Si?cs(i)?ss(i):as(i):wr}function hs(i){var e=i.x,t=i.y,n=i.width,s=i.height,r=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(r.prototype);return pr(o,{x:e,y:t,width:n,height:s,top:t,right:e+n,bottom:s+t,left:e}),o}function Ut(i,e,t,n){return{x:i,y:e,width:t,height:n}}var fs=function(){function i(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ut(0,0,0,0),this.target=e}return i.prototype.isActive=function(){var e=us(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},i.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},i}(),ds=function(){function i(e,t){var n=hs(t);pr(this,{target:e,contentRect:n})}return i}(),ms=function(){function i(e,t,n){if(this.activeObservations_=[],this.observations_=new _r,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return i.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof gt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new fs(e)),this.controller_.addObserver(this),this.controller_.refresh())}},i.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof gt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},i.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},i.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},i.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(n){return new ds(n.target,n.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},i.prototype.clearActive=function(){this.activeObservations_.splice(0)},i.prototype.hasActive=function(){return this.activeObservations_.length>0},i}(),br=typeof WeakMap<"u"?new WeakMap:new _r,vr=function(){function i(e){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=rs.getInstance(),n=new ms(e,t,this);br.set(this,n)}return i}();["observe","unobserve","disconnect"].forEach(function(i){vr.prototype[i]=function(){var e;return(e=br.get(this))[i].apply(e,arguments)}});var Pn=function(){return typeof Lt.ResizeObserver<"u"?Lt.ResizeObserver:vr}();const{Object:gs}=qi,$i="Users/peterallen/Projects/gradio/js/image/interactive/Sketch.svelte";function Bn(i,e,t){const n=i.slice();return n[62]=e[t].name,n[63]=e[t].zIndex,n[64]=e[t].opacity,n[65]=e,n[66]=t,n}function Mi(i){let e,t,n;const s={c:function(){e=ne("div"),e.textContent="Start drawing",w(e,"class","start-prompt svelte-14l85k0"),B(e,$i,551,2,11685)},m:function(o,a){I(o,e,a),n=!0},i:function(o){n||(o&&Gi(()=>{n&&(t||(t=rn(e,ti,{duration:50},!0)),t.run(1))}),n=!0)},o:function(o){o&&(t||(t=rn(e,ti,{duration:50},!1)),t.run(0)),n=!1},d:function(o){o&&T(e),o&&t&&t.end()}};return R("SvelteRegisterBlock",{block:s,id:Mi.name,type:"if",source:"(551:1) {#if line_count === 0}",ctx:i}),s}function Di(i){let e,t=i[62],n,s;const r=()=>i[31](e,t),o=()=>i[31](null,t),a={c:function(){e=ne("canvas"),w(e,"key",i[62]),on(e,"z-index",i[63]),w(e,"class","svelte-14l85k0"),Z(e,"lr",i[5]),Z(e,"tb",!i[5]),on(e,"opacity",i[64]),B(e,$i,556,2,11833)},m:function(l,u){I(l,e,u),r(),n||(s=[ce(e,"mousedown",i[62]==="interface"?i[7]:void 0,!1,!1,!1,!1),ce(e,"mousemove",i[62]==="interface"?i[8]:void 0,!1,!1,!1,!1),ce(e,"mouseup",i[62]==="interface"?i[9]:void 0,!1,!1,!1,!1),ce(e,"mouseout",i[62]==="interface"?i[9]:void 0,!1,!1,!1,!1),ce(e,"blur",i[62]==="interface"?i[9]:void 0,!1,!1,!1,!1),ce(e,"touchstart",i[62]==="interface"?i[7]:void 0,!1,!1,!1,!1),ce(e,"touchmove",i[62]==="interface"?i[8]:void 0,!1,!1,!1,!1),ce(e,"touchend",i[62]==="interface"?i[9]:void 0,!1,!1,!1,!1),ce(e,"touchcancel",i[62]==="interface"?i[9]:void 0,!1,!1,!1,!1),ce(e,"click",Xr(i[30]),!1,!1,!0,!1)],n=!0)},p:function(l,u){i=l,t!==i[62]&&(o(),t=i[62],r()),u[0]&32&&Z(e,"lr",i[5]),u[0]&32&&Z(e,"tb",!i[5])},d:function(l){l&&T(e),o(),n=!1,jn(s)}};return R("SvelteRegisterBlock",{block:a,id:Di.name,type:"each",source:"(556:1) {#each canvas_types as { name, zIndex, opacity }}",ctx:i}),a}function Ri(i){let e,t,n,s=i[4]===0&&Mi(i),r=tn(i[6]),o=[];for(let c=0;c<r.length;c+=1)o[c]=Di(Bn(i,r,c));const a={c:function(){e=ne("div"),s&&s.c(),t=se();for(let l=0;l<o.length;l+=1)o[l].c();w(e,"class","wrap svelte-14l85k0"),Gi(()=>i[33].call(e)),B(e,$i,544,0,11540)},l:function(l){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(l,u){I(l,e,u),s&&s.m(e,null),ie(e,t);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(e,null);i[32](e),n=Nn(e,i[33].bind(e))},p:function(l,u){if(l[4]===0?s?u[0]&16&&D(s,1):(s=Mi(l),s.c(),D(s,1),s.m(e,t)):s&&(Ee(),C(s,1,1,()=>{s=null}),Se()),u[0]&993){r=tn(l[6]);let h;for(h=0;h<r.length;h+=1){const f=Bn(l,r,h);o[h]?o[h].p(f,u):(o[h]=Di(f),o[h].c(),o[h].m(e,null))}for(;h<o.length;h+=1)o[h].d(1);o.length=r.length}},i:function(l){D(s)},o:function(l){C(s)},d:function(l){l&&T(e),s&&s.d(),Ur(o,l),i[32](null),n()}};return R("SvelteRegisterBlock",{block:a,id:Ri.name,type:"component",source:"",ctx:i}),a}function An(i,e){return{x:i.x+(e.x-i.x)/2,y:i.y+(e.y-i.y)/2}}function _s(i,e,t){let n,{$$slots:s={},$$scope:r}=e;ke("Sketch",s,[]);const o=Te();let{value:a}=e,{value_img:c}=e,{mode:l="sketch"}=e,{brush_color:u="#0b0f19"}=e,{brush_radius:h}=e,{mask_opacity:f=.7}=e,{source:p}=e,{width:_=400}=e,{height:m=200}=e,{container_height:v=200}=e,{shape:S}=e,O,E="#aaa",N=_,L=m,k;const P=[{name:"interface",zIndex:15},{name:"mask",zIndex:13,opacity:f},{name:"drawing",zIndex:11},{name:"temp",zIndex:12}];let y={},M={},z=[],W=[],H=!0,te=!0,x=!1,G=!1,U=null,K=null,ae=null,ue=0;function de(){if(!S){M.temp.drawImage(c,0,0,_,m);return}let d=c.naturalWidth,A=c.naturalHeight;const g=S[0]/S[1],F=d/A;let re=0,Me=0;g<F?(d=S[1]*F,A=S[1],re=(S[0]-d)/2):g>F?(d=S[0],A=S[0]/F,Me=(S[1]-A)/2):(re=0,Me=0,d=S[0],A=S[1]),M.temp.drawImage(c,re,Me,d,A)}Ge(async()=>{Object.keys(y).forEach(d=>{t(27,M[d]=y[d].getContext("2d"),M)}),await Ae(),c&&(c.addEventListener("load",d=>{p==="webcam"?(M.temp.save(),M.temp.translate(_,0),M.temp.scale(-1,1),M.temp.drawImage(c,0,0),M.temp.restore()):de(),M.drawing.drawImage(y.temp,0,0,_,m),Ce()}),setTimeout(()=>{p==="webcam"?(M.temp.save(),M.temp.translate(_,0),M.temp.scale(-1,1),M.temp.drawImage(c,0,0),M.temp.restore()):de(),M.drawing.drawImage(y.temp,0,0,_,m),Ue({lines:W.slice()}),Ce()},100)),t(29,U=new In({radius:h*.05,enabled:!0,initialPoint:{x:_/2,y:m/2}})),ae=new Pn((d,A,...g)=>{nt(d,A)}),ae.observe(K),Xe(),t(25,O=!0),requestAnimationFrame(()=>{fe(),requestAnimationFrame(()=>{ze()})})});function fe(){const d=_/2,A=m/2;U.update({x:d,y:A},{both:!0}),U.update({x:d,y:A},{both:!1}),H=!0,te=!0}nn(()=>{t(25,O=!1),ae.unobserve(K)});function Re(d){wt(),c&&(p==="webcam"?(M.temp.save(),M.temp.translate(_,0),M.temp.scale(-1,1),M.temp.drawImage(c,0,0),M.temp.restore()):de(),(!W||!W.length)&&M.drawing.drawImage(y.temp,0,0,_,m)),Ue({lines:d}),t(4,ue=d.length),t(28,W=d),M.drawing.drawImage(y.temp,0,0,_,m),W.length==0&&o("clear")}function Be(){Re([]),Ce()}function b(){const d=W.slice(0,-1);Re(d),Ce()}let Je=()=>JSON.stringify({lines:W,width:N,height:L}),Ue=({lines:d})=>{d.forEach(A=>{const{points:g,brush_color:F,brush_radius:re}=A;st({points:g,brush_color:F,brush_radius:re,mask:l==="mask"})}),ct({brush_color:u,brush_radius:h}),l==="mask"&&at()},_t=d=>{d.preventDefault(),G=!0;const{x:A,y:g}=rt(d);d.touches&&d.touches.length>0&&U.update({x:A,y:g},{both:!0}),ot(A,g),t(4,ue+=1)},xe=d=>{d.preventDefault();const{x:A,y:g}=rt(d);ot(A,g)},pt=d=>{d.preventDefault(),xe(d),x=!1,G=!1,ct(),l==="mask"&&at()},$e=0,et=0,tt=0,it=!1,nt=async()=>{if(S&&K){const g=K?.getBoundingClientRect(),F=S[0]/S[1],re=g.width/g.height;t(5,it=F<re)}if(_===$e&&m===et&&tt===v)return;const d={width:_,height:m},A={height:v,width:v*(d.width/d.height)};await Promise.all([Ne(y.interface,d,A),Ne(y.drawing,d,A),Ne(y.temp,d,A),Ne(y.mask,d,A,!1)]),h||t(10,h=20*(d.width/A.width)),Xe({once:!0}),setTimeout(()=>{et=m,$e=_,tt=v},10),await Ae(),ze()},Ne=async(d,A,g,F=!0)=>{if(!O)return;await Ae();const re=window.devicePixelRatio||1;d.width=A.width*(F?re:1),d.height=A.height*(F?re:1);const Me=d.getContext("2d");F&&Me.scale(re,re),d.style.width=`${g.width}px`,d.style.height=`${g.height}px`},rt=d=>{const A=y.interface.getBoundingClientRect();let g=d.clientX,F=d.clientY;return d.changedTouches&&d.changedTouches.length>0&&(g=d.changedTouches[0].clientX,F=d.changedTouches[0].clientY),{x:(g-A.left)/A.width*_,y:(F-A.top)/A.height*m}},ot=(d,A)=>{U.update({x:d,y:A});const g=!U.isEnabled();(G&&!x||g&&G)&&(x=!0,z.push(U.brush.toObject())),x&&(z.push(U.brush.toObject()),st({points:z,brush_color:u,brush_radius:h,mask:l==="mask"})),H=!0},st=({points:d,brush_color:A,brush_radius:g,mask:F})=>{if(!d||d.length<2)return;let re=F?M.mask:M.temp;re.lineJoin="round",re.lineCap="round",re.strokeStyle=A,re.lineWidth=g;let Me=d[0],It=d[1];re.moveTo(It.x,It.y),re.beginPath();for(var Tt=1,jr=d.length;Tt<jr;Tt++){var en=An(Me,It);re.quadraticCurveTo(Me.x,Me.y,en.x,en.y),Me=d[Tt],It=d[Tt+1]}re.lineTo(Me.x,Me.y),re.stroke()},at=()=>{z.length<1||(z.length=0,Ce())},ct=()=>{z.length<1||(W.push({points:z.slice(),brush_color:u,brush_radius:h}),l!=="mask"&&(z.length=0),M.drawing.drawImage(y.temp,0,0,_,m),Ce())},Ce=()=>{const d=vt();o("change",d)};function ze(){return t(28,W=[]),wt(),t(4,ue=0),!0}function wt(){te=!0,M.temp.clearRect(0,0,_,m),t(27,M.temp.fillStyle=l==="mask"?"transparent":"#FFFFFF",M),M.temp.fillRect(0,0,_,m),l==="mask"&&M.mask.clearRect(0,0,y.mask.width,y.mask.height)}let Xe=({once:d=!1}={})=>{if(H||te){const A=U.getPointerCoordinates(),g=U.getBrushCoordinates();bt(M.interface,A,g),H=!1,te=!1}d||window.requestAnimationFrame(()=>{Xe()})},bt=(d,A,g)=>{d.clearRect(0,0,_,m),d.beginPath(),d.fillStyle=u,d.arc(g.x,g.y,h/2,0,Math.PI*2,!0),d.fill(),d.beginPath(),d.fillStyle=E,d.arc(g.x,g.y,n,0,Math.PI*2,!0),d.fill()};function vt(){return l==="mask"?y.mask.toDataURL("image/png"):y.drawing.toDataURL("image/jpg")}i.$$.on_mount.push(function(){a===void 0&&!("value"in e||i.$$.bound[i.$$.props.value])&&console.warn("<Sketch> was created without expected prop 'value'"),c===void 0&&!("value_img"in e||i.$$.bound[i.$$.props.value_img])&&console.warn("<Sketch> was created without expected prop 'value_img'"),h===void 0&&!("brush_radius"in e||i.$$.bound[i.$$.props.brush_radius])&&console.warn("<Sketch> was created without expected prop 'brush_radius'"),p===void 0&&!("source"in e||i.$$.bound[i.$$.props.source])&&console.warn("<Sketch> was created without expected prop 'source'"),S===void 0&&!("shape"in e||i.$$.bound[i.$$.props.shape])&&console.warn("<Sketch> was created without expected prop 'shape'")});const qt=["value","value_img","mode","brush_color","brush_radius","mask_opacity","source","width","height","container_height","shape"];gs.keys(e).forEach(d=>{!~qt.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<Sketch> was created with unknown prop '${d}'`)});function Gt(d){zn.call(this,i,d)}function Ft(d,A){J[d?"unshift":"push"](()=>{y[A]=d,t(0,y)})}function Zt(d){J[d?"unshift":"push"](()=>{K=d,t(3,K)})}function Kt(){N=this.offsetWidth,L=this.offsetHeight,t(1,N),t(2,L)}return i.$$set=d=>{"value"in d&&t(13,a=d.value),"value_img"in d&&t(14,c=d.value_img),"mode"in d&&t(15,l=d.mode),"brush_color"in d&&t(16,u=d.brush_color),"brush_radius"in d&&t(10,h=d.brush_radius),"mask_opacity"in d&&t(17,f=d.mask_opacity),"source"in d&&t(18,p=d.source),"width"in d&&t(11,_=d.width),"height"in d&&t(12,m=d.height),"container_height"in d&&t(19,v=d.container_height),"shape"in d&&t(20,S=d.shape)},i.$capture_state=()=>({onMount:Ge,onDestroy:nn,createEventDispatcher:Te,tick:Ae,fade:ti,LazyBrush:In,ResizeObserver:Pn,dispatch:o,value:a,value_img:c,mode:l,brush_color:u,brush_radius:h,mask_opacity:f,source:p,width:_,height:m,container_height:v,shape:S,mounted:O,catenary_color:E,canvas_width:N,canvas_height:L,last_value_img:k,mid_point:An,canvas_types:P,canvas:y,ctx:M,points:z,lines:W,mouse_has_moved:H,values_changed:te,is_drawing:x,is_pressing:G,lazy:U,canvas_container:K,canvas_observer:ae,line_count:ue,draw_cropped_image:de,init:fe,redraw_image:Re,clear_mask:Be,undo:b,get_save_data:Je,draw_lines:Ue,handle_draw_start:_t,handle_draw_move:xe,handle_draw_end:pt,old_width:$e,old_height:et,old_container_height:tt,add_lr_border:it,handle_canvas_resize:nt,set_canvas_size:Ne,get_pointer_pos:rt,handle_pointer_move:ot,draw_points:st,save_mask_line:at,saveLine:ct,trigger_on_change:Ce,clear:ze,clear_canvas:wt,loop:Xe,draw_interface:bt,get_image_data:vt,brush_dot:n}),i.$inject_state=d=>{"value"in d&&t(13,a=d.value),"value_img"in d&&t(14,c=d.value_img),"mode"in d&&t(15,l=d.mode),"brush_color"in d&&t(16,u=d.brush_color),"brush_radius"in d&&t(10,h=d.brush_radius),"mask_opacity"in d&&t(17,f=d.mask_opacity),"source"in d&&t(18,p=d.source),"width"in d&&t(11,_=d.width),"height"in d&&t(12,m=d.height),"container_height"in d&&t(19,v=d.container_height),"shape"in d&&t(20,S=d.shape),"mounted"in d&&t(25,O=d.mounted),"catenary_color"in d&&(E=d.catenary_color),"canvas_width"in d&&t(1,N=d.canvas_width),"canvas_height"in d&&t(2,L=d.canvas_height),"last_value_img"in d&&t(26,k=d.last_value_img),"canvas"in d&&t(0,y=d.canvas),"ctx"in d&&t(27,M=d.ctx),"points"in d&&(z=d.points),"lines"in d&&t(28,W=d.lines),"mouse_has_moved"in d&&(H=d.mouse_has_moved),"values_changed"in d&&(te=d.values_changed),"is_drawing"in d&&(x=d.is_drawing),"is_pressing"in d&&(G=d.is_pressing),"lazy"in d&&t(29,U=d.lazy),"canvas_container"in d&&t(3,K=d.canvas_container),"canvas_observer"in d&&(ae=d.canvas_observer),"line_count"in d&&t(4,ue=d.line_count),"get_save_data"in d&&(Je=d.get_save_data),"draw_lines"in d&&t(50,Ue=d.draw_lines),"handle_draw_start"in d&&t(7,_t=d.handle_draw_start),"handle_draw_move"in d&&t(8,xe=d.handle_draw_move),"handle_draw_end"in d&&t(9,pt=d.handle_draw_end),"old_width"in d&&($e=d.old_width),"old_height"in d&&(et=d.old_height),"old_container_height"in d&&(tt=d.old_container_height),"add_lr_border"in d&&t(5,it=d.add_lr_border),"handle_canvas_resize"in d&&t(51,nt=d.handle_canvas_resize),"set_canvas_size"in d&&(Ne=d.set_canvas_size),"get_pointer_pos"in d&&(rt=d.get_pointer_pos),"handle_pointer_move"in d&&(ot=d.handle_pointer_move),"draw_points"in d&&(st=d.draw_points),"save_mask_line"in d&&(at=d.save_mask_line),"saveLine"in d&&(ct=d.saveLine),"trigger_on_change"in d&&t(58,Ce=d.trigger_on_change),"loop"in d&&(Xe=d.loop),"draw_interface"in d&&(bt=d.draw_interface),"brush_dot"in d&&(n=d.brush_dot)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),i.$$.update=()=>{i.$$.dirty[0]&1054720&&S&&(_||m)&&(t(11,_=S[0]),t(12,m=S[1])),i.$$.dirty[0]&33562624&&O&&!a&&ze(),i.$$.dirty[0]&503601153&&O&&c!==k&&(t(26,k=c),ze(),setTimeout(()=>{p==="webcam"?(M.temp.save(),M.temp.translate(_,0),M.temp.scale(-1,1),M.temp.drawImage(c,0,0),M.temp.restore()):de(),M.drawing.drawImage(y.temp,0,0,_,m),Ue({lines:W.slice()}),Ce()},50)),i.$$.dirty[0]&536871936&&U&&(fe(),U.setRadius(h*.05)),i.$$.dirty[0]&6144&&(_||m)&&nt(),i.$$.dirty[0]&1024&&(n=h*.075)},[y,N,L,K,ue,it,P,_t,xe,pt,h,_,m,a,c,l,u,f,p,v,S,Be,b,ze,vt,O,k,M,W,U,Gt,Ft,Zt,Kt]}class Xt extends ve{constructor(e){super(e),ye(this,e,_s,Ri,me,{value:13,value_img:14,mode:15,brush_color:16,brush_radius:10,mask_opacity:17,source:18,width:11,height:12,container_height:19,shape:20,clear_mask:21,undo:22,clear:23,get_image_data:24},null,[-1,-1,-1]),R("SvelteRegisterComponent",{component:this,tagName:"Sketch",options:e,id:Ri.name})}get value(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value_img(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value_img(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mode(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get brush_color(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set brush_color(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get brush_radius(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set brush_radius(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mask_opacity(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mask_opacity(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get source(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set source(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get width(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get height(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set height(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get container_height(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set container_height(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get shape(){throw new Error("<Sketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set shape(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get clear_mask(){return this.$$.ctx[21]}set clear_mask(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get undo(){return this.$$.ctx[22]}set undo(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get clear(){return this.$$.ctx[23]}set clear(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get get_image_data(){return this.$$.ctx[24]}set get_image_data(e){throw new Error("<Sketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const ps="Users/peterallen/Projects/gradio/js/image/interactive/ModifySketch.svelte";function Ci(i){let e,t;e=new Fe({props:{Icon:Kn,label:"Clear"},$$inline:!0}),e.$on("click",i[3]);const n={c:function(){Y(e.$$.fragment)},m:function(r,o){V(e,r,o),t=!0},p:X,i:function(r){t||(D(e.$$.fragment,r),t=!0)},o:function(r){C(e.$$.fragment,r),t=!1},d:function(r){q(e,r)}};return R("SvelteRegisterBlock",{block:n,id:Ci.name,type:"if",source:"(11:1) {#if show_eraser}",ctx:i}),n}function Oi(i){let e,t,n,s,r,o;t=new Fe({props:{Icon:Xn,label:"Undo"},$$inline:!0}),t.$on("click",i[2]);let a=i[0]&&Ci(i);r=new Fe({props:{Icon:Un,label:"Remove Image"},$$inline:!0}),r.$on("click",i[4]);const c={c:function(){e=ne("div"),Y(t.$$.fragment),n=se(),a&&a.c(),s=se(),Y(r.$$.fragment),w(e,"class","svelte-1g74h68"),B(e,ps,10,0,247)},l:function(u){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(u,h){I(u,e,h),V(t,e,null),ie(e,n),a&&a.m(e,null),ie(e,s),V(r,e,null),o=!0},p:function(u,[h]){u[0]?a?(a.p(u,h),h&1&&D(a,1)):(a=Ci(u),a.c(),D(a,1),a.m(e,s)):a&&(Ee(),C(a,1,1,()=>{a=null}),Se())},i:function(u){o||(D(t.$$.fragment,u),D(a),D(r.$$.fragment,u),o=!0)},o:function(u){C(t.$$.fragment,u),C(a),C(r.$$.fragment,u),o=!1},d:function(u){u&&T(e),q(t),a&&a.d(),q(r)}};return R("SvelteRegisterBlock",{block:c,id:Oi.name,type:"component",source:"",ctx:i}),c}function ws(i,e,t){let{$$slots:n={},$$scope:s}=e;ke("ModifySketch",n,[]);const r=Te();let{show_eraser:o=!1}=e;const a=["show_eraser"];Object.keys(e).forEach(h=>{!~a.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<ModifySketch> was created with unknown prop '${h}'`)});const c=()=>r("undo"),l=h=>{r("clear_mask"),h.stopPropagation()},u=h=>{r("remove_image"),h.stopPropagation()};return i.$$set=h=>{"show_eraser"in h&&t(0,o=h.show_eraser)},i.$capture_state=()=>({createEventDispatcher:Te,IconButton:Fe,Undo:Xn,Clear:Un,Erase:Kn,dispatch:r,show_eraser:o}),i.$inject_state=h=>{"show_eraser"in h&&t(0,o=h.show_eraser)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),[o,r,c,l,u]}class Yt extends ve{constructor(e){super(e),ye(this,e,ws,Oi,me,{show_eraser:0}),R("SvelteRegisterComponent",{component:this,tagName:"ModifySketch",options:e,id:Oi.name})}get show_eraser(){throw new Error("<ModifySketch>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set show_eraser(e){throw new Error("<ModifySketch>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ct="Users/peterallen/Projects/gradio/js/image/interactive/SketchSettings.svelte";function Ii(i){let e,t,n,s,r;const o={c:function(){e=ne("input"),w(e,"aria-label","Brush radius"),w(e,"type","range"),w(e,"min",t=.5*(i[2]/i[6])),w(e,"max",n=75*(i[2]/i[6])),w(e,"class","svelte-1hdlygn"),B(e,Ct,25,3,547)},m:function(c,l){I(c,e,l),zt(e,i[0]),s||(r=[ce(e,"change",i[10]),ce(e,"input",i[10])],s=!0)},p:function(c,l){l&68&&t!==(t=.5*(c[2]/c[6]))&&w(e,"min",t),l&68&&n!==(n=75*(c[2]/c[6]))&&w(e,"max",n),l&1&&zt(e,c[0])},d:function(c){c&&T(e),s=!1,jn(r)}};return R("SvelteRegisterBlock",{block:o,id:Ii.name,type:"if",source:"(21:2) {#if show_size}",ctx:i}),o}function Ti(i){let e,t,n,s;t=new Fe({props:{Icon:Zn,label:"Select brush color"},$$inline:!0}),t.$on("click",i[11]);let r=i[5]&&Pi(i);const o={c:function(){e=ne("span"),Y(t.$$.fragment),n=se(),r&&r.c(),w(e,"class","col svelte-1hdlygn"),B(e,Ct,36,2,751)},m:function(c,l){I(c,e,l),V(t,e,null),ie(e,n),r&&r.m(e,null),s=!0},p:function(c,l){c[5]?r?r.p(c,l):(r=Pi(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:function(c){s||(D(t.$$.fragment,c),s=!0)},o:function(c){C(t.$$.fragment,c),s=!1},d:function(c){c&&T(e),q(t),r&&r.d()}};return R("SvelteRegisterBlock",{block:o,id:Ti.name,type:"if",source:'(32:1) {#if mode !== \\"mask\\"}',ctx:i}),o}function Pi(i){let e,t,n;const s={c:function(){e=ne("input"),w(e,"aria-label","Brush color"),w(e,"type","color"),w(e,"class","svelte-1hdlygn"),B(e,Ct,43,4,905)},m:function(o,a){I(o,e,a),zt(e,i[1]),t||(n=ce(e,"input",i[12]),t=!0)},p:function(o,a){a&2&&zt(e,o[1])},d:function(o){o&&T(e),t=!1,n()}};return R("SvelteRegisterBlock",{block:s,id:Pi.name,type:"if",source:"(39:3) {#if show_col}",ctx:i}),s}function Bi(i){let e,t,n,s,r,o;n=new Fe({props:{Icon:qn,label:"Use brush"},$$inline:!0}),n.$on("click",i[9]);let a=i[4]&&Ii(i),c=i[3]!=="mask"&&Ti(i);const l={c:function(){e=ne("div"),t=ne("span"),Y(n.$$.fragment),s=se(),a&&a.c(),r=se(),c&&c.c(),w(t,"class","brush svelte-1hdlygn"),B(t,Ct,18,1,404),w(e,"class","wrap svelte-1hdlygn"),B(e,Ct,17,0,384)},l:function(h){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(h,f){I(h,e,f),ie(e,t),V(n,t,null),ie(t,s),a&&a.m(t,null),ie(e,r),c&&c.m(e,null),o=!0},p:function(h,[f]){h[4]?a?a.p(h,f):(a=Ii(h),a.c(),a.m(t,null)):a&&(a.d(1),a=null),h[3]!=="mask"?c?(c.p(h,f),f&8&&D(c,1)):(c=Ti(h),c.c(),D(c,1),c.m(e,null)):c&&(Ee(),C(c,1,1,()=>{c=null}),Se())},i:function(h){o||(D(n.$$.fragment,h),D(c),o=!0)},o:function(h){C(n.$$.fragment,h),C(c),o=!1},d:function(h){h&&T(e),q(n),a&&a.d(),c&&c.d()}};return R("SvelteRegisterBlock",{block:l,id:Bi.name,type:"component",source:"",ctx:i}),l}function bs(i,e,t){let n,{$$slots:s={},$$scope:r}=e;ke("SketchSettings",s,[]);let o=!1,a=!1,{brush_radius:c=20}=e,{brush_color:l="#000"}=e,{container_height:u}=e,{img_width:h}=e,{img_height:f}=e,{mode:p="other"}=e;i.$$.on_mount.push(function(){u===void 0&&!("container_height"in e||i.$$.bound[i.$$.props.container_height])&&console.warn("<SketchSettings> was created without expected prop 'container_height'"),h===void 0&&!("img_width"in e||i.$$.bound[i.$$.props.img_width])&&console.warn("<SketchSettings> was created without expected prop 'img_width'"),f===void 0&&!("img_height"in e||i.$$.bound[i.$$.props.img_height])&&console.warn("<SketchSettings> was created without expected prop 'img_height'")});const _=["brush_radius","brush_color","container_height","img_width","img_height","mode"];Object.keys(e).forEach(E=>{!~_.indexOf(E)&&E.slice(0,2)!=="$$"&&E!=="slot"&&console.warn(`<SketchSettings> was created with unknown prop '${E}'`)});const m=()=>t(4,o=!o);function v(){c=Yr(this.value),t(0,c)}const S=()=>t(5,a=!a);function O(){l=this.value,t(1,l)}return i.$$set=E=>{"brush_radius"in E&&t(0,c=E.brush_radius),"brush_color"in E&&t(1,l=E.brush_color),"container_height"in E&&t(7,u=E.container_height),"img_width"in E&&t(2,h=E.img_width),"img_height"in E&&t(8,f=E.img_height),"mode"in E&&t(3,p=E.mode)},i.$capture_state=()=>({IconButton:Fe,Brush:qn,Color:Zn,show_size:o,show_col:a,brush_radius:c,brush_color:l,container_height:u,img_width:h,img_height:f,mode:p,width:n}),i.$inject_state=E=>{"show_size"in E&&t(4,o=E.show_size),"show_col"in E&&t(5,a=E.show_col),"brush_radius"in E&&t(0,c=E.brush_radius),"brush_color"in E&&t(1,l=E.brush_color),"container_height"in E&&t(7,u=E.container_height),"img_width"in E&&t(2,h=E.img_width),"img_height"in E&&t(8,f=E.img_height),"mode"in E&&t(3,p=E.mode),"width"in E&&t(6,n=E.width)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),i.$$.update=()=>{i.$$.dirty&388&&t(6,n=u*(h/f))},[c,l,h,p,o,a,n,u,f,m,v,S,O]}class Vt extends ve{constructor(e){super(e),ye(this,e,bs,Bi,me,{brush_radius:0,brush_color:1,container_height:7,img_width:2,img_height:8,mode:3}),R("SvelteRegisterComponent",{component:this,tagName:"SketchSettings",options:e,id:Bi.name})}get brush_radius(){throw new Error("<SketchSettings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set brush_radius(e){throw new Error("<SketchSettings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get brush_color(){throw new Error("<SketchSettings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set brush_color(e){throw new Error("<SketchSettings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get container_height(){throw new Error("<SketchSettings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set container_height(e){throw new Error("<SketchSettings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get img_width(){throw new Error("<SketchSettings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set img_width(e){throw new Error("<SketchSettings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get img_height(){throw new Error("<SketchSettings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set img_height(e){throw new Error("<SketchSettings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mode(){throw new Error("<SketchSettings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(e){throw new Error("<SketchSettings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Le}=qi,Qe="Users/peterallen/Projects/gradio/js/image/interactive/Image.svelte";function yr(i){let e,t,n,s;const r={c:function(){e=ne("img"),pe(e.src,t=i[16].image||i[16].data)||w(e,"src",t),w(e,"alt",""),w(e,"class","svelte-14sn87y"),Z(e,"webcam",i[6]==="webcam"&&i[10]),Z(e,"selectable",i[12]),B(e,Qe,398,2,9535)},m:function(a,c){I(a,e,c),n||(s=ce(e,"click",i[32],!1,!1,!1,!1),n=!0)},p:function(a,c){c[0]&65536&&!pe(e.src,t=a[16].image||a[16].data)&&w(e,"src",t),c[0]&1088&&Z(e,"webcam",a[6]==="webcam"&&a[10]),c[0]&4096&&Z(e,"selectable",a[12])},i:X,o:X,d:function(a){a&&T(e),n=!1,s()}};return R("SvelteRegisterBlock",{block:r,id:yr.name,type:"else",source:"(354:1) {:else}",ctx:i}),r}function kr(i){let e=i[25],t,n,s,r=Ai(i),o=i[19]>0&&Ni(i);const a={c:function(){r.c(),t=se(),o&&o.c(),n=Ke()},m:function(l,u){r.m(l,u),I(l,t,u),o&&o.m(l,u),I(l,n,u),s=!0},p:function(l,u){u[0]&33554432&&me(e,e=l[25])?(r.d(1),r=Ai(l),r.c(),r.m(t.parentNode,t)):r.p(l,u),l[19]>0?o?(o.p(l,u),u[0]&524288&&D(o,1)):(o=Ni(l),o.c(),D(o,1),o.m(n.parentNode,n)):o&&(Ee(),C(o,1,1,()=>{o=null}),Se())},i:function(l){s||(D(o),s=!0)},o:function(l){C(o),s=!1},d:function(l){l&&(T(t),T(n)),r.d(l),o&&o.d(l)}};return R("SvelteRegisterBlock",{block:a,id:kr.name,type:"if",source:"(314:94) ",ctx:i}),a}function Er(i){let e,t,n,s,r,o,a;e=new Ot({props:{editable:!0},$$inline:!0}),e.$on("edit",i[55]),e.$on("clear",i[27]);const c={c:function(){Y(e.$$.fragment),t=se(),n=ne("img"),pe(n.src,s=i[16])||w(n,"src",s),w(n,"alt",""),w(n,"class","svelte-14sn87y"),Z(n,"selectable",i[12]),Z(n,"webcam",i[6]==="webcam"&&i[10]),B(n,Qe,346,2,8210)},m:function(u,h){V(e,u,h),I(u,t,h),I(u,n,h),r=!0,o||(a=ce(n,"click",i[32],!1,!1,!1,!1),o=!0)},p:function(u,h){(!r||h[0]&65536&&!pe(n.src,s=u[16]))&&w(n,"src",s),(!r||h[0]&4096)&&Z(n,"selectable",u[12]),(!r||h[0]&1088)&&Z(n,"webcam",u[6]==="webcam"&&u[10])},i:function(u){r||(D(e.$$.fragment,u),r=!0)},o:function(u){C(e.$$.fragment,u),r=!1},d:function(u){u&&(T(t),T(n)),q(e,u),o=!1,a()}};return R("SvelteRegisterBlock",{block:c,id:Er.name,type:"if",source:"(297:29) ",ctx:i}),c}function Sr(i){let e,t,n,s,r={image:i[0].data};e=new xi({props:r,$$inline:!0}),i[53](e),e.$on("crop",i[28]),n=new Ot({$$inline:!0}),n.$on("clear",i[54]);const o={c:function(){Y(e.$$.fragment),t=se(),Y(n.$$.fragment)},m:function(c,l){V(e,c,l),I(c,t,l),V(n,c,l),s=!0},p:function(c,l){const u={};l[0]&1&&(u.image=c[0].data),e.$set(u)},i:function(c){s||(D(e.$$.fragment,c),D(n.$$.fragment,c),s=!0)},o:function(c){C(e.$$.fragment,c),C(n.$$.fragment,c),s=!1},d:function(c){c&&T(t),i[53](null),q(e,c),q(n,c)}};return R("SvelteRegisterBlock",{block:o,id:Sr.name,type:"if",source:"(294:29) ",ctx:i}),o}function Mr(i){let e,t,n=i[6]==="webcam"&&!i[25]&&ji(i);const s={c:function(){n&&n.c(),e=Ke()},m:function(o,a){n&&n.m(o,a),I(o,e,a),t=!0},p:function(o,a){o[6]==="webcam"&&!o[25]?n?(n.p(o,a),a[0]&33554496&&D(n,1)):(n=ji(o),n.c(),D(n,1),n.m(e.parentNode,e)):n&&(Ee(),C(n,1,1,()=>{n=null}),Se())},i:function(o){t||(D(n),t=!0)},o:function(o){C(n),t=!1},d:function(o){o&&T(e),n&&n.d(o)}};return R("SvelteRegisterBlock",{block:s,id:Mr.name,type:"if",source:"(282:58) ",ctx:i}),s}function Dr(i){let e,t,n,s,r,o,a;e=new Yt({$$inline:!0}),e.$on("undo",i[45]),e.$on("remove_image",i[30]);let c=i[1]==="color-sketch"&&Li(i);function l(p){i[48](p)}function u(p){i[49](p)}let h={value:i[0],mode:i[21],width:i[19]||i[24],height:i[18]||i[23],container_height:i[20]||i[23],shape:i[7]};i[2]!==void 0&&(h.brush_radius=i[2]),i[3]!==void 0&&(h.brush_color=i[3]),s=new Xt({props:h,$$inline:!0}),J.push(()=>we(s,"brush_radius",l)),J.push(()=>we(s,"brush_color",u)),i[50](s),s.$on("change",i[28]),s.$on("clear",i[30]);const f={c:function(){Y(e.$$.fragment),t=se(),c&&c.c(),n=se(),Y(s.$$.fragment)},m:function(_,m){V(e,_,m),I(_,t,m),c&&c.m(_,m),I(_,n,m),V(s,_,m),a=!0},p:function(_,m){_[1]==="color-sketch"?c?(c.p(_,m),m[0]&2&&D(c,1)):(c=Li(_),c.c(),D(c,1),c.m(n.parentNode,n)):c&&(Ee(),C(c,1,1,()=>{c=null}),Se());const v={};m[0]&1&&(v.value=_[0]),m[0]&2097152&&(v.mode=_[21]),m[0]&17301504&&(v.width=_[19]||_[24]),m[0]&8650752&&(v.height=_[18]||_[23]),m[0]&9437184&&(v.container_height=_[20]||_[23]),m[0]&128&&(v.shape=_[7]),!r&&m[0]&4&&(r=!0,v.brush_radius=_[2],be(()=>r=!1)),!o&&m[0]&8&&(o=!0,v.brush_color=_[3],be(()=>o=!1)),s.$set(v)},i:function(_){a||(D(e.$$.fragment,_),D(c),D(s.$$.fragment,_),a=!0)},o:function(_){C(e.$$.fragment,_),C(c),C(s.$$.fragment,_),a=!1},d:function(_){_&&(T(t),T(n)),q(e,_),c&&c.d(_),i[50](null),q(s,_)}};return R("SvelteRegisterBlock",{block:f,id:Dr.name,type:"if",source:"(255:31) ",ctx:i}),f}function Rr(i){let e,t,n;function s(a){i[44](a)}let r={filetype:"image/*",include_file_metadata:!1,disable_click:!!i[0],root:i[13],$$slots:{default:[Br]},$$scope:{ctx:i}};i[15]!==void 0&&(r.dragging=i[15]),e=new Yn({props:r,$$inline:!0}),J.push(()=>we(e,"dragging",s)),e.$on("load",i[26]);const o={c:function(){Y(e.$$.fragment)},m:function(c,l){V(e,c,l),n=!0},p:function(c,l){const u={};l[0]&1&&(u.disable_click=!!c[0]),l[0]&8192&&(u.root=c[13]),l[0]&67067343|l[2]&4&&(u.$$scope={dirty:l,ctx:c}),!t&&l[0]&32768&&(t=!0,u.dragging=c[15],be(()=>t=!1)),e.$set(u)},i:function(c){n||(D(e.$$.fragment,c),n=!0)},o:function(c){C(e.$$.fragment,c),n=!1},d:function(c){q(e,c)}};return R("SvelteRegisterBlock",{block:o,id:Rr.name,type:"if",source:'(167:1) {#if source === \\"upload\\"}',ctx:i}),o}function Ai(i){let e,t,n,s;const r={c:function(){e=ne("img"),w(e,"class","absolute-img svelte-14sn87y"),pe(e.src,t=i[25]||i[16])||w(e,"src",t),w(e,"alt",""),Z(e,"webcam",i[6]==="webcam"&&i[10]),B(e,Qe,355,3,8468)},m:function(a,c){I(a,e,c),i[56](e),n||(s=ce(e,"load",i[29],!1,!1,!1,!1),n=!0)},p:function(a,c){c[0]&33619968&&!pe(e.src,t=a[25]||a[16])&&w(e,"src",t),c[0]&1088&&Z(e,"webcam",a[6]==="webcam"&&a[10])},d:function(a){a&&T(e),i[56](null),n=!1,s()}};return R("SvelteRegisterBlock",{block:r,id:Ai.name,type:"key",source:"(315:2) {#key static_image}",ctx:i}),r}function Ni(i){let e,t,n,s,r,o,a,c;function l(_){i[58](_)}function u(_){i[59](_)}let h={value:i[0],mode:i[21],width:i[19]||i[24],height:i[18]||i[23],container_height:i[20]||i[23],value_img:i[22],source:i[6]};i[2]!==void 0&&(h.brush_radius=i[2]),i[3]!==void 0&&(h.brush_color=i[3]),e=new Xt({props:h,$$inline:!0}),i[57](e),J.push(()=>we(e,"brush_radius",l)),J.push(()=>we(e,"brush_color",u)),e.$on("change",i[28]),r=new Yt({$$inline:!0}),r.$on("undo",i[60]),r.$on("remove_image",i[30]);let f=(i[1]==="color-sketch"||i[1]==="sketch")&&zi(i);const p={c:function(){Y(e.$$.fragment),s=se(),Y(r.$$.fragment),o=se(),f&&f.c(),a=Ke()},m:function(m,v){V(e,m,v),I(m,s,v),V(r,m,v),I(m,o,v),f&&f.m(m,v),I(m,a,v),c=!0},p:function(m,v){const S={};v[0]&1&&(S.value=m[0]),v[0]&2097152&&(S.mode=m[21]),v[0]&17301504&&(S.width=m[19]||m[24]),v[0]&8650752&&(S.height=m[18]||m[23]),v[0]&9437184&&(S.container_height=m[20]||m[23]),v[0]&4194304&&(S.value_img=m[22]),v[0]&64&&(S.source=m[6]),!t&&v[0]&4&&(t=!0,S.brush_radius=m[2],be(()=>t=!1)),!n&&v[0]&8&&(n=!0,S.brush_color=m[3],be(()=>n=!1)),e.$set(S),m[1]==="color-sketch"||m[1]==="sketch"?f?(f.p(m,v),v[0]&2&&D(f,1)):(f=zi(m),f.c(),D(f,1),f.m(a.parentNode,a)):f&&(Ee(),C(f,1,1,()=>{f=null}),Se())},i:function(m){c||(D(e.$$.fragment,m),D(r.$$.fragment,m),D(f),c=!0)},o:function(m){C(e.$$.fragment,m),C(r.$$.fragment,m),C(f),c=!1},d:function(m){m&&(T(s),T(o),T(a)),i[57](null),q(e,m),q(r,m),f&&f.d(m)}};return R("SvelteRegisterBlock",{block:p,id:Ni.name,type:"if",source:"(325:2) {#if img_width > 0}",ctx:i}),p}function zi(i){let e,t,n,s;function r(l){i[61](l)}function o(l){i[62](l)}let a={container_height:i[20]||i[23],img_width:i[19]||i[24],img_height:i[18]||i[23],mode:i[21]};i[2]!==void 0&&(a.brush_radius=i[2]),i[3]!==void 0&&(a.brush_color=i[3]),e=new Vt({props:a,$$inline:!0}),J.push(()=>we(e,"brush_radius",r)),J.push(()=>we(e,"brush_color",o));const c={c:function(){Y(e.$$.fragment)},m:function(u,h){V(e,u,h),s=!0},p:function(u,h){const f={};h[0]&9437184&&(f.container_height=u[20]||u[23]),h[0]&17301504&&(f.img_width=u[19]||u[24]),h[0]&8650752&&(f.img_height=u[18]||u[23]),h[0]&2097152&&(f.mode=u[21]),!t&&h[0]&4&&(t=!0,f.brush_radius=u[2],be(()=>t=!1)),!n&&h[0]&8&&(n=!0,f.brush_color=u[3],be(()=>n=!1)),e.$set(f)},i:function(u){s||(D(e.$$.fragment,u),s=!0)},o:function(u){C(e.$$.fragment,u),s=!1},d:function(u){q(e,u)}};return R("SvelteRegisterBlock",{block:c,id:zi.name,type:"if",source:'(343:3) {#if tool === \\"color-sketch\\" || tool === \\"sketch\\"}',ctx:i}),c}function ji(i){let e,t;e=new tr({props:{streaming:i[8],pending:i[9],mirror_webcam:i[10]},$$inline:!0}),e.$on("capture",i[51]),e.$on("stream",i[28]),e.$on("error",i[52]);const n={c:function(){Y(e.$$.fragment)},m:function(r,o){V(e,r,o),t=!0},p:function(r,o){const a={};o[0]&256&&(a.streaming=r[8]),o[0]&512&&(a.pending=r[9]),o[0]&1024&&(a.mirror_webcam=r[10]),e.$set(a)},i:function(r){t||(D(e.$$.fragment,r),t=!0)},o:function(r){C(e.$$.fragment,r),t=!1},d:function(r){q(e,r)}};return R("SvelteRegisterBlock",{block:n,id:ji.name,type:"if",source:'(283:2) {#if source === \\"webcam\\" && !static_image}',ctx:i}),n}function Li(i){let e,t,n,s;function r(l){i[46](l)}function o(l){i[47](l)}let a={container_height:i[20]||i[23],img_width:i[19]||i[24],img_height:i[18]||i[23]};i[2]!==void 0&&(a.brush_radius=i[2]),i[3]!==void 0&&(a.brush_color=i[3]),e=new Vt({props:a,$$inline:!0}),J.push(()=>we(e,"brush_radius",r)),J.push(()=>we(e,"brush_color",o));const c={c:function(){Y(e.$$.fragment)},m:function(u,h){V(e,u,h),s=!0},p:function(u,h){const f={};h[0]&9437184&&(f.container_height=u[20]||u[23]),h[0]&17301504&&(f.img_width=u[19]||u[24]),h[0]&8650752&&(f.img_height=u[18]||u[23]),!t&&h[0]&4&&(t=!0,f.brush_radius=u[2],be(()=>t=!1)),!n&&h[0]&8&&(n=!0,f.brush_color=u[3],be(()=>n=!1)),e.$set(f)},i:function(u){s||(D(e.$$.fragment,u),s=!0)},o:function(u){C(e.$$.fragment,u),s=!1},d:function(u){q(e,u)}};return R("SvelteRegisterBlock",{block:c,id:Li.name,type:"if",source:'(260:2) {#if tool === \\"color-sketch\\"}',ctx:i}),c}function Cr(i){let e,t,n,s;const r={c:function(){e=ne("img"),pe(e.src,t=i[0].image||i[0].data)||w(e,"src",t),w(e,"alt","hello"),w(e,"class","svelte-14sn87y"),Z(e,"webcam",i[6]==="webcam"&&i[10]),Z(e,"selectable",i[12]),B(e,Qe,285,4,6578)},m:function(a,c){I(a,e,c),n||(s=ce(e,"click",i[32],!1,!1,!1,!1),n=!0)},p:function(a,c){c[0]&1&&!pe(e.src,t=a[0].image||a[0].data)&&w(e,"src",t),c[0]&1088&&Z(e,"webcam",a[6]==="webcam"&&a[10]),c[0]&4096&&Z(e,"selectable",a[12])},i:X,o:X,d:function(a){a&&T(e),n=!1,s()}};return R("SvelteRegisterBlock",{block:r,id:Cr.name,type:"else",source:"(242:3) {:else}",ctx:i}),r}function Or(i){let e=i[25],t,n,s,r=Wi(i),o=i[19]>0&&Hi(i);const a={c:function(){r.c(),t=se(),o&&o.c(),n=Ke()},m:function(l,u){r.m(l,u),I(l,t,u),o&&o.m(l,u),I(l,n,u),s=!0},p:function(l,u){u[0]&33554432&&me(e,e=l[25])?(r.d(1),r=Wi(l),r.c(),r.m(t.parentNode,t)):r.p(l,u),l[19]>0?o?(o.p(l,u),u[0]&524288&&D(o,1)):(o=Hi(l),o.c(),D(o,1),o.m(n.parentNode,n)):o&&(Ee(),C(o,1,1,()=>{o=null}),Se())},i:function(l){s||(D(o),s=!0)},o:function(l){C(o),s=!1},d:function(l){l&&(T(t),T(n)),r.d(l),o&&o.d(l)}};return R("SvelteRegisterBlock",{block:a,id:Or.name,type:"if",source:"(198:96) ",ctx:i}),a}function Ir(i){let e,t,n,s,r,o,a;e=new Ot({props:{editable:!0},$$inline:!0}),e.$on("edit",i[36]),e.$on("clear",i[27]);const c={c:function(){Y(e.$$.fragment),t=se(),n=ne("img"),pe(n.src,s=i[16].data)||w(n,"src",s),w(n,"alt",""),w(n,"class","svelte-14sn87y"),Z(n,"scale-x-[-1]",i[6]==="webcam"&&i[10]),Z(n,"selectable",i[12]),B(n,Qe,230,4,5022)},m:function(u,h){V(e,u,h),I(u,t,h),I(u,n,h),r=!0,o||(a=ce(n,"click",i[32],!1,!1,!1,!1),o=!0)},p:function(u,h){(!r||h[0]&65536&&!pe(n.src,s=u[16].data))&&w(n,"src",s),(!r||h[0]&1088)&&Z(n,"scale-x-[-1]",u[6]==="webcam"&&u[10]),(!r||h[0]&4096)&&Z(n,"selectable",u[12])},i:function(u){r||(D(e.$$.fragment,u),r=!0)},o:function(u){C(e.$$.fragment,u),r=!1},d:function(u){u&&(T(t),T(n)),q(e,u),o=!1,a()}};return R("SvelteRegisterBlock",{block:c,id:Ir.name,type:"if",source:"(181:31) ",ctx:i}),c}function Tr(i){let e,t,n,s,r={image:i[16].data};e=new xi({props:r,$$inline:!0}),i[34](e),e.$on("crop",i[28]),n=new Ot({$$inline:!0}),n.$on("clear",i[35]);const o={c:function(){Y(e.$$.fragment),t=se(),Y(n.$$.fragment)},m:function(c,l){V(e,c,l),I(c,t,l),V(n,c,l),s=!0},p:function(c,l){const u={};l[0]&65536&&(u.image=c[16].data),e.$set(u)},i:function(c){s||(D(e.$$.fragment,c),D(n.$$.fragment,c),s=!0)},o:function(c){C(e.$$.fragment,c),C(n.$$.fragment,c),s=!1},d:function(c){c&&T(t),i[34](null),q(e,c),q(n,c)}};return R("SvelteRegisterBlock",{block:o,id:Tr.name,type:"if",source:"(178:31) ",ctx:i}),o}function Pr(i){let e;const t=i[33].default,n=Vr(t,i,i[64],null),s={c:function(){n&&n.c()},m:function(o,a){n&&n.m(o,a),e=!0},p:function(o,a){n&&n.p&&(!e||a[2]&4)&&qr(n,t,o,o[64],e?Fr(t,o[64],a,null):Gr(o[64]),null)},i:function(o){e||(D(n,o),e=!0)},o:function(o){C(n,o),e=!1},d:function(o){n&&n.d(o)}};return R("SvelteRegisterBlock",{block:s,id:Pr.name,type:"if",source:"(176:3) {#if (value === null && !static_image) || streaming}",ctx:i}),s}function Wi(i){let e,t,n,s;const r={c:function(){e=ne("img"),w(e,"class","absolute-img svelte-14sn87y"),pe(e.src,t=i[25]||i[0]?.image||i[0])||w(e,"src",t),w(e,"alt",""),Z(e,"webcam",i[6]==="webcam"&&i[10]),B(e,Qe,239,5,5309)},m:function(a,c){I(a,e,c),i[37](e),n||(s=ce(e,"load",i[29],!1,!1,!1,!1),n=!0)},p:function(a,c){c[0]&33554433&&!pe(e.src,t=a[25]||a[0]?.image||a[0])&&w(e,"src",t),c[0]&1088&&Z(e,"webcam",a[6]==="webcam"&&a[10])},d:function(a){a&&T(e),i[37](null),n=!1,s()}};return R("SvelteRegisterBlock",{block:r,id:Wi.name,type:"key",source:"(199:4) {#key static_image}",ctx:i}),r}function Hi(i){let e,t,n,s,r,o,a,c;function l(_){i[39](_)}function u(_){i[40](_)}let h={value:i[0],mask_opacity:i[11],mode:i[21],width:i[19]||i[24],height:i[18]||i[23],container_height:i[20]||i[23],value_img:i[22],source:i[6],shape:i[7]};i[2]!==void 0&&(h.brush_radius=i[2]),i[3]!==void 0&&(h.brush_color=i[3]),e=new Xt({props:h,$$inline:!0}),i[38](e),J.push(()=>we(e,"brush_radius",l)),J.push(()=>we(e,"brush_color",u)),e.$on("change",i[28]),r=new Yt({props:{show_eraser:i[22]},$$inline:!0}),r.$on("undo",i[41]),r.$on("clear_mask",i[31]),r.$on("remove_image",i[30]);let f=(i[1]==="color-sketch"||i[1]==="sketch")&&Ui(i);const p={c:function(){Y(e.$$.fragment),s=se(),Y(r.$$.fragment),o=se(),f&&f.c(),a=Ke()},m:function(m,v){V(e,m,v),I(m,s,v),V(r,m,v),I(m,o,v),f&&f.m(m,v),I(m,a,v),c=!0},p:function(m,v){const S={};v[0]&1&&(S.value=m[0]),v[0]&2048&&(S.mask_opacity=m[11]),v[0]&2097152&&(S.mode=m[21]),v[0]&17301504&&(S.width=m[19]||m[24]),v[0]&8650752&&(S.height=m[18]||m[23]),v[0]&9437184&&(S.container_height=m[20]||m[23]),v[0]&4194304&&(S.value_img=m[22]),v[0]&64&&(S.source=m[6]),v[0]&128&&(S.shape=m[7]),!t&&v[0]&4&&(t=!0,S.brush_radius=m[2],be(()=>t=!1)),!n&&v[0]&8&&(n=!0,S.brush_color=m[3],be(()=>n=!1)),e.$set(S);const O={};v[0]&4194304&&(O.show_eraser=m[22]),r.$set(O),m[1]==="color-sketch"||m[1]==="sketch"?f?(f.p(m,v),v[0]&2&&D(f,1)):(f=Ui(m),f.c(),D(f,1),f.m(a.parentNode,a)):f&&(Ee(),C(f,1,1,()=>{f=null}),Se())},i:function(m){c||(D(e.$$.fragment,m),D(r.$$.fragment,m),D(f),c=!0)},o:function(m){C(e.$$.fragment,m),C(r.$$.fragment,m),C(f),c=!1},d:function(m){m&&(T(s),T(o),T(a)),i[38](null),q(e,m),q(r,m),f&&f.d(m)}};return R("SvelteRegisterBlock",{block:p,id:Hi.name,type:"if",source:"(209:4) {#if img_width > 0}",ctx:i}),p}function Ui(i){let e,t,n,s;function r(l){i[42](l)}function o(l){i[43](l)}let a={container_height:i[20]||i[23],img_width:i[19]||i[24],img_height:i[18]||i[23],mode:i[21]};i[2]!==void 0&&(a.brush_radius=i[2]),i[3]!==void 0&&(a.brush_color=i[3]),e=new Vt({props:a,$$inline:!0}),J.push(()=>we(e,"brush_radius",r)),J.push(()=>we(e,"brush_color",o));const c={c:function(){Y(e.$$.fragment)},m:function(u,h){V(e,u,h),s=!0},p:function(u,h){const f={};h[0]&9437184&&(f.container_height=u[20]||u[23]),h[0]&17301504&&(f.img_width=u[19]||u[24]),h[0]&8650752&&(f.img_height=u[18]||u[23]),h[0]&2097152&&(f.mode=u[21]),!t&&h[0]&4&&(t=!0,f.brush_radius=u[2],be(()=>t=!1)),!n&&h[0]&8&&(n=!0,f.brush_color=u[3],be(()=>n=!1)),e.$set(f)},i:function(u){s||(D(e.$$.fragment,u),s=!0)},o:function(u){C(e.$$.fragment,u),s=!1},d:function(u){q(e,u)}};return R("SvelteRegisterBlock",{block:c,id:Ui.name,type:"if",source:'(231:5) {#if tool === \\"color-sketch\\" || tool === \\"sketch\\"}',ctx:i}),c}function Br(i){let e,t,n,s;const r=[Pr,Tr,Ir,Or,Cr],o=[];function a(l,u){return l[0]===null&&!l[25]||l[8]?0:l[1]==="select"?1:l[1]==="editor"?2:(l[1]==="sketch"||l[1]==="color-sketch")&&(l[0]!==null||l[25])?3:4}e=a(i),t=o[e]=r[e](i);const c={c:function(){t.c(),n=Ke()},m:function(u,h){o[e].m(u,h),I(u,n,h),s=!0},p:function(u,h){let f=e;e=a(u),e===f?o[e].p(u,h):(Ee(),C(o[f],1,1,()=>{o[f]=null}),Se(),t=o[e],t?t.p(u,h):(t=o[e]=r[e](u),t.c()),D(t,1),t.m(n.parentNode,n))},i:function(u){s||(D(t),s=!0)},o:function(u){C(t),s=!1},d:function(u){u&&T(n),o[e].d(u)}};return R("SvelteRegisterBlock",{block:c,id:Br.name,type:"slot",source:'(168:2) <Upload    bind:dragging    filetype=\\"image/*\\"    on:load={handle_upload}    include_file_metadata={false}    disable_click={!!value}    root={root}   >',ctx:i}),c}function Xi(i){let e,t,n,s,r,o,a;e=new Hn({props:{show_label:i[5],Icon:i[6]==="canvas"?li:ii,label:i[4]||(i[6]==="canvas"?"Sketch":"Image")},$$inline:!0});const c=[Rr,Dr,Mr,Sr,Er,kr,yr],l=[];function u(f,p){return f[6]==="upload"?0:f[6]==="canvas"?1:f[0]===null&&!f[25]||f[8]?2:f[1]==="select"?3:f[1]==="editor"?4:(f[1]==="sketch"||f[1]==="color-sketch")&&(f[0]!==null||f[25])?5:6}s=u(i),r=l[s]=c[s](i);const h={c:function(){Y(e.$$.fragment),t=se(),n=ne("div"),r.c(),w(n,"data-testid","image"),w(n,"class","image-container svelte-14sn87y"),Gi(()=>i[63].call(n)),B(n,Qe,200,0,4173)},l:function(p){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(p,_){V(e,p,_),I(p,t,_),I(p,n,_),l[s].m(n,null),o=Nn(n,i[63].bind(n)),a=!0},p:function(p,_){const m={};_[0]&32&&(m.show_label=p[5]),_[0]&64&&(m.Icon=p[6]==="canvas"?li:ii),_[0]&80&&(m.label=p[4]||(p[6]==="canvas"?"Sketch":"Image")),e.$set(m);let v=s;s=u(p),s===v?l[s].p(p,_):(Ee(),C(l[v],1,1,()=>{l[v]=null}),Se(),r=l[s],r?r.p(p,_):(r=l[s]=c[s](p),r.c()),D(r,1),r.m(n,null))},i:function(p){a||(D(e.$$.fragment,p),D(r),a=!0)},o:function(p){C(e.$$.fragment,p),C(r),a=!1},d:function(p){p&&(T(t),T(n)),q(e,p),l[s].d(),o()}};return R("SvelteRegisterBlock",{block:h,id:Xi.name,type:"component",source:"",ctx:i}),h}function vs(i,e,t){let{$$slots:n={},$$scope:s}=e;ke("Image",n,["default"]);let{value:r}=e,{label:o=void 0}=e,{show_label:a}=e,{source:c="upload"}=e,{tool:l="editor"}=e,{shape:u}=e,{streaming:h=!1}=e,{pending:f=!1}=e,{mirror_webcam:p}=e,{brush_radius:_}=e,{brush_color:m="#000000"}=e,{mask_opacity:v}=e,{selectable:S=!1}=e,{root:O}=e,E,N;r&&(c==="upload"||c==="webcam")&&l==="sketch"&&(r={image:r,mask:null});function L({detail:g}){l==="color-sketch"?t(25,fe=g):t(0,r=(c==="upload"||c==="webcam")&&l==="sketch"?{image:g,mask:null}:g),y("upload",g)}function k({detail:g}){t(0,r=null),t(25,fe=void 0),y("clear")}async function P({detail:g},F){K==="mask"?c==="webcam"&&F?t(0,r={image:g,mask:null}):t(0,r={image:typeof r=="string"?r:r?.image||null,mask:g}):(c==="upload"||c==="webcam")&&l==="sketch"?t(0,r={image:g,mask:null}):t(0,r=g),await Ae(),y(h?"stream":"edit")}const y=Te();let M=!1,z=null;function W(g){const F=g.currentTarget;t(19,G=F.naturalWidth),t(18,x=F.naturalHeight),t(20,U=F.getBoundingClientRect().height)}async function H(){E.clear(),await Ae(),t(0,r=null),t(25,fe=void 0)}async function te(){E.clear_mask(),await Ae()}let x=0,G=0,U=0,K,ae,ue,de,fe;Ge(async()=>{l==="color-sketch"&&r&&typeof r=="string"&&(t(25,fe=r),await Ae(),W({currentTarget:ae}))});function Re(g){let F=an(g);F&&y("select",{index:F,value:null})}i.$$.on_mount.push(function(){r===void 0&&!("value"in e||i.$$.bound[i.$$.props.value])&&Le.warn("<Image> was created without expected prop 'value'"),a===void 0&&!("show_label"in e||i.$$.bound[i.$$.props.show_label])&&Le.warn("<Image> was created without expected prop 'show_label'"),u===void 0&&!("shape"in e||i.$$.bound[i.$$.props.shape])&&Le.warn("<Image> was created without expected prop 'shape'"),p===void 0&&!("mirror_webcam"in e||i.$$.bound[i.$$.props.mirror_webcam])&&Le.warn("<Image> was created without expected prop 'mirror_webcam'"),_===void 0&&!("brush_radius"in e||i.$$.bound[i.$$.props.brush_radius])&&Le.warn("<Image> was created without expected prop 'brush_radius'"),v===void 0&&!("mask_opacity"in e||i.$$.bound[i.$$.props.mask_opacity])&&Le.warn("<Image> was created without expected prop 'mask_opacity'"),O===void 0&&!("root"in e||i.$$.bound[i.$$.props.root])&&Le.warn("<Image> was created without expected prop 'root'")});const Be=["value","label","show_label","source","tool","shape","streaming","pending","mirror_webcam","brush_radius","brush_color","mask_opacity","selectable","root"];Object.keys(e).forEach(g=>{!~Be.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&Le.warn(`<Image> was created with unknown prop '${g}'`)});function b(g){J[g?"unshift":"push"](()=>{N=g,t(14,N),t(0,r)})}const Je=g=>(k(g),t(1,l="editor")),Ue=()=>t(1,l="select");function _t(g){J[g?"unshift":"push"](()=>{ae=g,t(22,ae)})}function xe(g){J[g?"unshift":"push"](()=>{E=g,t(17,E)})}function pt(g){_=g,t(2,_)}function $e(g){m=g,t(3,m)}const et=()=>E.undo();function tt(g){_=g,t(2,_)}function it(g){m=g,t(3,m)}function nt(g){M=g,t(15,M)}const Ne=()=>E.undo();function rt(g){_=g,t(2,_)}function ot(g){m=g,t(3,m)}function st(g){_=g,t(2,_)}function at(g){m=g,t(3,m)}function ct(g){J[g?"unshift":"push"](()=>{E=g,t(17,E)})}const Ce=g=>l==="color-sketch"?L(g):P(g,!0);function ze(g){zn.call(this,i,g)}function wt(g){J[g?"unshift":"push"](()=>{N=g,t(14,N),t(0,r)})}const Xe=g=>(k(g),t(1,l="editor")),bt=()=>t(1,l="select");function vt(g){J[g?"unshift":"push"](()=>{ae=g,t(22,ae)})}function qt(g){J[g?"unshift":"push"](()=>{E=g,t(17,E)})}function Gt(g){_=g,t(2,_)}function Ft(g){m=g,t(3,m)}const Zt=()=>E.undo();function Kt(g){_=g,t(2,_)}function d(g){m=g,t(3,m)}function A(){ue=this.offsetHeight,de=this.offsetWidth,t(23,ue),t(24,de)}return i.$$set=g=>{"value"in g&&t(0,r=g.value),"label"in g&&t(4,o=g.label),"show_label"in g&&t(5,a=g.show_label),"source"in g&&t(6,c=g.source),"tool"in g&&t(1,l=g.tool),"shape"in g&&t(7,u=g.shape),"streaming"in g&&t(8,h=g.streaming),"pending"in g&&t(9,f=g.pending),"mirror_webcam"in g&&t(10,p=g.mirror_webcam),"brush_radius"in g&&t(2,_=g.brush_radius),"brush_color"in g&&t(3,m=g.brush_color),"mask_opacity"in g&&t(11,v=g.mask_opacity),"selectable"in g&&t(12,S=g.selectable),"root"in g&&t(13,O=g.root),"$$scope"in g&&t(64,s=g.$$scope)},i.$capture_state=()=>({createEventDispatcher:Te,tick:Ae,onMount:Ge,BlockLabel:Hn,Image:ii,SketchIcon:li,get_coordinates_of_clicked_image:an,Cropper:xi,Sketch:Xt,Webcam:tr,ModifySketch:Yt,SketchSettings:Vt,Upload:Yn,ModifyUpload:Ot,normalise_file:sn,value:r,label:o,show_label:a,source:c,tool:l,shape:u,streaming:h,pending:f,mirror_webcam:p,brush_radius:_,brush_color:m,mask_opacity:v,selectable:S,root:O,sketch:E,cropper:N,handle_upload:L,handle_clear:k,handle_save:P,dispatch:y,dragging:M,value_:z,handle_image_load:W,handle_sketch_clear:H,handle_mask_clear:te,img_height:x,img_width:G,container_height:U,mode:K,value_img:ae,max_height:ue,max_width:de,static_image:fe,handle_click:Re}),i.$inject_state=g=>{"value"in g&&t(0,r=g.value),"label"in g&&t(4,o=g.label),"show_label"in g&&t(5,a=g.show_label),"source"in g&&t(6,c=g.source),"tool"in g&&t(1,l=g.tool),"shape"in g&&t(7,u=g.shape),"streaming"in g&&t(8,h=g.streaming),"pending"in g&&t(9,f=g.pending),"mirror_webcam"in g&&t(10,p=g.mirror_webcam),"brush_radius"in g&&t(2,_=g.brush_radius),"brush_color"in g&&t(3,m=g.brush_color),"mask_opacity"in g&&t(11,v=g.mask_opacity),"selectable"in g&&t(12,S=g.selectable),"root"in g&&t(13,O=g.root),"sketch"in g&&t(17,E=g.sketch),"cropper"in g&&t(14,N=g.cropper),"dragging"in g&&t(15,M=g.dragging),"value_"in g&&t(16,z=g.value_),"img_height"in g&&t(18,x=g.img_height),"img_width"in g&&t(19,G=g.img_width),"container_height"in g&&t(20,U=g.container_height),"mode"in g&&t(21,K=g.mode),"value_img"in g&&t(22,ae=g.value_img),"max_height"in g&&t(23,ue=g.max_height),"max_width"in g&&t(24,de=g.max_width),"static_image"in g&&t(25,fe=g.static_image)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),i.$$.update=()=>{i.$$.dirty[0]&32768&&y("drag",M),i.$$.dirty[0]&73729&&r!==z&&(t(16,z=r),sn(z,O,null)),i.$$.dirty[0]&65536&&console.log(z),i.$$.dirty[0]&66&&(c==="canvas"&&l==="sketch"?t(21,K="bw-sketch"):l==="color-sketch"?t(21,K="color-sketch"):(c==="upload"||c==="webcam")&&l==="sketch"?t(21,K="mask"):t(21,K="editor")),i.$$.dirty[0]&1&&(r===null||r.image===null&&r.mask===null)&&t(25,fe=void 0),i.$$.dirty[0]&16385&&N&&(r?(t(14,N.image=r,N),N.create()):N.destroy())},[r,l,_,m,o,a,c,u,h,f,p,v,S,O,N,M,z,E,x,G,U,K,ae,ue,de,fe,L,k,P,W,H,te,Re,n,b,Je,Ue,_t,xe,pt,$e,et,tt,it,nt,Ne,rt,ot,st,at,ct,Ce,ze,wt,Xe,bt,vt,qt,Gt,Ft,Zt,Kt,d,A,s]}class Ar extends ve{constructor(e){super(e),ye(this,e,vs,Xi,me,{value:0,label:4,show_label:5,source:6,tool:1,shape:7,streaming:8,pending:9,mirror_webcam:10,brush_radius:2,brush_color:3,mask_opacity:11,selectable:12,root:13},null,[-1,-1,-1]),R("SvelteRegisterComponent",{component:this,tagName:"Image_1",options:e,id:Xi.name})}get value(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get label(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set label(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get show_label(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set show_label(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get source(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set source(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get tool(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tool(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get shape(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set shape(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get streaming(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set streaming(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pending(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pending(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mirror_webcam(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mirror_webcam(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get brush_radius(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set brush_radius(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get brush_color(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set brush_color(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mask_opacity(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mask_opacity(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get selectable(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set selectable(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get root(){throw new Error("<Image>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set root(e){throw new Error("<Image>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function Nr(i){let e,t;e=new Vn({props:{type:"image"},$$inline:!0});const n={c:function(){Y(e.$$.fragment)},m:function(r,o){V(e,r,o),t=!0},p:X,i:function(r){t||(D(e.$$.fragment,r),t=!0)},o:function(r){C(e.$$.fragment,r),t=!1},d:function(r){q(e,r)}};return R("SvelteRegisterBlock",{block:n,id:Nr.name,type:"slot",source:'(54:1) <Image   {brush_radius}   {brush_color}   {shape}   bind:value   {source}   {tool}   {selectable}   {mask_opacity}   {root}   on:edit={() => gradio.dispatch(\\"edit\\")}   on:clear={() => gradio.dispatch(\\"clear\\")}   on:stream={() => gradio.dispatch(\\"stream\\")}   on:drag={({ detail }) => (dragging = detail)}   on:upload={() => gradio.dispatch(\\"upload\\")}   on:select={({ detail }) => gradio.dispatch(\\"select\\", detail)}   on:share={({ detail }) => gradio.dispatch(\\"share\\", detail)}   on:error={({ detail }) => {    loading_status = loading_status || {};    loading_status.status = \\"error\\";    gradio.dispatch(\\"error\\", detail);   }}   {label}   {show_label}   {pending}   {streaming}   {mirror_webcam}  >',ctx:i}),n}function zr(i){let e,t,n,s,r;const o=[i[1]];let a={};for(let h=0;h<o.length;h+=1)a=Zr(a,o[h]);e=new Ln({props:a,$$inline:!0});function c(h){i[25](h)}let l={brush_radius:i[15],brush_color:i[16],shape:i[14],source:i[5],tool:i[6],selectable:i[18],mask_opacity:i[17],root:i[22],label:i[7],show_label:i[8],pending:i[10],streaming:i[9],mirror_webcam:i[13],$$slots:{default:[Nr]},$$scope:{ctx:i}};i[0]!==void 0&&(l.value=i[0]),n=new Ar({props:l,$$inline:!0}),J.push(()=>we(n,"value",c)),n.$on("edit",i[26]),n.$on("clear",i[27]),n.$on("stream",i[28]),n.$on("drag",i[29]),n.$on("upload",i[30]),n.$on("select",i[31]),n.$on("share",i[32]),n.$on("error",i[33]);const u={c:function(){Y(e.$$.fragment),t=se(),Y(n.$$.fragment)},m:function(f,p){V(e,f,p),I(f,t,p),V(n,f,p),r=!0},p:function(f,p){const _=p[0]&2?Kr(o,[Qr(f[1])]):{};e.$set(_);const m={};p[0]&32768&&(m.brush_radius=f[15]),p[0]&65536&&(m.brush_color=f[16]),p[0]&16384&&(m.shape=f[14]),p[0]&32&&(m.source=f[5]),p[0]&64&&(m.tool=f[6]),p[0]&262144&&(m.selectable=f[18]),p[0]&131072&&(m.mask_opacity=f[17]),p[0]&4194304&&(m.root=f[22]),p[0]&128&&(m.label=f[7]),p[0]&256&&(m.show_label=f[8]),p[0]&1024&&(m.pending=f[10]),p[0]&512&&(m.streaming=f[9]),p[0]&8192&&(m.mirror_webcam=f[13]),p[1]&8&&(m.$$scope={dirty:p,ctx:f}),!s&&p[0]&1&&(s=!0,m.value=f[0],be(()=>s=!1)),n.$set(m)},i:function(f){r||(D(e.$$.fragment,f),D(n.$$.fragment,f),r=!0)},o:function(f){C(e.$$.fragment,f),C(n.$$.fragment,f),r=!1},d:function(f){f&&T(t),q(e,f),q(n,f)}};return R("SvelteRegisterBlock",{block:u,id:zr.name,type:"slot",source:'(38:0) <Block  {visible}  variant={value === null && source === \\"upload\\" ? \\"dashed\\" : \\"solid\\"}  border_mode={dragging ? \\"focus\\" : \\"base\\"}  padding={false}  {elem_id}  {elem_classes}  height={height || (source === \\"webcam\\" ? undefined : FIXED_HEIGHT)}  {width}  allow_overflow={false}  {container}  {scale}  {min_width} >',ctx:i}),u}function Yi(i){let e,t;e=new Wn({props:{visible:i[4],variant:i[0]===null&&i[5]==="upload"?"dashed":"solid",border_mode:i[24]?"focus":"base",padding:!1,elem_id:i[2],elem_classes:i[3],height:i[11]||(i[5]==="webcam"?void 0:Vi),width:i[12],allow_overflow:!1,container:i[19],scale:i[20],min_width:i[21],$$slots:{default:[zr]},$$scope:{ctx:i}},$$inline:!0});const n={c:function(){Y(e.$$.fragment)},l:function(r){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(r,o){V(e,r,o),t=!0},p:function(r,o){const a={};o[0]&16&&(a.visible=r[4]),o[0]&33&&(a.variant=r[0]===null&&r[5]==="upload"?"dashed":"solid"),o[0]&16777216&&(a.border_mode=r[24]?"focus":"base"),o[0]&4&&(a.elem_id=r[2]),o[0]&8&&(a.elem_classes=r[3]),o[0]&2080&&(a.height=r[11]||(r[5]==="webcam"?void 0:Vi)),o[0]&4096&&(a.width=r[12]),o[0]&524288&&(a.container=r[19]),o[0]&1048576&&(a.scale=r[20]),o[0]&2097152&&(a.min_width=r[21]),o[0]&29878243|o[1]&8&&(a.$$scope={dirty:o,ctx:r}),e.$set(a)},i:function(r){t||(D(e.$$.fragment,r),t=!0)},o:function(r){C(e.$$.fragment,r),t=!1},d:function(r){q(e,r)}};return R("SvelteRegisterBlock",{block:n,id:Yi.name,type:"component",source:"",ctx:i}),n}const Vi=240;function ys(i,e,t){let{$$slots:n={},$$scope:s}=e;ke("InteractiveImage",n,[]);let{elem_id:r=""}=e,{elem_classes:o=[]}=e,{visible:a=!0}=e,{value:c=null}=e,{source:l="upload"}=e,{tool:u="editor"}=e,{label:h}=e,{show_label:f}=e,{streaming:p}=e,{pending:_}=e,{height:m}=e,{width:v}=e,{mirror_webcam:S}=e,{shape:O}=e,{brush_radius:E}=e,{brush_color:N}=e,{mask_opacity:L}=e,{selectable:k=!1}=e,{container:P=!0}=e,{scale:y=null}=e,{min_width:M=void 0}=e,{loading_status:z}=e,{root:W}=e,{gradio:H}=e,te;i.$$.on_mount.push(function(){h===void 0&&!("label"in e||i.$$.bound[i.$$.props.label])&&console.warn("<InteractiveImage> was created without expected prop 'label'"),f===void 0&&!("show_label"in e||i.$$.bound[i.$$.props.show_label])&&console.warn("<InteractiveImage> was created without expected prop 'show_label'"),p===void 0&&!("streaming"in e||i.$$.bound[i.$$.props.streaming])&&console.warn("<InteractiveImage> was created without expected prop 'streaming'"),_===void 0&&!("pending"in e||i.$$.bound[i.$$.props.pending])&&console.warn("<InteractiveImage> was created without expected prop 'pending'"),m===void 0&&!("height"in e||i.$$.bound[i.$$.props.height])&&console.warn("<InteractiveImage> was created without expected prop 'height'"),v===void 0&&!("width"in e||i.$$.bound[i.$$.props.width])&&console.warn("<InteractiveImage> was created without expected prop 'width'"),S===void 0&&!("mirror_webcam"in e||i.$$.bound[i.$$.props.mirror_webcam])&&console.warn("<InteractiveImage> was created without expected prop 'mirror_webcam'"),O===void 0&&!("shape"in e||i.$$.bound[i.$$.props.shape])&&console.warn("<InteractiveImage> was created without expected prop 'shape'"),E===void 0&&!("brush_radius"in e||i.$$.bound[i.$$.props.brush_radius])&&console.warn("<InteractiveImage> was created without expected prop 'brush_radius'"),N===void 0&&!("brush_color"in e||i.$$.bound[i.$$.props.brush_color])&&console.warn("<InteractiveImage> was created without expected prop 'brush_color'"),L===void 0&&!("mask_opacity"in e||i.$$.bound[i.$$.props.mask_opacity])&&console.warn("<InteractiveImage> was created without expected prop 'mask_opacity'"),z===void 0&&!("loading_status"in e||i.$$.bound[i.$$.props.loading_status])&&console.warn("<InteractiveImage> was created without expected prop 'loading_status'"),W===void 0&&!("root"in e||i.$$.bound[i.$$.props.root])&&console.warn("<InteractiveImage> was created without expected prop 'root'"),H===void 0&&!("gradio"in e||i.$$.bound[i.$$.props.gradio])&&console.warn("<InteractiveImage> was created without expected prop 'gradio'")});const x=["elem_id","elem_classes","visible","value","source","tool","label","show_label","streaming","pending","height","width","mirror_webcam","shape","brush_radius","brush_color","mask_opacity","selectable","container","scale","min_width","loading_status","root","gradio"];Object.keys(e).forEach(b=>{!~x.indexOf(b)&&b.slice(0,2)!=="$$"&&b!=="slot"&&console.warn(`<InteractiveImage> was created with unknown prop '${b}'`)});function G(b){c=b,t(0,c)}const U=()=>H.dispatch("edit"),K=()=>H.dispatch("clear"),ae=()=>H.dispatch("stream"),ue=({detail:b})=>t(24,te=b),de=()=>H.dispatch("upload"),fe=({detail:b})=>H.dispatch("select",b),Re=({detail:b})=>H.dispatch("share",b),Be=({detail:b})=>{t(1,z=z||{}),t(1,z.status="error",z),H.dispatch("error",b)};return i.$$set=b=>{"elem_id"in b&&t(2,r=b.elem_id),"elem_classes"in b&&t(3,o=b.elem_classes),"visible"in b&&t(4,a=b.visible),"value"in b&&t(0,c=b.value),"source"in b&&t(5,l=b.source),"tool"in b&&t(6,u=b.tool),"label"in b&&t(7,h=b.label),"show_label"in b&&t(8,f=b.show_label),"streaming"in b&&t(9,p=b.streaming),"pending"in b&&t(10,_=b.pending),"height"in b&&t(11,m=b.height),"width"in b&&t(12,v=b.width),"mirror_webcam"in b&&t(13,S=b.mirror_webcam),"shape"in b&&t(14,O=b.shape),"brush_radius"in b&&t(15,E=b.brush_radius),"brush_color"in b&&t(16,N=b.brush_color),"mask_opacity"in b&&t(17,L=b.mask_opacity),"selectable"in b&&t(18,k=b.selectable),"container"in b&&t(19,P=b.container),"scale"in b&&t(20,y=b.scale),"min_width"in b&&t(21,M=b.min_width),"loading_status"in b&&t(1,z=b.loading_status),"root"in b&&t(22,W=b.root),"gradio"in b&&t(23,H=b.gradio)},i.$capture_state=()=>({Image:Ar,Block:Wn,_:At,StatusTracker:Ln,UploadText:Vn,elem_id:r,elem_classes:o,visible:a,value:c,source:l,tool:u,label:h,show_label:f,streaming:p,pending:_,height:m,width:v,mirror_webcam:S,shape:O,brush_radius:E,brush_color:N,mask_opacity:L,selectable:k,container:P,scale:y,min_width:M,loading_status:z,root:W,gradio:H,dragging:te,FIXED_HEIGHT:Vi}),i.$inject_state=b=>{"elem_id"in b&&t(2,r=b.elem_id),"elem_classes"in b&&t(3,o=b.elem_classes),"visible"in b&&t(4,a=b.visible),"value"in b&&t(0,c=b.value),"source"in b&&t(5,l=b.source),"tool"in b&&t(6,u=b.tool),"label"in b&&t(7,h=b.label),"show_label"in b&&t(8,f=b.show_label),"streaming"in b&&t(9,p=b.streaming),"pending"in b&&t(10,_=b.pending),"height"in b&&t(11,m=b.height),"width"in b&&t(12,v=b.width),"mirror_webcam"in b&&t(13,S=b.mirror_webcam),"shape"in b&&t(14,O=b.shape),"brush_radius"in b&&t(15,E=b.brush_radius),"brush_color"in b&&t(16,N=b.brush_color),"mask_opacity"in b&&t(17,L=b.mask_opacity),"selectable"in b&&t(18,k=b.selectable),"container"in b&&t(19,P=b.container),"scale"in b&&t(20,y=b.scale),"min_width"in b&&t(21,M=b.min_width),"loading_status"in b&&t(1,z=b.loading_status),"root"in b&&t(22,W=b.root),"gradio"in b&&t(23,H=b.gradio),"dragging"in b&&t(24,te=b.dragging)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),i.$$.update=()=>{i.$$.dirty[0]&1&&t(0,c=c||null),i.$$.dirty[0]&8388609&&H.dispatch("change")},[c,z,r,o,a,l,u,h,f,p,_,m,v,S,O,E,N,L,k,P,y,M,W,H,te,G,U,K,ae,ue,de,fe,Re,Be]}class ks extends ve{constructor(e){super(e),ye(this,e,ys,Yi,me,{elem_id:2,elem_classes:3,visible:4,value:0,source:5,tool:6,label:7,show_label:8,streaming:9,pending:10,height:11,width:12,mirror_webcam:13,shape:14,brush_radius:15,brush_color:16,mask_opacity:17,selectable:18,container:19,scale:20,min_width:21,loading_status:1,root:22,gradio:23},null,[-1,-1]),R("SvelteRegisterComponent",{component:this,tagName:"InteractiveImage",options:e,id:Yi.name})}get elem_id(){return this.$$.ctx[2]}set elem_id(e){this.$$set({elem_id:e}),Q()}get elem_classes(){return this.$$.ctx[3]}set elem_classes(e){this.$$set({elem_classes:e}),Q()}get visible(){return this.$$.ctx[4]}set visible(e){this.$$set({visible:e}),Q()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),Q()}get source(){return this.$$.ctx[5]}set source(e){this.$$set({source:e}),Q()}get tool(){return this.$$.ctx[6]}set tool(e){this.$$set({tool:e}),Q()}get label(){return this.$$.ctx[7]}set label(e){this.$$set({label:e}),Q()}get show_label(){return this.$$.ctx[8]}set show_label(e){this.$$set({show_label:e}),Q()}get streaming(){return this.$$.ctx[9]}set streaming(e){this.$$set({streaming:e}),Q()}get pending(){return this.$$.ctx[10]}set pending(e){this.$$set({pending:e}),Q()}get height(){return this.$$.ctx[11]}set height(e){this.$$set({height:e}),Q()}get width(){return this.$$.ctx[12]}set width(e){this.$$set({width:e}),Q()}get mirror_webcam(){return this.$$.ctx[13]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),Q()}get shape(){return this.$$.ctx[14]}set shape(e){this.$$set({shape:e}),Q()}get brush_radius(){return this.$$.ctx[15]}set brush_radius(e){this.$$set({brush_radius:e}),Q()}get brush_color(){return this.$$.ctx[16]}set brush_color(e){this.$$set({brush_color:e}),Q()}get mask_opacity(){return this.$$.ctx[17]}set mask_opacity(e){this.$$set({mask_opacity:e}),Q()}get selectable(){return this.$$.ctx[18]}set selectable(e){this.$$set({selectable:e}),Q()}get container(){return this.$$.ctx[19]}set container(e){this.$$set({container:e}),Q()}get scale(){return this.$$.ctx[20]}set scale(e){this.$$set({scale:e}),Q()}get min_width(){return this.$$.ctx[21]}set min_width(e){this.$$set({min_width:e}),Q()}get loading_status(){return this.$$.ctx[1]}set loading_status(e){this.$$set({loading_status:e}),Q()}get root(){return this.$$.ctx[22]}set root(e){this.$$set({root:e}),Q()}get gradio(){return this.$$.ctx[23]}set gradio(e){this.$$set({gradio:e}),Q()}}const Ns=ks;export{Ns as I,tr as W};
//# sourceMappingURL=InteractiveImage-b0c46d9a.js.map
